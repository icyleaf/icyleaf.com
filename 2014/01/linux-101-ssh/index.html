<!doctype html><html lang=zh><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="chrome=1"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>Linux 101 ç³»åˆ—ï¼šssh OpenSSH å®¢æˆ·ç«¯å·¥å…· | icyleaf</title><link rel=prev href=https://icyleaf.com/2013/12/2013-in-review/><link rel=next href=https://icyleaf.com/2014/01/intro-ruby-gem-guard/><link rel=canonical href=https://icyleaf.com/2014/01/linux-101-ssh/><link rel=apple-touch-icon sizes=180x180 href=https://icyleaf.com/images/icyleaf-icon.png><link rel=icon type=image/png sizes=32x32 href=https://icyleaf.com/images/icyleaf-icon.png><link rel=icon type=image/png sizes=16x16 href=https://icyleaf.com/images/icyleaf-icon.png><link rel=stylesheet href=https://icyleaf.com/css/main.min.css><link rel=stylesheet href=https://icyleaf.com/font/iconfont.css><link rel=stylesheet href=https://icyleaf.com/font-ali/iconfont.css><link rel=stylesheet href=https://icyleaf.com/photoswipe/photoswipe.css><meta name=title content="Linux 101 ç³»åˆ—ï¼šssh OpenSSH å®¢æˆ·ç«¯å·¥å…· | icyleaf"><meta name=author content="icyleaf"><meta name=description content="æ—¥å¸¸å†™ä»£ç çƒ­çˆ±æˆ·å¤–çš„æ¢¦æƒ³å®¶"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/icyleaf.com\/"},"articleSection":"posts","name":"Linux 101 ç³»åˆ—ï¼šssh OpenSSH å®¢æˆ·ç«¯å·¥å…·","headline":"Linux 101 ç³»åˆ—ï¼šssh OpenSSH å®¢æˆ·ç«¯å·¥å…·","description":"å½“ä½ æ•²ä¸‹ ssh ä¸ºä»€ä¹ˆæ²¡è¿æ¥æˆåŠŸåˆ°è¿œç¨‹æœåŠ¡å™¨","inLanguage":"zh","author":"icyleaf","creator":"icyleaf","publisher":"icyleaf","accountablePerson":"icyleaf","copyrightHolder":"icyleaf","copyrightYear":"2014","datePublished":"2014-01-22 12:34:56 \u002b0800 \u002b0800","dateModified":"2014-01-22 12:34:56 \u002b0800 \u002b0800","url":"https:\/\/icyleaf.com\/2014\/01\/linux-101-ssh\/","wordCount":"1762","keywords":["Linux","icyleaf"]}</script></head><body><div class=wrapper><nav class=navbar><progress class=content_progress max=0 value=0></progress><div class=container><div class="navbar-header header-logo"><a href=https://icyleaf.com/>icyleaf</a></div><div class=navbar-right><span class=menu><a class=menu-item href=https://icyleaf.com/about title>About</a>
<a class=menu-item href=https://icyleaf.com/projects title>Projects</a>
<a class=menu-item href=https://icyleaf.com/index.xml title>Feed</a>
<span class=divide></span>
<a href=javascript:void(0); class=theme-switch><i class="iconfont icon-dark-mode"></i></a></span></div></div></nav><nav class=navbar-mobile id=nav-mobile style=display:none><progress class=content_progress max=0 value=0></progress><div class=container><div class=navbar><div class="navbar-header header-logo"><a href=https://icyleaf.com/>icyleaf</a></div><div class=navbar-right><div><a href=javascript:void(0); class=theme-switch><i class="iconfont icon-dark-mode"></i></a></div><div class=menu-toggle><span></span><span></span><span></span></div></div></div><div class=menu id=mobile-menu><nav class=mb-md><a class=menu-item href=https://icyleaf.com/about title><h3>About</h3><div class=menu-active></div></a><a class=menu-item href=https://icyleaf.com/projects title><h3>Projects</h3><div class=menu-active></div></a><a class=menu-item href=https://icyleaf.com/index.xml title><h3>Feed</h3><div class=menu-active></div></a></nav></div></div></nav><main class=main><div class=container><article class=post-warp itemscope itemtype=http://schema.org/Article><header class=post-header><h1 class=post-title itemprop=description>Linux 101 ç³»åˆ—ï¼šssh OpenSSH å®¢æˆ·ç«¯å·¥å…·</h1><div class=post-description>å½“ä½ æ•²ä¸‹ ssh ä¸ºä»€ä¹ˆæ²¡è¿æ¥æˆåŠŸåˆ°è¿œç¨‹æœåŠ¡å™¨</div><div class=post-meta><time datetime=2014-01-22 itemprop=datePublished>2014-01-22</time>
Â·
<span class=tags>Linux</span>
Â·
<span class=post-word-count>1762 words Â· 8 minutes</span></div></header><div class=post-toc id=post-toc><h2 class=post-toc-title>ç›®å½•</h2><div class="post-toc-content always-active"><nav id=TableOfContents><ul><li><a href=#åŸºæœ¬å¸¸è¯†>åŸºæœ¬å¸¸è¯†</a><ul><li><a href=#åŸºæœ¬ç»„æˆéƒ¨åˆ†>åŸºæœ¬ç»„æˆéƒ¨åˆ†</a></li><li><a href=#é«˜çº§å‚æ•°>é«˜çº§å‚æ•°</a></li><li><a href=#ç®€åŒ–é…ç½®>ç®€åŒ–é…ç½®</a></li><li><a href=#é…ç½®æ–‡ä»¶>é…ç½®æ–‡ä»¶</a></li></ul></li></ul></nav></div></div><div class=post-content><div id=post-gallery><blockquote><p>ä½¿ç”¨ *nix æœåŠ¡å™¨è‚¯å®šä¼šç”¨åˆ° sshï¼Œå®ƒæ˜¯ä¸€ä¸ªé“¾æ¥åˆ°è¿œç¨‹æœåŠ¡å™¨ç»ˆç«¯çš„å·¥å…·ã€‚</p></blockquote><h2 id=åŸºæœ¬å¸¸è¯†>åŸºæœ¬å¸¸è¯†</h2><h3 id=åŸºæœ¬ç»„æˆéƒ¨åˆ†>åŸºæœ¬ç»„æˆéƒ¨åˆ†</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>$ man ssh
</span></span><span class=line><span class=ln>2</span><span class=cl>ssh <span class=o>[</span>-1246AaCfgKkMNnqsTtVvXxYy<span class=o>]</span> <span class=o>[</span>-b bind_address<span class=o>]</span> <span class=o>[</span>-c cipher_spec<span class=o>]</span>
</span></span><span class=line><span class=ln>3</span><span class=cl>     <span class=o>[</span>-D <span class=o>[</span>bind_address:<span class=o>]</span>port<span class=o>]</span> <span class=o>[</span>-e escape_char<span class=o>]</span> <span class=o>[</span>-F configfile<span class=o>]</span> <span class=o>[</span>-I pkcs11<span class=o>]</span>
</span></span><span class=line><span class=ln>4</span><span class=cl>     <span class=o>[</span>-i identity_file<span class=o>]</span> <span class=o>[</span>-L <span class=o>[</span>bind_address:<span class=o>]</span>port:host:hostport<span class=o>]</span>
</span></span><span class=line><span class=ln>5</span><span class=cl>     <span class=o>[</span>-l login_name<span class=o>]</span> <span class=o>[</span>-m mac_spec<span class=o>]</span> <span class=o>[</span>-O ctl_cmd<span class=o>]</span> <span class=o>[</span>-o option<span class=o>]</span> <span class=o>[</span>-p port<span class=o>]</span>
</span></span><span class=line><span class=ln>6</span><span class=cl>     <span class=o>[</span>-R <span class=o>[</span>bind_address:<span class=o>]</span>port:host:hostport<span class=o>]</span> <span class=o>[</span>-S ctl_path<span class=o>]</span> <span class=o>[</span>-W host:port<span class=o>]</span>
</span></span><span class=line><span class=ln>7</span><span class=cl>     <span class=o>[</span>-w local_tun<span class=o>[</span>:remote_tun<span class=o>]]</span> <span class=o>[</span>user@<span class=o>]</span>hostname <span class=o>[</span>command<span class=o>]</span>
</span></span></code></pre></div><p>æœ‰æ²¡æœ‰è¢«å¸®åŠ©æ‰‹å†Œçš„å‚æ•°å“åˆ°ï¼Œé‚£æˆ‘ä»¬ç²¾ç®€ä¸€ä¸‹ï¼š</p><blockquote><p>ssh [user@]hostname [-p port]</p></blockquote><p>ç™»å½•åˆ°è¿œç¨‹æœåŠ¡å™¨å’Œç™»å½•æœ¬åœ°ç”µè„‘ç³»ç»Ÿæ²¡ä»€ä¹ˆå¤§çš„åŒºåˆ«ï¼Œéƒ½éœ€è¦ç”¨æˆ·åï¼Œå¯†ç ï¼Œé™¤æ­¤ä¹‹å¤–æˆ‘ä»¬è¿˜éœ€è¦çŸ¥é“è¿œç¨‹æœåŠ¡å™¨çš„åœ°å€ï¼ˆIP åœ°å€æˆ–åŸŸåå‡å¯ï¼‰åŠå…è®¸çš„ç«¯å£ï¼ˆé»˜è®¤ 22 ç«¯å£ï¼‰ã€‚</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>$ ssh root@10.10.10.10 -p <span class=m>22</span>
</span></span></code></pre></div><p>æœ‰äº›æ—¶å€™å¤§å®¶å‘ç°ä¸€äº›æ•™ç¨‹æ²¡æœ‰æåˆ°ç”¨æˆ·ï¼Œå®é™…ä¸Š ssh å¾ˆèªæ˜ï¼Œé»˜è®¤ä¼šä½¿ç”¨å½“å‰ç³»ç»Ÿçš„ç”¨æˆ·åï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl><span class=o>(</span>icyleaf<span class=o>)</span> $ ssh 10.10.10.10
</span></span></code></pre></div><p>è¿™ä¸ªå°±ç­‰åŒäº</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>$ ssh icyleaf@10.10.10.10
</span></span></code></pre></div><p>æœ‰äº›æœåŠ¡å™¨å¯èƒ½ä¸ºäº†å®‰å…¨æœŸé—´ä¿®æ”¹äº†é»˜è®¤çš„ç«¯å£ï¼Œæ¯”å¦‚ 2020ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>$ ssh icyleaf@10.10.10.10 -p <span class=m>2020</span>
</span></span></code></pre></div><h3 id=é«˜çº§å‚æ•°>é«˜çº§å‚æ•°</h3><h4 id=socket-ä»£ç†>Socket ä»£ç†</h4><p>å‘ï¼Œä½ å¯èƒ½å› ä¸º GFW çš„å¨åŠ›ï¼Œå°è¯•ä½¿ç”¨ ssh çš„ socket ä»£ç†ï¼Œå®é™…ä¸Šå°±æ˜¯ç”¨åˆ°çš„ <code>-D</code> å‚æ•°ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>-D <span class=o>[</span>bind_address:<span class=o>]</span>port
</span></span><span class=line><span class=ln>2</span><span class=cl>   Specifies a <span class=nb>local</span> <span class=sb>``</span>dynamic application-level port forwarding.
</span></span><span class=line><span class=ln>3</span><span class=cl>   This works by allocating a socket to listen to port on the <span class=nb>local</span>
</span></span><span class=line><span class=ln>4</span><span class=cl>   side, optionally bound to the specified bind_address.  Whenever a
</span></span><span class=line><span class=ln>5</span><span class=cl>   connection is made to this port, the connection is forwarded over
</span></span><span class=line><span class=ln>6</span><span class=cl>   the secure channel, and the application protocol is <span class=k>then</span> used to
</span></span><span class=line><span class=ln>7</span><span class=cl>   determine where to connect to from the remote machine.  Currently
</span></span><span class=line><span class=ln>8</span><span class=cl>   the SOCKS4 and SOCKS5 protocols are supported, and ssh will act
</span></span><span class=line><span class=ln>9</span><span class=cl>   as a SOCKS server.  Only root can forward privileged ports.
</span></span></code></pre></div><p>æˆ‘ä»¬æ¥ç®€å•ç”»ä¸‹å®ƒçš„å·¥ä½œæµç¨‹ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-txt data-lang=txt><span class=line><span class=ln>1</span><span class=cl>|----client----|                    |-----server----|
</span></span><span class=line><span class=ln>2</span><span class=cl>|              |                    |               |
</span></span><span class=line><span class=ln>3</span><span class=cl>|   local port&lt;|  &lt;incoming         |               |
</span></span><span class=line><span class=ln>4</span><span class=cl>|    ssh port&lt;&gt;|  &lt;--------------&gt;  |&lt;&gt; ssh port    |
</span></span><span class=line><span class=ln>5</span><span class=cl>                                    |    forwarding&gt;|  &gt;outgoing connection
</span></span><span class=line><span class=ln>6</span><span class=cl>
</span></span><span class=line><span class=ln>7</span><span class=cl>                                     &lt;&lt;&lt;------------local network-----------
</span></span></code></pre></div><p>å®ƒé¦–å…ˆéœ€è¦ç™»å½•åˆ°è¿œç¨‹æœåŠ¡å™¨ï¼Œå¹¶æŠŠæœ¬åœ°çš„è¯·æ±‚å…¨éƒ¨è½¬å‘åˆ°æœåŠ¡å™¨æŒ‡å®šçš„ç«¯å£ä¸Šï¼Œç„¶åé€šè¿‡ç”±æœåŠ¡å™¨å†å»è¯·æ±‚ã€‚ä¾‹å¦‚æˆ‘ä»¬è®¾ç½® 8624 ç«¯å£ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>$ ssh -D8624 icyleaf@10.10.10.10 -p <span class=m>22</span>
</span></span></code></pre></div><p>è¿™æ ·ä¿æŒè¿™ä¸ªè¿æ¥ï¼Œæˆ‘ä»¬åœ¨è®¾ç½®æµè§ˆå™¨æˆ–ç³»ç»Ÿçš„ socket4/5 ä»£ç†å°±èƒ½è¾¾åˆ°ç¿»å¢™çš„ç›®çš„ã€‚å½“å‰è¿™ä¸ªæœ€å¤§çš„å‰ææ˜¯ä½ çš„æœåŠ¡å™¨åœ¨ä¸æ‰‹ GFW çš„æ§åˆ¶ä¸‹ï¼ˆä»»æ„æµ·å¤–æœªè¢« GFW æœåŠ¡å™¨ï¼‰</p><h4 id=è·³æ¿ä»£ç†>è·³æ¿ä»£ç†</h4><p>æˆ–è®¸æ›¾ç»ä½ åœ¨çœ‹æŸæœ¬é»‘å®¢æ‚å¿—æˆ–ç”µå½±å‡ºç°è¿‡è¿™æ ·çš„ç‰‡æ®µï¼Œé»‘å®¢ä½¿ç”¨è‚‰é¸¡è·³æ¿ä¸æ–­çš„å¢åŠ éš¾åº¦é¿å¼€è­¦å¯Ÿçš„è¿½è¸ªï¼Œå®é™…ä¸Šæˆ‘ä»¬é€šè¿‡ ssh ä¹Ÿèƒ½éå¸¸ç®€å•åˆå¾ˆé…·çš„å®ç°ã€‚</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-txt data-lang=txt><span class=line><span class=ln>1</span><span class=cl>-L [bind_address:]port:host:hostport
</span></span><span class=line><span class=ln>2</span><span class=cl>   Specifies that the given port on the local (client) host is to be
</span></span><span class=line><span class=ln>3</span><span class=cl>   forwarded to the given host and port on the remote side.  This
</span></span><span class=line><span class=ln>4</span><span class=cl>   works by allocating a socket to listen to port on the local side,
</span></span><span class=line><span class=ln>5</span><span class=cl>   optionally bound to the specified bind_address.  Whenever a con-
</span></span><span class=line><span class=ln>6</span><span class=cl>   nection is made to this port, the connection is forwarded over
</span></span><span class=line><span class=ln>7</span><span class=cl>   the secure channel, and a connection is made to host port
</span></span><span class=line><span class=ln>8</span><span class=cl>   hostport from the remote machine.
</span></span></code></pre></div><p>åŒæ ·ç»™å‡ºå·¥ä½œæµç¨‹ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-txt data-lang=txt><span class=line><span class=ln>1</span><span class=cl>|----client----|                    |-----server----|                 |-----host-----|
</span></span><span class=line><span class=ln>2</span><span class=cl>|              |                    |               |                 |              |
</span></span><span class=line><span class=ln>3</span><span class=cl>|   local port&lt;|  &lt;incoming         |               |                 |              |
</span></span><span class=line><span class=ln>4</span><span class=cl>|    ssh port&lt;&gt;|  &lt;--------------&gt;  |&lt;&gt; ssh port    |                 |              |
</span></span><span class=line><span class=ln>5</span><span class=cl>                                    |    forwarding&gt;|  -------------&gt; |&gt;host port    |
</span></span><span class=line><span class=ln>6</span><span class=cl>
</span></span><span class=line><span class=ln>7</span><span class=cl>                                     &lt;&lt;&lt;------------local network-------------------&gt;&gt;&gt;
</span></span></code></pre></div><p>å®é™…ä¸Šæˆ‘åªéœ€è¦æ“ä½œ <code>-L [bind_address:]port:host:hostport</code> å³å¯ã€‚è¿™é‡Œå‡è®¾æˆ‘ä»¬æƒ³ç™»å½•çš„ç›®æ ‡æœåŠ¡å™¨ target(10.10.10.10)ï¼Œè€Œæˆ‘ä»¬å¸Œæœ›åœ¨è‚‰é¸¡ chicken(20.20.20.20) ä¸Šåšæˆè·³æ¿ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>$ ssh -L2020:20.20.20.20:22 10.10.10.10
</span></span></code></pre></div><h3 id=ç®€åŒ–é…ç½®>ç®€åŒ–é…ç½®</h3><p>åå¤çš„è¾“å…¥è¿™äº›ç¹ççš„å‚æ•°ï¼Œç”šæ˜¯è‹¦æ¼ï¼Œèƒ½ä¸èƒ½é€šè¿‡ä¸€ç§èµ·ä¸ªåˆ«åå°±èƒ½æŠŠä¸Šé¢çš„å‚æ•°å…¨éƒ¨è‡ªåŠ¨è®¾ç½®å¥½å‘¢ï¼Ÿï¼æ²¡é—®é¢˜ï¼</p><p>åˆ›å»º <code>~/.ssh/config</code> æ–‡ä»¶ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>Host linode
</span></span><span class=line><span class=ln>2</span><span class=cl>HostName 10.10.10.10
</span></span><span class=line><span class=ln>3</span><span class=cl>Port <span class=m>22</span>
</span></span><span class=line><span class=ln>4</span><span class=cl>User icyleaf
</span></span></code></pre></div><p>è¿™ä¸ªå°±æ˜¯åŸºæœ¬ç»„æˆéƒ¨åˆ†ã€‚å¦‚æœä½ æƒ³é…ç½®æ›´å¤šï¼Œä¸‹é¢æ˜¯å®Œæ•´çš„å‚æ•°ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-txt data-lang=txt><span class=line><span class=ln> 1</span><span class=cl>AddressFamily
</span></span><span class=line><span class=ln> 2</span><span class=cl>BatchMode
</span></span><span class=line><span class=ln> 3</span><span class=cl>BindAddress
</span></span><span class=line><span class=ln> 4</span><span class=cl>ChallengeResponseAuthentication
</span></span><span class=line><span class=ln> 5</span><span class=cl>CheckHostIP
</span></span><span class=line><span class=ln> 6</span><span class=cl>Cipher
</span></span><span class=line><span class=ln> 7</span><span class=cl>Ciphers
</span></span><span class=line><span class=ln> 8</span><span class=cl>ClearAllForwardings
</span></span><span class=line><span class=ln> 9</span><span class=cl>Compression
</span></span><span class=line><span class=ln>10</span><span class=cl>CompressionLevel
</span></span><span class=line><span class=ln>11</span><span class=cl>ConnectionAttempts
</span></span><span class=line><span class=ln>12</span><span class=cl>ConnectTimeout
</span></span><span class=line><span class=ln>13</span><span class=cl>ControlMaster
</span></span><span class=line><span class=ln>14</span><span class=cl>ControlPath
</span></span><span class=line><span class=ln>15</span><span class=cl>ControlPersist
</span></span><span class=line><span class=ln>16</span><span class=cl>DynamicForward
</span></span><span class=line><span class=ln>17</span><span class=cl>EscapeChar
</span></span><span class=line><span class=ln>18</span><span class=cl>ExitOnForwardFailure
</span></span><span class=line><span class=ln>19</span><span class=cl>ForwardAgent
</span></span><span class=line><span class=ln>20</span><span class=cl>ForwardX11
</span></span><span class=line><span class=ln>21</span><span class=cl>ForwardX11Timeout
</span></span><span class=line><span class=ln>22</span><span class=cl>ForwardX11Trusted
</span></span><span class=line><span class=ln>23</span><span class=cl>GatewayPorts
</span></span><span class=line><span class=ln>24</span><span class=cl>GlobalKnownHostsFile
</span></span><span class=line><span class=ln>25</span><span class=cl>GSSAPIAuthentication
</span></span><span class=line><span class=ln>26</span><span class=cl>GSSAPIDelegateCredentials
</span></span><span class=line><span class=ln>27</span><span class=cl>HashKnownHosts
</span></span><span class=line><span class=ln>28</span><span class=cl>Host
</span></span><span class=line><span class=ln>29</span><span class=cl>HostbasedAuthentication
</span></span><span class=line><span class=ln>30</span><span class=cl>HostKeyAlgorithms
</span></span><span class=line><span class=ln>31</span><span class=cl>HostKeyAlias
</span></span><span class=line><span class=ln>32</span><span class=cl>HostName
</span></span><span class=line><span class=ln>33</span><span class=cl>IdentityFile
</span></span><span class=line><span class=ln>34</span><span class=cl>IdentitiesOnly
</span></span><span class=line><span class=ln>35</span><span class=cl>IPQoS
</span></span><span class=line><span class=ln>36</span><span class=cl>KbdInteractiveAuthentication
</span></span><span class=line><span class=ln>37</span><span class=cl>KbdInteractiveDevices
</span></span><span class=line><span class=ln>38</span><span class=cl>KexAlgorithms
</span></span><span class=line><span class=ln>39</span><span class=cl>LocalCommand
</span></span><span class=line><span class=ln>40</span><span class=cl>LocalForward
</span></span><span class=line><span class=ln>41</span><span class=cl>LogLevel
</span></span><span class=line><span class=ln>42</span><span class=cl>MACs
</span></span><span class=line><span class=ln>43</span><span class=cl>NoHostAuthenticationForLocalhost
</span></span><span class=line><span class=ln>44</span><span class=cl>NumberOfPasswordPrompts
</span></span><span class=line><span class=ln>45</span><span class=cl>PasswordAuthentication
</span></span><span class=line><span class=ln>46</span><span class=cl>PermitLocalCommand
</span></span><span class=line><span class=ln>47</span><span class=cl>PKCS11Provider
</span></span><span class=line><span class=ln>48</span><span class=cl>Port
</span></span><span class=line><span class=ln>49</span><span class=cl>PreferredAuthentications
</span></span><span class=line><span class=ln>50</span><span class=cl>Protocol
</span></span><span class=line><span class=ln>51</span><span class=cl>ProxyCommand
</span></span><span class=line><span class=ln>52</span><span class=cl>PubkeyAuthentication
</span></span><span class=line><span class=ln>53</span><span class=cl>RekeyLimit
</span></span><span class=line><span class=ln>54</span><span class=cl>RemoteForward
</span></span><span class=line><span class=ln>55</span><span class=cl>RequestTTY
</span></span><span class=line><span class=ln>56</span><span class=cl>RhostsRSAAuthentication
</span></span><span class=line><span class=ln>57</span><span class=cl>RSAAuthentication
</span></span><span class=line><span class=ln>58</span><span class=cl>SendEnv
</span></span><span class=line><span class=ln>59</span><span class=cl>ServerAliveInterval
</span></span><span class=line><span class=ln>60</span><span class=cl>ServerAliveCountMax
</span></span><span class=line><span class=ln>61</span><span class=cl>StrictHostKeyChecking
</span></span><span class=line><span class=ln>62</span><span class=cl>TCPKeepAlive
</span></span><span class=line><span class=ln>63</span><span class=cl>Tunnel
</span></span><span class=line><span class=ln>64</span><span class=cl>TunnelDevice
</span></span><span class=line><span class=ln>65</span><span class=cl>UsePrivilegedPort
</span></span><span class=line><span class=ln>66</span><span class=cl>User
</span></span><span class=line><span class=ln>67</span><span class=cl>UserKnownHostsFile
</span></span><span class=line><span class=ln>68</span><span class=cl>VerifyHostKeyDNS
</span></span><span class=line><span class=ln>69</span><span class=cl>VisualHostKey
</span></span><span class=line><span class=ln>70</span><span class=cl>XAuthLocation
</span></span></code></pre></div><h3 id=é…ç½®æ–‡ä»¶>é…ç½®æ–‡ä»¶</h3><p>åˆšæ‰è®²åˆ°çš„ <code>~/.ssh/config</code> æ˜¯é…ç½® ssh æœåŠ¡å™¨çš„æ–‡ä»¶ï¼Œå…¶å®é™¤äº†è¿™äº›è¿˜æœ‰å¥½å¤šï¼Œæ¯”å¦‚å¤§å®¶å¯èƒ½ä¼šç»å¸¸è§åˆ°çš„ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-txt data-lang=txt><span class=line><span class=ln> 1</span><span class=cl>~/.ssh/config
</span></span><span class=line><span class=ln> 2</span><span class=cl>  This is the per-user configuration file.  The file format and
</span></span><span class=line><span class=ln> 3</span><span class=cl>  configuration options are described in ssh_config(5).  Because of
</span></span><span class=line><span class=ln> 4</span><span class=cl>  the potential for abuse, this file must have strict permissions:
</span></span><span class=line><span class=ln> 5</span><span class=cl>  read/write for the user, and not accessible by others.
</span></span><span class=line><span class=ln> 6</span><span class=cl>
</span></span><span class=line><span class=ln> 7</span><span class=cl>~/.ssh/authorized_keys
</span></span><span class=line><span class=ln> 8</span><span class=cl>  Lists the public keys (DSA/ECDSA/RSA) that can be used for log-
</span></span><span class=line><span class=ln> 9</span><span class=cl>  ging in as this user.  The format of this file is described in
</span></span><span class=line><span class=ln>10</span><span class=cl>  the sshd(8) manual page.  This file is not highly sensitive, but
</span></span><span class=line><span class=ln>11</span><span class=cl>  the recommended permissions are read/write for the user, and not
</span></span><span class=line><span class=ln>12</span><span class=cl>  accessible by others.
</span></span><span class=line><span class=ln>13</span><span class=cl>
</span></span><span class=line><span class=ln>14</span><span class=cl>~/.ssh/identity
</span></span><span class=line><span class=ln>15</span><span class=cl>~/.ssh/id_dsa
</span></span><span class=line><span class=ln>16</span><span class=cl>~/.ssh/id_ecdsa
</span></span><span class=line><span class=ln>17</span><span class=cl>~/.ssh/id_rsa
</span></span><span class=line><span class=ln>18</span><span class=cl>  Contains the private key for authentication.  These files contain
</span></span><span class=line><span class=ln>19</span><span class=cl>  sensitive data and should be readable by the user but not acces-
</span></span><span class=line><span class=ln>20</span><span class=cl>  sible by others (read/write/execute).  ssh will simply ignore a
</span></span><span class=line><span class=ln>21</span><span class=cl>  private key file if it is accessible by others.  It is possible
</span></span><span class=line><span class=ln>22</span><span class=cl>  to specify a passphrase when generating the key which will be
</span></span><span class=line><span class=ln>23</span><span class=cl>  used to encrypt the sensitive part of this file using 3DES.
</span></span><span class=line><span class=ln>24</span><span class=cl>
</span></span><span class=line><span class=ln>25</span><span class=cl>~/.ssh/identity.pub
</span></span><span class=line><span class=ln>26</span><span class=cl>~/.ssh/id_dsa.pub
</span></span><span class=line><span class=ln>27</span><span class=cl>~/.ssh/id_ecdsa.pub
</span></span><span class=line><span class=ln>28</span><span class=cl>~/.ssh/id_rsa.pub
</span></span><span class=line><span class=ln>29</span><span class=cl>  Contains the public key for authentication.  These files are not
</span></span><span class=line><span class=ln>30</span><span class=cl>  sensitive and can (but need not) be readable by anyone.
</span></span><span class=line><span class=ln>31</span><span class=cl>
</span></span><span class=line><span class=ln>32</span><span class=cl>~/.ssh/known_hosts
</span></span><span class=line><span class=ln>33</span><span class=cl>  Contains a list of host keys for all hosts the user has logged
</span></span><span class=line><span class=ln>34</span><span class=cl>  into that are not already in the systemwide list of known host
</span></span><span class=line><span class=ln>35</span><span class=cl>  keys.  See sshd(8) for further details of the format of this
</span></span><span class=line><span class=ln>36</span><span class=cl>  file.
</span></span></code></pre></div><p>æ›´å¤šæ–‡ä»¶ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-txt data-lang=txt><span class=line><span class=ln> 1</span><span class=cl>~/.rhosts
</span></span><span class=line><span class=ln> 2</span><span class=cl>  This file is used for host-based authentication (see above).  On
</span></span><span class=line><span class=ln> 3</span><span class=cl>  some machines this file may need to be world-readable if the
</span></span><span class=line><span class=ln> 4</span><span class=cl>  user&#39;s home directory is on an NFS partition, because sshd(8)
</span></span><span class=line><span class=ln> 5</span><span class=cl>  reads it as root.  Additionally, this file must be owned by the
</span></span><span class=line><span class=ln> 6</span><span class=cl>  user, and must not have write permissions for anyone else.  The
</span></span><span class=line><span class=ln> 7</span><span class=cl>  recommended permission for most machines is read/write for the
</span></span><span class=line><span class=ln> 8</span><span class=cl>  user, and not accessible by others.
</span></span><span class=line><span class=ln> 9</span><span class=cl>
</span></span><span class=line><span class=ln>10</span><span class=cl>~/.shosts
</span></span><span class=line><span class=ln>11</span><span class=cl>  This file is used in exactly the same way as .rhosts, but allows
</span></span><span class=line><span class=ln>12</span><span class=cl>  host-based authentication without permitting login with
</span></span><span class=line><span class=ln>13</span><span class=cl>  rlogin/rsh.
</span></span><span class=line><span class=ln>14</span><span class=cl>
</span></span><span class=line><span class=ln>15</span><span class=cl>~/.ssh/
</span></span><span class=line><span class=ln>16</span><span class=cl>  This directory is the default location for all user-specific con-
</span></span><span class=line><span class=ln>17</span><span class=cl>  figuration and authentication information.  There is no general
</span></span><span class=line><span class=ln>18</span><span class=cl>  requirement to keep the entire contents of this directory secret,
</span></span><span class=line><span class=ln>19</span><span class=cl>  but the recommended permissions are read/write/execute for the
</span></span><span class=line><span class=ln>20</span><span class=cl>  user, and not accessible by others.
</span></span><span class=line><span class=ln>21</span><span class=cl>
</span></span><span class=line><span class=ln>22</span><span class=cl>~/.ssh/environment
</span></span><span class=line><span class=ln>23</span><span class=cl>  Contains additional definitions for environment variables; see
</span></span><span class=line><span class=ln>24</span><span class=cl>  ENVIRONMENT, above.
</span></span><span class=line><span class=ln>25</span><span class=cl>
</span></span><span class=line><span class=ln>26</span><span class=cl>~/.ssh/rc
</span></span><span class=line><span class=ln>27</span><span class=cl>  Commands in this file are executed by ssh when the user logs in,
</span></span><span class=line><span class=ln>28</span><span class=cl>  just before the user&#39;s shell (or command) is started.  See the
</span></span><span class=line><span class=ln>29</span><span class=cl>  sshd(8) manual page for more information.
</span></span><span class=line><span class=ln>30</span><span class=cl>
</span></span><span class=line><span class=ln>31</span><span class=cl>/etc/hosts.equiv
</span></span><span class=line><span class=ln>32</span><span class=cl>  This file is for host-based authentication (see above).  It
</span></span><span class=line><span class=ln>33</span><span class=cl>  should only be writable by root.
</span></span><span class=line><span class=ln>34</span><span class=cl>
</span></span><span class=line><span class=ln>35</span><span class=cl>/etc/shosts.equiv
</span></span><span class=line><span class=ln>36</span><span class=cl>  This file is used in exactly the same way as hosts.equiv, but
</span></span><span class=line><span class=ln>37</span><span class=cl>  allows host-based authentication without permitting login with
</span></span><span class=line><span class=ln>38</span><span class=cl>  rlogin/rsh.
</span></span><span class=line><span class=ln>39</span><span class=cl>
</span></span><span class=line><span class=ln>40</span><span class=cl>/etc/ssh/ssh_config
</span></span><span class=line><span class=ln>41</span><span class=cl>  Systemwide configuration file.  The file format and configuration
</span></span><span class=line><span class=ln>42</span><span class=cl>  options are described in ssh_config(5).
</span></span><span class=line><span class=ln>43</span><span class=cl>
</span></span><span class=line><span class=ln>44</span><span class=cl>/etc/ssh/ssh_host_key
</span></span><span class=line><span class=ln>45</span><span class=cl>/etc/ssh/ssh_host_dsa_key
</span></span><span class=line><span class=ln>46</span><span class=cl>/etc/ssh/ssh_host_ecdsa_key
</span></span><span class=line><span class=ln>47</span><span class=cl>/etc/ssh/ssh_host_rsa_key
</span></span><span class=line><span class=ln>48</span><span class=cl>  These files contain the private parts of the host keys and are
</span></span><span class=line><span class=ln>49</span><span class=cl>  used for host-based authentication.  If protocol version 1 is
</span></span><span class=line><span class=ln>50</span><span class=cl>  used, ssh must be setuid root, since the host key is readable
</span></span><span class=line><span class=ln>51</span><span class=cl>  only by root.  For protocol version 2, ssh uses ssh-keysign(8) to
</span></span><span class=line><span class=ln>52</span><span class=cl>  access the host keys, eliminating the requirement that ssh be
</span></span><span class=line><span class=ln>53</span><span class=cl>  setuid root when host-based authentication is used.  By default
</span></span><span class=line><span class=ln>54</span><span class=cl>  ssh is not setuid root.
</span></span><span class=line><span class=ln>55</span><span class=cl>
</span></span><span class=line><span class=ln>56</span><span class=cl>/etc/ssh/ssh_known_hosts
</span></span><span class=line><span class=ln>57</span><span class=cl>  Systemwide list of known host keys.  This file should be prepared
</span></span><span class=line><span class=ln>58</span><span class=cl>  by the system administrator to contain the public host keys of
</span></span><span class=line><span class=ln>59</span><span class=cl>  all machines in the organization.  It should be world-readable.
</span></span><span class=line><span class=ln>60</span><span class=cl>  See sshd(8) for further details of the format of this file.
</span></span><span class=line><span class=ln>61</span><span class=cl>
</span></span><span class=line><span class=ln>62</span><span class=cl>/etc/ssh/sshrc
</span></span><span class=line><span class=ln>63</span><span class=cl>  Commands in this file are executed by ssh when the user logs in,
</span></span><span class=line><span class=ln>64</span><span class=cl>  just before the user&#39;s shell (or command) is started.  See the
</span></span><span class=line><span class=ln>65</span><span class=cl>  sshd(8) manual page for more information.
</span></span></code></pre></div><p>èµ„æ–™å‚è€ƒï¼š</p><ol><li>[Linux] man ssh</li><li><a href=http://www.openfsg.com/index.php/Advanced_SSH_usage>Advanced SSH usage</a></li></ol></div></div><div class=post-nav><a href=https://icyleaf.com/2013/12/2013-in-review/ class=prev rel=prev title="2013 å¹´ç»ˆæ€»ç»“"><i class="iconfont icon-left"></i>&nbsp;2013 å¹´ç»ˆæ€»ç»“</a>
<a href=https://icyleaf.com/2014/01/intro-ruby-gem-guard/ class=next rel=next title="åˆè¯† Ruby Gem Guard">åˆè¯† Ruby Gem Guard&nbsp;<i class="iconfont icon-right"></i></a></div><div class=post-comment><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//icyleaf.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></article></div></main><footer class=footer><div class=copyright>&copy;
<span itemprop=copyrightYear>2005 - 2022</span>
<span>ğŸº</span>
<span class=author itemprop=copyrightHolder><a href=https://icyleaf.com/>icyleaf</a></span></div></footer><script src=https://fastly.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js crossorigin=anonymous></script>
<script defer src=https://icyleaf.com/js/vendor_main.min.js></script>
<script src=https://fastly.jsdelivr.net/npm/pangu@4.0.7/dist/browser/pangu.min.js integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin=anonymous></script>
<script>pangu.spacingPage()</script><script type=module>
  
  import PhotoSwipeLightbox from '\/photoswipe\/photoswipe-lightbox.esm.js';

  const lightbox = new PhotoSwipeLightbox({
    gallery: '#post-gallery',
    children: 'a.gallery-item',
    pswpModule: () => import('\/photoswipe\/photoswipe.esm.js'),
  });
  lightbox.init();
</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-TKQBZ7R259"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-TKQBZ7R259")</script></div></body></html>