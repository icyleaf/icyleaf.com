<!doctype html><html lang=zh dir=auto></html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>ä½ è™æˆ‘åƒç™¾éï¼Œæˆ‘å¾…ä½ å¦‚åˆæ‹ï¼Œç›´åˆ°æˆ‘é‡åˆ° match | icyleaf</title><meta name=keywords content="iOS,Android,CI,CD,Ruby,Fastlane,match"><meta name=description content="ç³»åˆ—æ–‡ç« çš„ç¬¬ä¸‰ç¯‡ï¼Œæ•™ä½ å¦‚ä½•ä½¿ç”¨ match ç®¡ç†åè¯éƒ½åˆ†ä¸æ¸…çš„è‹¹æœå„è‡ªå¼€å‘è€…è¯ä¹¦"><meta name=author content="icyleaf"><link rel=canonical href=https://icyleaf.com/2017/03/fastlane-match-in-action/><link rel=icon href=https://icyleaf.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://icyleaf.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://icyleaf.com/favicon-32x32.png><link rel=icon type=image/png sizes=192x192 href=https://icyleaf.com/android-chrome-192x192.png><link rel=icon type=image/png sizes=512x512 href=https://icyleaf.com/android-chrome-512x512.png><link rel=apple-touch-icon href=https://icyleaf.com/apple-touch-icon.png><link rel=mask-icon href=https://icyleaf.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=stylesheet href=https://icyleaf.com/css/main.min.css><link rel=stylesheet href=https://icyleaf.com/font/iconfont.min.css><link rel=stylesheet href=https://icyleaf.com/font-ali/iconfont.min.css><link rel=stylesheet href=https://icyleaf.com/photoswipe/photoswipe.min.css><link rel=canonical href=https://icyleaf.com/2017/03/fastlane-match-in-action/><meta property="og:title" content="ä½ è™æˆ‘åƒç™¾éï¼Œæˆ‘å¾…ä½ å¦‚åˆæ‹ï¼Œç›´åˆ°æˆ‘é‡åˆ° match"><meta property="og:description" content="ç³»åˆ—æ–‡ç« çš„ç¬¬ä¸‰ç¯‡ï¼Œæ•™ä½ å¦‚ä½•ä½¿ç”¨ match ç®¡ç†åè¯éƒ½åˆ†ä¸æ¸…çš„è‹¹æœå„è‡ªå¼€å‘è€…è¯ä¹¦"><meta property="og:type" content="article"><meta property="og:url" content="https://icyleaf.com/2017/03/fastlane-match-in-action/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2017-03-28T20:12:07+08:00"><meta property="article:modified_time" content="2017-03-28T20:12:07+08:00"><meta property="og:see_also" content="https://icyleaf.com/2016/07/fastlane-in-action/"><meta property="og:see_also" content="https://icyleaf.com/2016/07/intro-fastlane-automation-for-ios-and-android/"><meta name=twitter:card content="summary"><meta name=twitter:title content="ä½ è™æˆ‘åƒç™¾éï¼Œæˆ‘å¾…ä½ å¦‚åˆæ‹ï¼Œç›´åˆ°æˆ‘é‡åˆ° match"><meta name=twitter:description content="ç³»åˆ—æ–‡ç« çš„ç¬¬ä¸‰ç¯‡ï¼Œæ•™ä½ å¦‚ä½•ä½¿ç”¨ match ç®¡ç†åè¯éƒ½åˆ†ä¸æ¸…çš„è‹¹æœå„è‡ªå¼€å‘è€…è¯ä¹¦"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://icyleaf.com/posts/"},{"@type":"ListItem","position":2,"name":"ä½ è™æˆ‘åƒç™¾éï¼Œæˆ‘å¾…ä½ å¦‚åˆæ‹ï¼Œç›´åˆ°æˆ‘é‡åˆ° match","item":"https://icyleaf.com/2017/03/fastlane-match-in-action/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"ä½ è™æˆ‘åƒç™¾éï¼Œæˆ‘å¾…ä½ å¦‚åˆæ‹ï¼Œç›´åˆ°æˆ‘é‡åˆ° match","name":"ä½ è™æˆ‘åƒç™¾éï¼Œæˆ‘å¾…ä½ å¦‚åˆæ‹ï¼Œç›´åˆ°æˆ‘é‡åˆ° match","description":"ç³»åˆ—æ–‡ç« çš„ç¬¬ä¸‰ç¯‡ï¼Œæ•™ä½ å¦‚ä½•ä½¿ç”¨ match ç®¡ç†åè¯éƒ½åˆ†ä¸æ¸…çš„è‹¹æœå„è‡ªå¼€å‘è€…è¯ä¹¦","keywords":["iOS","Android","CI","CD","Ruby","Fastlane","match"],"articleBody":"å‰è¨€ é€šè¿‡å‰ä¸¤ç¯‡çš„æ–‡ç« å¤§å®¶å·²ç»å¯¹ fastlane çš„æ¦‚å¿µå’ŒåŸºæœ¬ä½¿ç”¨å·²ç»æœ‰äº†åˆæ­¥çš„æŒæ¡ï¼Œåœ¨ç¬¬äºŒç¯‡ä¸­ä¹Ÿæœ‰æåˆ° fastlane å®ç°çš„å„ç§åŠŸèƒ½å…¶å®éƒ½æ˜¯åŸºäºç‹¬ç«‹å°è£…è®¾è®¡çš„å„ä¸ªå·¥å…·å®ç°ã€‚å®ƒä»¬å³å¯ä»¥å•ç‹¬æˆä¸ºä¸€ä¸ªä½“ç³»åŒæ—¶ä¹Ÿä¼šè¢«å¸çº³åˆ° fastlane çš„ action ç³»ç»Ÿä¹‹ä¸­ã€‚match æ˜¯åœ¨ iOS å¼€å‘å’ŒæŒç»­æµ‹è¯•å’Œæ„å»ºä¸­æœ€é‡ä¸­ä¹‹é‡çš„ç¯èŠ‚ï¼Œå®ƒç»´æŠ¤å’Œç®¡ç†ç€ iOS çš„å„ç§è¯ä¹¦å’Œ profile çš„åˆ›å»ºã€æ›´æ–°å·¥ä½œã€‚æƒ³å¿…å¾ˆå¤šç”¨æˆ·å¬åˆ° iOS è¯ä¹¦å’Œ profile éƒ½ä¼šå¤´å¤§è„‘æ¶¨ï¼Œæ¨ä¸å¾—è¦æ‰‹æ’•é¬¼å­çš„æŠ€èƒ½ç‚¹æ¥å¯¹ä»˜ä»–ä»¬ï¼ˆå¦‚å›¾ï¼‰\nä¸Šå›¾æ¥æºäºä½œè€…ä¸“é—¨æ•´ç†çš„ç½‘ç«™ https://codesigning.guide/ï¼Œå¯¹äº iOS App ç­¾ååŸç†æ„Ÿå…´è¶£çš„å¯ä»¥å‚è§ JSPatch ä½œè€…çš„åˆ†æï¼šhttp://blog.cnbang.net/tech/3386/\nåŠŸèƒ½ç‰¹æ€§ ä¸»åŠ¨/è¢«åŠ¨åˆ›å»ºã€æ›´æ–°ã€Xcode æ‰€éœ€çš„å„ç§è¯ä¹¦å’Œæ‰“åŒ…æ‰€éœ€çš„ Profiles æ‰˜ç®¡ Xcode æ‰€éœ€çš„å„ç§è¯ä¹¦å’Œæ‰“åŒ…æ‰€éœ€çš„ Profiles ç»Ÿä¸€å¹¶å…±äº«å›¢é˜Ÿæˆå‘˜ç»Ÿä¸€ä½¿ç”¨ è¯ä¹¦å…·æœ‰å¯†ç åŠ å¯†ä¿æŠ¤ï¼ˆopensslï¼‰ æ”¯æŒå¤šå›¢é˜Ÿï¼ˆè´¦æˆ·ï¼‰ æ”¯æŒå• App å¤š Target(identifier) å†…æµ‹æ”¯æŒä¼ä¸šè´¦æˆ·ï¼ˆv0.11.0 è¿˜åœ¨æµ‹è¯•å¯ç”¨ï¼Œå¹¶æ²¡æœ‰æ­£å¼æ”¯æŒï¼‰ åŸç† match å…¶å®æ˜¯åœ¨ fastlane åŸºç¡€åŒ… certã€signã€spaceshipã€credentials_manager ä¹‹ä¸ŠæŠŠ iOS å¼€å‘è€…è¯ä¹¦æµç¨‹åŒ–çš„å·¥å…·ã€‚ä¸ºäº†å®ç°å›¢é˜Ÿå†…å…±äº«é¡¹ç›®çš„å¼€å‘è€…è¯ä¹¦ï¼Œå®ƒä½¿ç”¨ git ä»“åº“å¯¹è¯ä¹¦è¿›è¡Œæ‰˜ç®¡ï¼Œé¦–å…ˆéœ€è¦è¿›è¡Œåˆå§‹åŒ–ï¼Œé…ç½® git ä»“åº“ã€é¡¹ç›®çš„ iDP ä¿¡æ¯ä¹‹åï¼Œä¸‹è½½ Developmentã€AppStoreã€AdHoc çš„å¼€å‘è€…è¯ä¹¦å’Œé¡¹ç›®çš„ Profile filesï¼Œå¹¶é€šè¿‡ openssl çš„æ–¹å¼è¿›è¡Œå®‰å…¨åŠ å¯†åæäº¤å¹¶æ¨é€åˆ° git ä»“åº“ï¼Œå…¶ä»–æˆå‘˜ï¼ˆæˆ–è‡ªåŠ¨åŒ–æ„å»ºç³»ç»Ÿï¼‰ä½¿ç”¨æ—¶éœ€è¦è¾“å…¥å¯†é’¥åæ‰èƒ½æŠŠè¯ä¹¦è§£å¯†å¹¶å¯¼å…¥åˆ° keychain å’Œ Profiles ç›®å½•ã€‚\nå¦‚æœå¯¹äºè¯ä¹¦åŠ å¯†ç­–ç•¥æ„Ÿå…´è¶£çš„å¯ä»¥åœ¨æœ¬æ–‡åº•éƒ¨èµ„æ–™å‚è€ƒçš„ç¬¬ä¸€ä¸ªé“¾æ¥æŸ¥çœ‹è¯¦æƒ…ã€‚\nä½¿ç”¨ æœ€æ–° fastlane å·²ç»åŒ…å«äº†æ‰€æœ‰çš„å­æ¨¡å—ï¼Œç‹¬ç«‹çš„ match ä¸åœ¨æ›´æ–°ï¼Œè¯·ç›´æ¥å®‰è£… fastlaneï¼Œä½¿ç”¨ fastlane match ä»£æ›¿ match å‘½ä»¤ã€‚\nå®‰è£…å°±å¾ˆç®€å•é€šè¿‡ gem install fastlane ä¼šæŠŠå®ƒçš„å…¨å®¶æ¡¶ä¸€å¹¶ä¸‹è½½å®‰è£…ï¼Œé¦–å…ˆå¯ä»¥çœ‹ä¸‹å¸®åŠ©ï¼š\n1$ fastlane match --help 2 3 match 4 5 Easily sync your certificates and profiles across your team using git 6 7 Commands: 8 adhoc Run match for a adhoc provisioning profile 9 appstore Run match for a appstore provisioning profile 10 change_password Re-encrypt all files with a different password 11 decrypt Decrypts the repository and keeps it on the filesystem 12 development Run match for a development provisioning profile 13 help Display global or [command] help documentation 14 init Create the Matchfile for you 15 nuke Delete all certificates and provisioning profiles from the Apple Dev Portal 16 nuke development Delete all certificates and provisioning profiles from the Apple Dev Portal of the type development 17 nuke distribution Delete all certificates and provisioning profiles from the Apple Dev Portal of the type distribution 18 run Easily sync your certificates and profiles across your team using git 19 20 Global Options: 21 --verbose 22 -r, --git_url STRING URL to the git repo containing all the certificates (MATCH_GIT_URL) 23 --git_branch STRING Specific git branch to use (MATCH_GIT_BRANCH) 24 -y, --type STRING Create a development certificate instead of a distribution one (MATCH_TYPE) 25 -a, --app_identifier [VALUE] The bundle identifier(s) of your app (comma-separated) (MATCH_APP_IDENTIFIER) 26 -u, --username STRING Your Apple ID Username (MATCH_USERNAME) 27 -s, --keychain_name STRING Keychain the items should be imported to (MATCH_KEYCHAIN_NAME) 28 -p, --keychain_password STRING This might be required the first time you access certificates on a new mac. For the login/default keychain this is your account password (MATCH_KEYCHAIN_PASSWORD) 29 --readonly [VALUE] Only fetch existing certificates and profiles, don't generate new ones (MATCH_READONLY) 30 -b, --team_id STRING The ID of your Developer Portal team if you're in multiple teams (FASTLANE_TEAM_ID) 31 -l, --team_name STRING The name of your Developer Portal team if you're in multiple teams (FASTLANE_TEAM_NAME) 32 --verbose [VALUE] Print out extra information and all commands (MATCH_VERBOSE) 33 --force [VALUE] Renew the provisioning profiles every time you run match (MATCH_FORCE) 34 --skip_confirmation [VALUE] Disables confirmation prompts during nuke, answering them with yes (MATCH_SKIP_CONFIRMATION) 35 --shallow_clone [VALUE] Make a shallow clone of the repository (truncate the history to 1 revision) (MATCH_SHALLOW_CLONE) 36 --force_for_new_devices [VALUE] Renew the provisioning profiles if the device count on the developer portal has changed (MATCH_FORCE_FOR_NEW_DEVICES) 37 --skip_docs [VALUE] Skip generation of a README.md for the created git repository (MATCH_SKIP_DOCS) 38 -h, --help Display help documentation 39 -v, --version Display version information å»ºè®®å¤§å®¶åœ¨é¡¹ç›®ä¸­åˆ›å»ºå¹¶é…ç½® fastlane/Matchfile æ–‡ä»¶å¯ä»¥æŠŠå‘½ä»¤éœ€è¦çš„å‚æ•°çœç•¥ï¼š\n1$ fastlane match init è®¾ç½®å¥½ git_url(git ä»“åº“åœ°å€ï¼‰ã€typeï¼ˆé»˜è®¤åŒæ­¥è¯ä¹¦ç±»å‹ï¼‰ã€app_identifierã€usernameï¼ˆiDP çš„è´¦æˆ·åï¼‰å³å¯ã€‚\nç”Ÿæˆå’ŒåŒæ­¥è¯ä¹¦ 1# å¼€å‘ç¯å¢ƒè¯ä¹¦ 2$ fastlane match development 3# äº§å“ç¯å¢ƒè¯ä¹¦ 4$ fastlane match appstore 5# å†…æµ‹ç¯å¢ƒè¯ä¹¦ 6$ fastlane match adhoc åˆæ¬¡ä½¿ç”¨çš„æ—¶å€™ä¼šæç¤ºéœ€è¦è¾“å…¥ iDP çš„è´¦æˆ·å¯†ç ï¼Œæ ¡éªŒæˆåŠŸåå¯ä»¥ä¿å­˜åˆ° keychain ä¸­åç»­å¯ä»¥ä¸åœ¨é‡å¤è¾“å…¥ï¼ˆå¥½è´´å¿ƒï¼‰å¯†ç ï¼ˆä¹Ÿå¯é€šè¿‡è®¾ç½®å˜é‡ FASTLANE_PASSWORDï¼‰ï¼Œè¯¥å¯†ç å°±æ˜¯ä¸Šé¢æåˆ°çš„è¯ä¹¦åŠ å¯†çš„å¯†é’¥ï¼Œè¯·å¦¥å–„ä¿å­˜ã€‚\næç¤ºï¼šå¦‚æœæ‹…å¿ƒå¯†ç æ³„éœ²å¯è®¾ç½® FASTLANE_DONT_STORE_PASSWORD = true ä¸è¿›è¡Œå¯†ç ä¿å­˜è‡³ keychainï¼Œåœ¨ keychain å¯é€šè¿‡å…³é”®è¯ â€œdeliver.â€ æ£€ç´¢ã€‚\næœ‰çš„ç«¥é‹è¯´æˆ‘ä»¬æœ‰ 299 çš„ä¼ä¸šè¯ä¹¦ï¼Œä¸ºä»€ä¹ˆä¸åšæ”¯æŒå‘¢ï¼Ÿèµ·åˆä½œè€…å¹¶æ²¡æœ‰æ‰“ç®—è¿›è¡Œæ”¯æŒæ˜¯æ‹…å¿ƒæ»¥ç”¨ä»¥åŠä»£ç ç»“æ„éœ€è¦è¾ƒå¤§çš„å˜æ›´ï¼Œéšç€å¼€å‘è€…å‘¼å£°å¤ªé«˜ï¼Œå…¶å®è¿˜æ˜¯åšäº†æ”¯æŒï¼Œåªä¸è¿‡å¹¶æ²¡æœ‰æ­£å¼çš„çº³å…¥ï¼Œéœ€è¦é€šè¿‡é…ç½®ç¯å¢ƒå˜é‡æ”¯æŒï¼š\n1# ä¼ä¸šç¯å¢ƒè¯ä¹¦ 2$ ENV['MATCH_FORCE_ENTERPRISE'] = '1' \u0026\u0026 fastlane match enterprise ä¿®æ”¹å¯†é’¥ å»ºè®®å¯†ç å®šæœŸæ›´æ¢æˆ–å†äººå‘˜å‘ç”Ÿå˜æ›´ä¹‹åè¿›è¡Œå¯†ç å˜æ›´ï¼š\n1$ fastlane match change_password é‡æ–°ç”Ÿæˆ æ…ç”¨ï¼šmatch æä¾›ä¸€ä¸ªå‘½ä»¤å…è®¸æŠŠå½“å‰çš„è¯ä¹¦æ’¤é”€åå¹¶å…¨æ–°çš„é‡æ–°ç”Ÿæˆä¸€ä»½ï¼Œè¿™ä¸ªäº‹é¡¹æ˜¯ä¼šæŠŠè¯ä¹¦å’Œ Profiles å…¨éƒ¨åŒ…å«åœ¨å†…ï¼Œå¦‚æœå•çº¯çš„æƒ³åªé‡è®¾ Profles å¹¶åŒæ­¥æ˜¯ä¸æ”¯æŒçš„ã€‚æˆ‘æƒ³è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆè¯¥å‘½åå«åš nuke\næˆ‘è¿™é‡Œå¯ç»™å¤§å®¶æä¾›ä¸€ç§åªåŒæ­¥ profile çš„æ–¹æ³•ï¼šé¦–å…ˆåœ¨ git ä»“åº“ä¸­æ‰¾åˆ°ä½ è¦é‡è®¾çš„ profile æ–‡ä»¶ï¼Œå¹¶æŠŠå®ƒä»ä»“åº“ä¸­åˆ é™¤æäº¤ï¼Œç„¶ååœ¨æ‰§è¡Œè¯¥ç±»å‹çš„å‘½ä»¤å³å¯ï¼Œå‘½ä»¤å‘ç°æ²¡æœ‰ profile ä¼šè‡ªåŠ¨å†ç”Ÿæˆä¸€ä¸ª profile å¹¶ä¸‹è½½åŒæ­¥è‡³ git ä»“åº“ã€‚\nèµ„æ–™å‚è€ƒ http://macoscope.com/blog/simplify-your-life-with-fastlane-match/ https://github.com/fastlane/fastlane/issues/2007 ","wordCount":"1784","inLanguage":"zh","datePublished":"2017-03-28T20:12:07+08:00","dateModified":"2017-03-28T20:12:07+08:00","author":{"@type":"Person","name":"icyleaf"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://icyleaf.com/2017/03/fastlane-match-in-action/"},"publisher":{"@type":"Organization","name":"icyleaf","logo":{"@type":"ImageObject","url":"https://icyleaf.com/favicon.ico"}}}</script></head><body><div class=wrapper><nav class=navbar><progress class=content_progress max=0 value=0></progress><div class=container><div class="navbar-header header-logo"><a href=https://icyleaf.com/>icyleaf</a></div><div class=navbar-right><span class=menu><a class=menu-item href=https://icyleaf.com/about title>About</a>
<a class=menu-item href=https://icyleaf.com/projects title>Projects</a>
<a class=menu-item href=https://icyleaf.com/index.xml title>Feed</a>
<span class=divide></span>
<a href=javascript:void(0); class=theme-switch><i class="iconfont icon-dark-mode"></i></a></span></div></div></nav><nav class=navbar-mobile id=nav-mobile style=display:none><progress class=content_progress max=0 value=0></progress><div class=container><div class=navbar><div class="navbar-header header-logo"><a href=https://icyleaf.com/>icyleaf</a></div><div class=navbar-right><div><a href=javascript:void(0); class=theme-switch><i class="iconfont icon-dark-mode"></i></a></div><div class=menu-toggle><span></span><span></span><span></span></div></div></div><div class=menu id=mobile-menu><nav class=mb-md><a class=menu-item href=https://icyleaf.com/about title><h3>About</h3><div class=menu-active></div></a><a class=menu-item href=https://icyleaf.com/projects title><h3>Projects</h3><div class=menu-active></div></a><a class=menu-item href=https://icyleaf.com/index.xml title><h3>Feed</h3><div class=menu-active></div></a></nav></div></div></nav><main class=main><div class=post-cover><img src=https://icyleaf.com/uploads/2017/03/28/match.png loading=lazy></div><div class=container><article class=post-warp itemscope itemtype=http://schema.org/Article><header class=post-header><h1 class=post-title itemprop=description>ä½ è™æˆ‘åƒç™¾éï¼Œæˆ‘å¾…ä½ å¦‚åˆæ‹ï¼Œç›´åˆ°æˆ‘é‡åˆ° match</h1><div class=post-description>ç³»åˆ—æ–‡ç« çš„ç¬¬ä¸‰ç¯‡ï¼Œæ•™ä½ å¦‚ä½•ä½¿ç”¨ match ç®¡ç†åè¯éƒ½åˆ†ä¸æ¸…çš„è‹¹æœå„è‡ªå¼€å‘è€…è¯ä¹¦</div><div class=post-meta><time datetime=2017-03-28 itemprop=datePublished>2017-03-28</time>
Â·
<span class=tags>iOS, Android, CI, CD, Ruby, Fastlane, match</span>
Â·
<span class=post-word-count>1784 words Â· 8 minutes</span></div></header><div class=post-toc id=post-toc><h2 class=post-toc-title>ç›®å½•</h2><div class="post-toc-content always-active"><nav id=TableOfContents><ul><li><a href=#å‰è¨€>å‰è¨€</a></li><li><a href=#åŠŸèƒ½ç‰¹æ€§>åŠŸèƒ½ç‰¹æ€§</a></li><li><a href=#åŸç†>åŸç†</a></li><li><a href=#ä½¿ç”¨>ä½¿ç”¨</a></li><li><a href=#ç”Ÿæˆå’ŒåŒæ­¥è¯ä¹¦>ç”Ÿæˆå’ŒåŒæ­¥è¯ä¹¦</a></li><li><a href=#ä¿®æ”¹å¯†é’¥>ä¿®æ”¹å¯†é’¥</a></li><li><a href=#é‡æ–°ç”Ÿæˆ>é‡æ–°ç”Ÿæˆ</a></li><li><a href=#èµ„æ–™å‚è€ƒ>èµ„æ–™å‚è€ƒ</a></li></ul></nav></div></div><div class=post-content><div class=post-series><h4 class=series-title><a href=https://icyleaf.com/series/fastlane/>fastlaneï¼ˆ3 ç¯‡ï¼‰</a></h4><ol class=series-list><li class=series-item><a href=https://icyleaf.com/2016/07/intro-fastlane-automation-for-ios-and-android/>Fastlane - iOS å’Œ Android çš„è‡ªåŠ¨åŒ–æ„å»ºå·¥å…·</a></li><li class=series-item><a href=https://icyleaf.com/2016/07/fastlane-in-action/>æ·±å…¥æµ…å‡º Fastlane ä¸€çœ‹ä½ å°±æ‡‚</a></li><li class=series-item><span class=current-serie>ä½ è™æˆ‘åƒç™¾éï¼Œæˆ‘å¾…ä½ å¦‚åˆæ‹ï¼Œç›´åˆ°æˆ‘é‡åˆ° match</span></li></ol></div><div id=post-gallery><h2 id=å‰è¨€>å‰è¨€</h2><p>é€šè¿‡å‰ä¸¤ç¯‡çš„æ–‡ç« å¤§å®¶å·²ç»å¯¹ fastlane çš„æ¦‚å¿µå’ŒåŸºæœ¬ä½¿ç”¨å·²ç»æœ‰äº†åˆæ­¥çš„æŒæ¡ï¼Œåœ¨ç¬¬äºŒç¯‡ä¸­ä¹Ÿæœ‰æåˆ° fastlane å®ç°çš„å„ç§åŠŸèƒ½å…¶å®éƒ½æ˜¯åŸºäºç‹¬ç«‹å°è£…è®¾è®¡çš„å„ä¸ªå·¥å…·å®ç°ã€‚å®ƒä»¬å³å¯ä»¥å•ç‹¬æˆä¸ºä¸€ä¸ªä½“ç³»åŒæ—¶ä¹Ÿä¼šè¢«å¸çº³åˆ° fastlane çš„ action ç³»ç»Ÿä¹‹ä¸­ã€‚<code>match</code> æ˜¯åœ¨ iOS å¼€å‘å’ŒæŒç»­æµ‹è¯•å’Œæ„å»ºä¸­æœ€é‡ä¸­ä¹‹é‡çš„ç¯èŠ‚ï¼Œå®ƒç»´æŠ¤å’Œç®¡ç†ç€ iOS çš„å„ç§è¯ä¹¦å’Œ profile çš„åˆ›å»ºã€æ›´æ–°å·¥ä½œã€‚æƒ³å¿…å¾ˆå¤šç”¨æˆ·å¬åˆ° iOS è¯ä¹¦å’Œ profile éƒ½ä¼šå¤´å¤§è„‘æ¶¨ï¼Œæ¨ä¸å¾—è¦æ‰‹æ’•é¬¼å­çš„æŠ€èƒ½ç‚¹æ¥å¯¹ä»˜ä»–ä»¬ï¼ˆå¦‚å›¾ï¼‰</p><p><img loading=lazy src=https://codesigning.guide/assets/img/cs-the-problem.png alt=code-signing-problem></img></p><p>ä¸Šå›¾æ¥æºäºä½œè€…ä¸“é—¨æ•´ç†çš„ç½‘ç«™ <a href=https://codesigning.guide/>https://codesigning.guide/</a>ï¼Œå¯¹äº iOS App ç­¾ååŸç†æ„Ÿå…´è¶£çš„å¯ä»¥å‚è§ JSPatch ä½œè€…çš„åˆ†æï¼šhttp://blog.cnbang.net/tech/3386/</p><h2 id=åŠŸèƒ½ç‰¹æ€§>åŠŸèƒ½ç‰¹æ€§</h2><ol><li>ä¸»åŠ¨/è¢«åŠ¨åˆ›å»ºã€æ›´æ–°ã€Xcode æ‰€éœ€çš„å„ç§è¯ä¹¦å’Œæ‰“åŒ…æ‰€éœ€çš„ Profiles</li><li>æ‰˜ç®¡ Xcode æ‰€éœ€çš„å„ç§è¯ä¹¦å’Œæ‰“åŒ…æ‰€éœ€çš„ Profiles</li><li>ç»Ÿä¸€å¹¶å…±äº«å›¢é˜Ÿæˆå‘˜ç»Ÿä¸€ä½¿ç”¨</li><li>è¯ä¹¦å…·æœ‰å¯†ç åŠ å¯†ä¿æŠ¤ï¼ˆopensslï¼‰</li><li>æ”¯æŒå¤šå›¢é˜Ÿï¼ˆè´¦æˆ·ï¼‰</li><li>æ”¯æŒå• App å¤š Target(identifier)</li><li>å†…æµ‹æ”¯æŒä¼ä¸šè´¦æˆ·ï¼ˆv0.11.0 è¿˜åœ¨æµ‹è¯•å¯ç”¨ï¼Œå¹¶æ²¡æœ‰æ­£å¼æ”¯æŒï¼‰</li></ol><h2 id=åŸç†>åŸç†</h2><p>match å…¶å®æ˜¯åœ¨ fastlane åŸºç¡€åŒ… certã€signã€spaceshipã€credentials_manager ä¹‹ä¸ŠæŠŠ iOS å¼€å‘è€…è¯ä¹¦æµç¨‹åŒ–çš„å·¥å…·ã€‚ä¸ºäº†å®ç°å›¢é˜Ÿå†…å…±äº«é¡¹ç›®çš„å¼€å‘è€…è¯ä¹¦ï¼Œå®ƒä½¿ç”¨ git ä»“åº“å¯¹è¯ä¹¦è¿›è¡Œæ‰˜ç®¡ï¼Œé¦–å…ˆéœ€è¦è¿›è¡Œåˆå§‹åŒ–ï¼Œé…ç½® git ä»“åº“ã€é¡¹ç›®çš„ iDP ä¿¡æ¯ä¹‹åï¼Œä¸‹è½½ Developmentã€AppStoreã€AdHoc çš„å¼€å‘è€…è¯ä¹¦å’Œé¡¹ç›®çš„ Profile filesï¼Œå¹¶é€šè¿‡ openssl çš„æ–¹å¼è¿›è¡Œå®‰å…¨åŠ å¯†åæäº¤å¹¶æ¨é€åˆ° git ä»“åº“ï¼Œå…¶ä»–æˆå‘˜ï¼ˆæˆ–è‡ªåŠ¨åŒ–æ„å»ºç³»ç»Ÿï¼‰ä½¿ç”¨æ—¶éœ€è¦è¾“å…¥å¯†é’¥åæ‰èƒ½æŠŠè¯ä¹¦è§£å¯†å¹¶å¯¼å…¥åˆ° keychain å’Œ Profiles ç›®å½•ã€‚</p><p>å¦‚æœå¯¹äºè¯ä¹¦åŠ å¯†ç­–ç•¥æ„Ÿå…´è¶£çš„å¯ä»¥åœ¨æœ¬æ–‡åº•éƒ¨èµ„æ–™å‚è€ƒçš„ç¬¬ä¸€ä¸ªé“¾æ¥æŸ¥çœ‹è¯¦æƒ…ã€‚</p><h2 id=ä½¿ç”¨>ä½¿ç”¨</h2><blockquote><p>æœ€æ–° fastlane å·²ç»åŒ…å«äº†æ‰€æœ‰çš„å­æ¨¡å—ï¼Œç‹¬ç«‹çš„ match ä¸åœ¨æ›´æ–°ï¼Œè¯·ç›´æ¥å®‰è£… fastlaneï¼Œä½¿ç”¨ fastlane match ä»£æ›¿ match å‘½ä»¤ã€‚</p></blockquote><p>å®‰è£…å°±å¾ˆç®€å•é€šè¿‡ <code>gem install fastlane</code> ä¼šæŠŠå®ƒçš„å…¨å®¶æ¡¶ä¸€å¹¶ä¸‹è½½å®‰è£…ï¼Œé¦–å…ˆå¯ä»¥çœ‹ä¸‹å¸®åŠ©ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln> 1</span><span class=cl>$ fastlane match --help
</span></span><span class=line><span class=ln> 2</span><span class=cl>
</span></span><span class=line><span class=ln> 3</span><span class=cl>  match
</span></span><span class=line><span class=ln> 4</span><span class=cl>
</span></span><span class=line><span class=ln> 5</span><span class=cl>  Easily sync your certificates and profiles across your team using git
</span></span><span class=line><span class=ln> 6</span><span class=cl>
</span></span><span class=line><span class=ln> 7</span><span class=cl>  Commands:
</span></span><span class=line><span class=ln> 8</span><span class=cl>    adhoc             Run match <span class=k>for</span> a adhoc provisioning profile
</span></span><span class=line><span class=ln> 9</span><span class=cl>    appstore          Run match <span class=k>for</span> a appstore provisioning profile
</span></span><span class=line><span class=ln>10</span><span class=cl>    change_password   Re-encrypt all files with a different password
</span></span><span class=line><span class=ln>11</span><span class=cl>    decrypt           Decrypts the repository and keeps it on the filesystem
</span></span><span class=line><span class=ln>12</span><span class=cl>    development       Run match <span class=k>for</span> a development provisioning profile
</span></span><span class=line><span class=ln>13</span><span class=cl>    <span class=nb>help</span>              Display global or <span class=o>[</span>command<span class=o>]</span> <span class=nb>help</span> documentation
</span></span><span class=line><span class=ln>14</span><span class=cl>    init              Create the Matchfile <span class=k>for</span> you
</span></span><span class=line><span class=ln>15</span><span class=cl>    nuke              Delete all certificates and provisioning profiles from the Apple Dev Portal
</span></span><span class=line><span class=ln>16</span><span class=cl>    nuke development  Delete all certificates and provisioning profiles from the Apple Dev Portal of the <span class=nb>type</span> development
</span></span><span class=line><span class=ln>17</span><span class=cl>    nuke distribution Delete all certificates and provisioning profiles from the Apple Dev Portal of the <span class=nb>type</span> distribution
</span></span><span class=line><span class=ln>18</span><span class=cl>    run               Easily sync your certificates and profiles across your team using git
</span></span><span class=line><span class=ln>19</span><span class=cl>
</span></span><span class=line><span class=ln>20</span><span class=cl>  Global Options:
</span></span><span class=line><span class=ln>21</span><span class=cl>    --verbose
</span></span><span class=line><span class=ln>22</span><span class=cl>    -r, --git_url STRING URL to the git repo containing all the certificates <span class=o>(</span>MATCH_GIT_URL<span class=o>)</span>
</span></span><span class=line><span class=ln>23</span><span class=cl>    --git_branch STRING  Specific git branch to use <span class=o>(</span>MATCH_GIT_BRANCH<span class=o>)</span>
</span></span><span class=line><span class=ln>24</span><span class=cl>    -y, --type STRING    Create a development certificate instead of a distribution one <span class=o>(</span>MATCH_TYPE<span class=o>)</span>
</span></span><span class=line><span class=ln>25</span><span class=cl>    -a, --app_identifier <span class=o>[</span>VALUE<span class=o>]</span> The bundle identifier<span class=o>(</span>s<span class=o>)</span> of your app <span class=o>(</span>comma-separated<span class=o>)</span> <span class=o>(</span>MATCH_APP_IDENTIFIER<span class=o>)</span>
</span></span><span class=line><span class=ln>26</span><span class=cl>    -u, --username STRING Your Apple ID Username <span class=o>(</span>MATCH_USERNAME<span class=o>)</span>
</span></span><span class=line><span class=ln>27</span><span class=cl>    -s, --keychain_name STRING Keychain the items should be imported to <span class=o>(</span>MATCH_KEYCHAIN_NAME<span class=o>)</span>
</span></span><span class=line><span class=ln>28</span><span class=cl>    -p, --keychain_password STRING This might be required the first <span class=nb>time</span> you access certificates on a new mac. For the login/default keychain this is your account password <span class=o>(</span>MATCH_KEYCHAIN_PASSWORD<span class=o>)</span>
</span></span><span class=line><span class=ln>29</span><span class=cl>    --readonly <span class=o>[</span>VALUE<span class=o>]</span>   Only fetch existing certificates and profiles, don<span class=s1>&#39;t generate new ones (MATCH_READONLY)
</span></span></span><span class=line><span class=ln>30</span><span class=cl><span class=s1>    -b, --team_id STRING The ID of your Developer Portal team if you&#39;</span>re in multiple teams <span class=o>(</span>FASTLANE_TEAM_ID<span class=o>)</span>
</span></span><span class=line><span class=ln>31</span><span class=cl>    -l, --team_name STRING The name of your Developer Portal team <span class=k>if</span> you<span class=err>&#39;</span>re in multiple teams <span class=o>(</span>FASTLANE_TEAM_NAME<span class=o>)</span>
</span></span><span class=line><span class=ln>32</span><span class=cl>    --verbose <span class=o>[</span>VALUE<span class=o>]</span>    Print out extra information and all commands <span class=o>(</span>MATCH_VERBOSE<span class=o>)</span>
</span></span><span class=line><span class=ln>33</span><span class=cl>    --force <span class=o>[</span>VALUE<span class=o>]</span>      Renew the provisioning profiles every <span class=nb>time</span> you run match <span class=o>(</span>MATCH_FORCE<span class=o>)</span>
</span></span><span class=line><span class=ln>34</span><span class=cl>    --skip_confirmation <span class=o>[</span>VALUE<span class=o>]</span> Disables confirmation prompts during nuke, answering them with yes <span class=o>(</span>MATCH_SKIP_CONFIRMATION<span class=o>)</span>
</span></span><span class=line><span class=ln>35</span><span class=cl>    --shallow_clone <span class=o>[</span>VALUE<span class=o>]</span> Make a shallow clone of the repository <span class=o>(</span>truncate the <span class=nb>history</span> to <span class=m>1</span> revision<span class=o>)</span> <span class=o>(</span>MATCH_SHALLOW_CLONE<span class=o>)</span>
</span></span><span class=line><span class=ln>36</span><span class=cl>    --force_for_new_devices <span class=o>[</span>VALUE<span class=o>]</span> Renew the provisioning profiles <span class=k>if</span> the device count on the developer portal has changed <span class=o>(</span>MATCH_FORCE_FOR_NEW_DEVICES<span class=o>)</span>
</span></span><span class=line><span class=ln>37</span><span class=cl>    --skip_docs <span class=o>[</span>VALUE<span class=o>]</span>  Skip generation of a README.md <span class=k>for</span> the created git repository <span class=o>(</span>MATCH_SKIP_DOCS<span class=o>)</span>
</span></span><span class=line><span class=ln>38</span><span class=cl>    -h, --help           Display <span class=nb>help</span> documentation
</span></span><span class=line><span class=ln>39</span><span class=cl>    -v, --version        Display version information
</span></span></code></pre></div><p>å»ºè®®å¤§å®¶åœ¨é¡¹ç›®ä¸­åˆ›å»ºå¹¶é…ç½® <code>fastlane/Matchfile</code> æ–‡ä»¶å¯ä»¥æŠŠå‘½ä»¤éœ€è¦çš„å‚æ•°çœç•¥ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>$ fastlane match init
</span></span></code></pre></div><p>è®¾ç½®å¥½ git_url(git ä»“åº“åœ°å€ï¼‰ã€typeï¼ˆé»˜è®¤åŒæ­¥è¯ä¹¦ç±»å‹ï¼‰ã€app_identifierã€usernameï¼ˆiDP çš„è´¦æˆ·åï¼‰å³å¯ã€‚</p><h2 id=ç”Ÿæˆå’ŒåŒæ­¥è¯ä¹¦>ç”Ÿæˆå’ŒåŒæ­¥è¯ä¹¦</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl><span class=c1># å¼€å‘ç¯å¢ƒè¯ä¹¦</span>
</span></span><span class=line><span class=ln>2</span><span class=cl>$ fastlane match development
</span></span><span class=line><span class=ln>3</span><span class=cl><span class=c1># äº§å“ç¯å¢ƒè¯ä¹¦</span>
</span></span><span class=line><span class=ln>4</span><span class=cl>$ fastlane match appstore
</span></span><span class=line><span class=ln>5</span><span class=cl><span class=c1># å†…æµ‹ç¯å¢ƒè¯ä¹¦</span>
</span></span><span class=line><span class=ln>6</span><span class=cl>$ fastlane match adhoc
</span></span></code></pre></div><p>åˆæ¬¡ä½¿ç”¨çš„æ—¶å€™ä¼šæç¤ºéœ€è¦è¾“å…¥ iDP çš„è´¦æˆ·å¯†ç ï¼Œæ ¡éªŒæˆåŠŸåå¯ä»¥ä¿å­˜åˆ° keychain ä¸­åç»­å¯ä»¥ä¸åœ¨é‡å¤è¾“å…¥ï¼ˆå¥½è´´å¿ƒï¼‰å¯†ç ï¼ˆä¹Ÿå¯é€šè¿‡è®¾ç½®å˜é‡ FASTLANE_PASSWORDï¼‰ï¼Œè¯¥å¯†ç å°±æ˜¯ä¸Šé¢æåˆ°çš„è¯ä¹¦åŠ å¯†çš„å¯†é’¥ï¼Œè¯·å¦¥å–„ä¿å­˜ã€‚</p><blockquote><p>æç¤ºï¼šå¦‚æœæ‹…å¿ƒå¯†ç æ³„éœ²å¯è®¾ç½® FASTLANE_DONT_STORE_PASSWORD = true ä¸è¿›è¡Œå¯†ç ä¿å­˜è‡³ keychainï¼Œåœ¨ keychain å¯é€šè¿‡å…³é”®è¯ &ldquo;deliver.&rdquo; æ£€ç´¢ã€‚</p></blockquote><p>æœ‰çš„ç«¥é‹è¯´æˆ‘ä»¬æœ‰ 299 çš„ä¼ä¸šè¯ä¹¦ï¼Œä¸ºä»€ä¹ˆä¸åšæ”¯æŒå‘¢ï¼Ÿèµ·åˆä½œè€…å¹¶æ²¡æœ‰æ‰“ç®—è¿›è¡Œæ”¯æŒæ˜¯æ‹…å¿ƒæ»¥ç”¨ä»¥åŠä»£ç ç»“æ„éœ€è¦è¾ƒå¤§çš„å˜æ›´ï¼Œéšç€å¼€å‘è€…å‘¼å£°å¤ªé«˜ï¼Œå…¶å®è¿˜æ˜¯åšäº†æ”¯æŒï¼Œåªä¸è¿‡å¹¶æ²¡æœ‰æ­£å¼çš„çº³å…¥ï¼Œéœ€è¦é€šè¿‡é…ç½®ç¯å¢ƒå˜é‡æ”¯æŒï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl><span class=c1># ä¼ä¸šç¯å¢ƒè¯ä¹¦</span>
</span></span><span class=line><span class=ln>2</span><span class=cl>$ ENV<span class=o>[</span><span class=s1>&#39;MATCH_FORCE_ENTERPRISE&#39;</span><span class=o>]</span> <span class=o>=</span> <span class=s1>&#39;1&#39;</span> <span class=o>&amp;&amp;</span> fastlane match enterprise
</span></span></code></pre></div><h2 id=ä¿®æ”¹å¯†é’¥>ä¿®æ”¹å¯†é’¥</h2><p>å»ºè®®å¯†ç å®šæœŸæ›´æ¢æˆ–å†äººå‘˜å‘ç”Ÿå˜æ›´ä¹‹åè¿›è¡Œå¯†ç å˜æ›´ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>$ fastlane match change_password
</span></span></code></pre></div><h2 id=é‡æ–°ç”Ÿæˆ>é‡æ–°ç”Ÿæˆ</h2><p><strong>æ…ç”¨</strong>ï¼šmatch æä¾›ä¸€ä¸ªå‘½ä»¤å…è®¸æŠŠå½“å‰çš„è¯ä¹¦æ’¤é”€åå¹¶å…¨æ–°çš„é‡æ–°ç”Ÿæˆä¸€ä»½ï¼Œè¿™ä¸ªäº‹é¡¹æ˜¯ä¼šæŠŠè¯ä¹¦å’Œ Profiles å…¨éƒ¨åŒ…å«åœ¨å†…ï¼Œå¦‚æœå•çº¯çš„æƒ³åªé‡è®¾ Profles å¹¶åŒæ­¥æ˜¯ä¸æ”¯æŒçš„ã€‚æˆ‘æƒ³è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆè¯¥å‘½åå«åš <code>nuke</code></p><p>æˆ‘è¿™é‡Œå¯ç»™å¤§å®¶æä¾›ä¸€ç§åªåŒæ­¥ profile çš„æ–¹æ³•ï¼šé¦–å…ˆåœ¨ git ä»“åº“ä¸­æ‰¾åˆ°ä½ è¦é‡è®¾çš„ profile æ–‡ä»¶ï¼Œå¹¶æŠŠå®ƒä»ä»“åº“ä¸­åˆ é™¤æäº¤ï¼Œç„¶ååœ¨æ‰§è¡Œè¯¥ç±»å‹çš„å‘½ä»¤å³å¯ï¼Œå‘½ä»¤å‘ç°æ²¡æœ‰ profile ä¼šè‡ªåŠ¨å†ç”Ÿæˆä¸€ä¸ª profile å¹¶ä¸‹è½½åŒæ­¥è‡³ git ä»“åº“ã€‚</p><h2 id=èµ„æ–™å‚è€ƒ>èµ„æ–™å‚è€ƒ</h2><ul><li><a href=http://macoscope.com/blog/simplify-your-life-with-fastlane-match/>http://macoscope.com/blog/simplify-your-life-with-fastlane-match/</a></li><li><a href=https://github.com/fastlane/fastlane/issues/2007>https://github.com/fastlane/fastlane/issues/2007</a></li></ul></div></div><div class=post-nav><a href=https://icyleaf.com/2017/03/how-to-get-temporary-car-license-in-beijing/ class=prev rel=prev title=åŒ—äº¬ä¸Šä¸´æ—¶ç‰Œç…§æµç¨‹><i class="iconfont icon-left"></i>&nbsp;åŒ—äº¬ä¸Šä¸´æ—¶ç‰Œç…§æµç¨‹</a>
<a href=https://icyleaf.com/2017/04/sidekiq-works-in-ruby-togethor-with-crystal/ class=next rel=next title="æ‰“é€š Sidekiq çš„ä»»ç£äºŒè„‰ Ruby å’Œ Crystal">æ‰“é€š Sidekiq çš„ä»»ç£äºŒè„‰ Ruby å’Œ Crystal&nbsp;<i class="iconfont icon-right"></i></a></div><div class=post-comment><script src=https://giscus.app/client.js data-repo=icyleaf/icyleaf.com data-repo-id="MDEwOlJlcG9zaXRvcnk1NDg4MDA5Mg==" data-category=Announcements data-category-id=DIC_kwDOA0VnXM4CQ0mH data-mapping=title data-strict=0 data-reactions-enabled="MDEwOlJlcG9zaXRvcnk1NDg4MDA5Mg==" data-emit-metadata=0 data-input-position=top data-theme=preferred_color_scheme data-lang=zh-CN data-loading=lazy crossorigin=anonymous async></script></div></article></div></main><footer class=footer><div class=copyright>&copy;
<span itemprop=copyrightYear>2005 - 2022</span>
<span>ğŸº</span>
<span class=author itemprop=copyrightHolder><a href=https://icyleaf.com/>icyleaf</a></span></div></footer><script defer src=https://fastly.jsdelivr.net/npm/jquery@3.6.1/dist/jquery.min.js crossorigin=anonymous></script>
<script defer src=https://icyleaf.com/js/vendor_main.min.js></script>
<script type=module>
  
  import PhotoSwipeLightbox from '\/photoswipe\/photoswipe-lightbox.esm.js';

  const lightbox = new PhotoSwipeLightbox({
    gallery: '#post-gallery',
    children: 'a.gallery-item',
    pswpModule: () => import('\/photoswipe\/photoswipe.esm.js'),
  });
  lightbox.init();
</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-TKQBZ7R259"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-TKQBZ7R259")</script></div></body></html>