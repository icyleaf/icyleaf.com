<!doctype html><html lang=zh-cn></html><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>让吃灰的兄弟打印机焕发新生：无线打印 | icyleaf</title>
<meta name=keywords content="Linux,Printer"><meta name=description content="传统 USB 设备 DCP-7040 打印机实现无线打印以及苹果设备的 AirPrint 隔空打印"><meta name=author content="icyleaf"><link rel=canonical href=https://icyleaf.com/2024/10/setup-legacy-brother-laser-became-to-a-wireless-airprint/><link rel=apple-touch-icon href=https://icyleaf.com/apple-touch-icon.png><link rel=icon href=https://icyleaf.com/favicon.ico><link rel=icon type=image/png sizes=32x32 href=https://icyleaf.com/favicon-32x32.png><link rel=icon type=image/png sizes=192x192 href=https://icyleaf.com/android-chrome-192x192.png><link rel=icon type=image/png sizes=512x512 href=https://icyleaf.com/android-chrome-512x512.png><link rel=icon type=image/svg+xml href=https://icyleaf.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=stylesheet href=https://icyleaf.com/css/main.min.css><link rel=stylesheet href=https://icyleaf.com/font/iconfont.min.css><link rel=stylesheet href=https://icyleaf.com/font-ali/iconfont.min.css><link rel=stylesheet href=https://icyleaf.com/photoswipe/photoswipe.min.css><link rel=alternate hreflang=zh-cn href=https://icyleaf.com/2024/10/setup-legacy-brother-laser-became-to-a-wireless-airprint/><link rel=canonical href=https://icyleaf.com/2024/10/setup-legacy-brother-laser-became-to-a-wireless-airprint/><meta property="og:title" content="让吃灰的兄弟打印机焕发新生：无线打印"><meta property="og:description" content="传统 USB 设备 DCP-7040 打印机实现无线打印以及苹果设备的 AirPrint 隔空打印"><meta property="og:type" content="article"><meta property="og:url" content="https://icyleaf.com/2024/10/setup-legacy-brother-laser-became-to-a-wireless-airprint/"><meta property="og:image" content="https://images.unsplash.com/photo-1674644653898-5edf4ac87c52?q=80&amp;w=4928&amp;auto=format&amp;fit=crop&amp;ixlib=rb-4.0.3&amp;ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-10-16T23:52:52+08:00"><meta property="article:modified_time" content="2024-10-16T23:52:52+08:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://images.unsplash.com/photo-1674644653898-5edf4ac87c52?q=80&amp;w=4928&amp;auto=format&amp;fit=crop&amp;ixlib=rb-4.0.3&amp;ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"><meta name=twitter:title content="让吃灰的兄弟打印机焕发新生：无线打印"><meta name=twitter:description content="传统 USB 设备 DCP-7040 打印机实现无线打印以及苹果设备的 AirPrint 隔空打印"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://icyleaf.com/posts/"},{"@type":"ListItem","position":2,"name":"让吃灰的兄弟打印机焕发新生：无线打印","item":"https://icyleaf.com/2024/10/setup-legacy-brother-laser-became-to-a-wireless-airprint/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"让吃灰的兄弟打印机焕发新生：无线打印","name":"让吃灰的兄弟打印机焕发新生：无线打印","description":"传统 USB 设备 DCP-7040 打印机实现无线打印以及苹果设备的 AirPrint 隔空打印","keywords":["Linux","Printer"],"articleBody":"起因 从老丈人家拿回来一台已经吃灰的兄弟激光 DCP-7040 一体机. 在 Windows 系统上测试仍然可以正常工作，本来想把它接到 Openwrt 路由器的网络打印机插件上实现无线打印，但我的路由器在弱电箱里面放着周围也没有合适可以摆放的位置，我就把它连用 USB 到了一台 Ubuntu Server 服务器上，计划用 CUPS 实现同样的效果。\n这台打印机官方驱动虽然提供 Windows、macOS 甚至还有 Linux，在我安装驱动才注意到官方提供的只有 32 位，想要支持 64 位则需要额外安装兼容库（不安装的话能提交打印请求但不会执行打印任务），本想着能凑合用的心态搞了一圈下来，在 CUPS Web 控制面板测试打印页是可以执行命令，但 macOS 无论使用通用驱动还是官方驱动要么不执行打印，要么只会打印出 12345X@PJL 这样的一行字，只有 Windows 没问题，头疼了好久。\n解决方案 在接近绝望时看到了 brlaser 这个项目，这是牛人开发激光打印机的开源驱动，支持绝大多数支持标准打印机协议（PCL/PostScript）的兄弟打印机机型：\nBrother DCP-1510 series Brother DCP-1600 series Brother DCP-7030 Brother DCP-7040 Brother DCP-7055 Brother DCP-7055W Brother DCP-7060D Brother DCP-7065DN Brother DCP-7080 Brother DCP-L2500D series Brother DCP-L2520D series Brother DCP-L2520DW series Brother DCP-L2540DW series Brother HL-1110 series Brother HL-1200 series Brother HL-2030 series Brother HL-2140 series Brother HL-2220 series Brother HL-2270DW series Brother HL-5030 series Brother HL-L2300D series Brother HL-L2320D series Brother HL-L2340D series Brother HL-L2360D series Brother HL-L2375DW series Brother HL-L2390DW Brother MFC-1910W Brother MFC-7240 Brother MFC-7360N Brother MFC-7365DN Brother MFC-7420 Brother MFC-7460DN Brother MFC-7840W Brother MFC-L2710DW series Lenovo M7605D 驱动也都发布到了主流的 Linux 系统中，比如 Debian、Ubuntu、Arch Linux、NixOS、树莓派的 Raspbian 和 openSUSE。在 Ubuntu Server 上安装 printer-driver-brlaser 后就可以在 CUPS Web 控制面板中选择这个驱动一路下一步搞定。\n配置 CUPS 配置前需要安装 CUPS 和驱动，顺便把管理员用户添加到 cups 用户组。\n1# 安装 2sudo apt install cups printer-driver-brlaser 3 4# 把用户 icyleaf 加入到 cups 管理组 5sudo usermod -aG lpadmin icyleaf 配置局域网内可以访问 CUPS 的 WEB 管理页面，编辑 /etc/cups/cupd.conf:\n1- Listen 127.0.0.1:631 2+ Listen 0.0.0.0:631 3 4# 限制局域网段 192.168.222.0/24 可访问 5 6 Order allow,deny 7+ Allow From 192.168.222.0/24 8 9 10 11 Order allow,deny 12+ Allow 192.168.222.0/24 13 配置打印机 使用服务器的 IP (比如是 192.168.222.100) https://192.168.222.100:631/admin 开始添加打印机，记得先打开打印机等待预热完毕。\n添加打印机时已经识别到，选择第二个进行下一步。\n记得勾选 Share This Printer 允许局域网其他设备可以连接到这台打印机。\n打印机的品牌已经正确识别，选择打印机对应的型号，看到 “Printer Brother_DCP-7040 has been added successfully.” 离成功就差最后一步。\n因为还要设置好纸张类型、DPI、纸张类型…一切都设置好可以在 Manage Printer 查看打印机信息和相关维护功能。\nAirPrint 隔空打印 尝试用 iPhone 隔空打印一张，能够顺利找到打印机。\n提交后能够在 CUPS 的任务队列查看详情信息。\n意犹未尽 CUPS 能够仅实现打印机的复制功能，刚好这台打印机找到了对应的驱动；还缺少无线扫描的功能正在探索中，据说可以使用 SANE 配合驱动，服务器是 Server 端没有桌面环境，有点头疼，容我再想想怎么解决。\n","wordCount":"1013","inLanguage":"zh-cn","image":"https://images.unsplash.com/photo-1674644653898-5edf4ac87c52?q=80\u0026w=4928\u0026auto=format\u0026fit=crop\u0026ixlib=rb-4.0.3\u0026ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D","datePublished":"2024-10-16T23:52:52+08:00","dateModified":"2024-10-16T23:52:52+08:00","author":{"@type":"Person","name":"icyleaf"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://icyleaf.com/2024/10/setup-legacy-brother-laser-became-to-a-wireless-airprint/"},"publisher":{"@type":"Organization","name":"icyleaf","logo":{"@type":"ImageObject","url":"https://icyleaf.com/favicon.ico"}}}</script></head><body><div class=wrapper><nav class=navbar><progress class=content_progress max=0 value=0></progress><div class=container><div class="navbar-header header-logo"><a href=https://icyleaf.com/>icyleaf</a></div><div class=navbar-right><span class=menu><a class=menu-item href=https://icyleaf.com/series/homelab title>homelab 系列
</a><a class=menu-item href=https://icyleaf.com/projects title>开源项目
</a><a class=menu-item href=https://icyleaf.com/gears title>我的设备
</a><a class=menu-item href=https://icyleaf.com/about title>关于
</a><span class=divide></span>
<a href=javascript:void(0); class=theme-switch><i class="iconfont icon-dark-mode"></i></a></span></div></div></nav><nav class=navbar-mobile id=nav-mobile style=display:none><progress class=content_progress max=0 value=0></progress><div class=container><div class=navbar><div class="navbar-header header-logo"><a href=https://icyleaf.com/>icyleaf</a></div><div class=navbar-right><div><a href=javascript:void(0); class=theme-switch><i class="iconfont icon-dark-mode"></i></a></div><div class=menu-toggle><span></span><span></span><span></span></div></div></div><div class=menu id=mobile-menu><nav class=mb-md><a class=menu-item href=https://icyleaf.com/series/homelab title><h3>homelab 系列</h3><div class=menu-active></div></a><a class=menu-item href=https://icyleaf.com/projects title><h3>开源项目</h3><div class=menu-active></div></a><a class=menu-item href=https://icyleaf.com/gears title><h3>我的设备</h3><div class=menu-active></div></a><a class=menu-item href=https://icyleaf.com/about title><h3>关于</h3><div class=menu-active></div></a></nav></div></div></nav><main class=main><div class=post-cover><img src="https://images.unsplash.com/photo-1674644653898-5edf4ac87c52?q=80&amp;w=4928&amp;auto=format&amp;fit=crop&amp;ixlib=rb-4.0.3&amp;ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" loading=lazy><p class=cover-author>Photo by
<a href=https://unsplash.com/@alaminip>Al Amin Mir
</a>/
<a href=https://unsplash.com>Unsplash</a></p></div><div class=container><article class=post-warp itemscope itemtype=http://schema.org/Article><header class=post-header><h1 class=post-title itemprop=description>让吃灰的兄弟打印机焕发新生：无线打印</h1><div class=post-description>传统 USB 设备 DCP-7040 打印机实现无线打印以及苹果设备的 AirPrint 隔空打印</div><div class=post-meta><time datetime=2024-10-16 itemprop=datePublished>2024-10-16</time>
·
<span class=tags>Linux, Printer</span>
·
<span class=post-word-count>1013 words · 4 minutes</span></div></header><div class=post-toc id=post-toc><h2 class=post-toc-title>目录</h2><div class="post-toc-content always-active"><nav id=TableOfContents><ul><li><a href=#起因>起因</a></li><li><a href=#解决方案>解决方案</a></li><li><a href=#配置-cups>配置 CUPS</a></li><li><a href=#配置打印机>配置打印机</a></li><li><a href=#airprint-隔空打印>AirPrint 隔空打印</a></li><li><a href=#意犹未尽>意犹未尽</a></li></ul></nav></div></div><div class=post-content><div id=post-gallery><h2 id=起因>起因</h2><p>从老丈人家拿回来一台已经吃灰的兄弟激光 <a href="https://support.brother.com/g/b/spec.aspx?c=as_ot&amp;lang=en&amp;prod=dcp7040_us_as">DCP-7040</a> 一体机. 在 Windows 系统上测试仍然可以正常工作，本来想把它接到 Openwrt 路由器的网络打印机插件上实现无线打印，但我的路由器在弱电箱里面放着周围也没有合适可以摆放的位置，我就把它连用 USB 到了一台 Ubuntu Server 服务器上，计划用 <a href=https://www.cups.org/>CUPS</a> 实现同样的效果。</p><p>这台打印机官方驱动虽然提供 Windows、macOS 甚至还有 Linux，在我安装驱动才注意到官方提供的只有 32 位，想要支持 64 位则需要<a href="https://support.brother.com/g/b/faqend.aspx?c=cn&amp;lang=zh&amp;prod=mfcj3930dw_eu_as_cn&amp;faqid=faq00100678_000">额外安装兼容库</a>（不安装的话能提交打印请求但不会执行打印任务），本想着能凑合用的心态搞了一圈下来，在 CUPS Web 控制面板测试打印页是可以执行命令，但 macOS 无论使用通用驱动还是官方驱动要么不执行打印，要么只会打印出 <code>12345X@PJL</code> 这样的一行字，只有 Windows 没问题，头疼了好久。</p><h2 id=解决方案>解决方案</h2><p>在接近绝望时看到了 <a href=https://github.com/pdewacht/brlaser/>brlaser</a> 这个项目，这是牛人开发激光打印机的开源驱动，支持绝大多数支持标准打印机协议（PCL/PostScript）的兄弟打印机机型：</p><ul><li>Brother DCP-1510 series</li><li>Brother DCP-1600 series</li><li>Brother DCP-7030</li><li>Brother DCP-7040</li><li>Brother DCP-7055</li><li>Brother DCP-7055W</li><li>Brother DCP-7060D</li><li>Brother DCP-7065DN</li><li>Brother DCP-7080</li><li>Brother DCP-L2500D series</li><li>Brother DCP-L2520D series</li><li>Brother DCP-L2520DW series</li><li>Brother DCP-L2540DW series</li><li>Brother HL-1110 series</li><li>Brother HL-1200 series</li><li>Brother HL-2030 series</li><li>Brother HL-2140 series</li><li>Brother HL-2220 series</li><li>Brother HL-2270DW series</li><li>Brother HL-5030 series</li><li>Brother HL-L2300D series</li><li>Brother HL-L2320D series</li><li>Brother HL-L2340D series</li><li>Brother HL-L2360D series</li><li>Brother HL-L2375DW series</li><li>Brother HL-L2390DW</li><li>Brother MFC-1910W</li><li>Brother MFC-7240</li><li>Brother MFC-7360N</li><li>Brother MFC-7365DN</li><li>Brother MFC-7420</li><li>Brother MFC-7460DN</li><li>Brother MFC-7840W</li><li>Brother MFC-L2710DW series</li><li>Lenovo M7605D</li></ul><p>驱动也都发布到了主流的 Linux 系统中，比如 Debian、Ubuntu、Arch Linux、NixOS、树莓派的 Raspbian 和 openSUSE。在 Ubuntu Server 上安装 <code>printer-driver-brlaser</code> 后就可以在 CUPS Web 控制面板中选择这个驱动一路下一步搞定。</p><h2 id=配置-cups>配置 CUPS</h2><p>配置前需要安装 CUPS 和驱动，顺便把管理员用户添加到 cups 用户组。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl><span class=c1># 安装</span>
</span></span><span class=line><span class=ln>2</span><span class=cl>sudo apt install cups printer-driver-brlaser
</span></span><span class=line><span class=ln>3</span><span class=cl>
</span></span><span class=line><span class=ln>4</span><span class=cl><span class=c1># 把用户 icyleaf 加入到 cups 管理组</span>
</span></span><span class=line><span class=ln>5</span><span class=cl>sudo usermod -aG lpadmin icyleaf
</span></span></code></pre></div><p>配置局域网内可以访问 CUPS 的 WEB 管理页面，编辑 <code>/etc/cups/cupd.conf</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-diff data-lang=diff><span class=line><span class=ln> 1</span><span class=cl><span class=gd>- Listen 127.0.0.1:631
</span></span></span><span class=line><span class=ln> 2</span><span class=cl><span class=gd></span><span class=gi>+ Listen 0.0.0.0:631
</span></span></span><span class=line><span class=ln> 3</span><span class=cl><span class=gi></span>
</span></span><span class=line><span class=ln> 4</span><span class=cl># 限制局域网段 192.168.222.0/24 可访问
</span></span><span class=line><span class=ln> 5</span><span class=cl>&lt;Location /&gt;
</span></span><span class=line><span class=ln> 6</span><span class=cl>  Order allow,deny
</span></span><span class=line><span class=ln> 7</span><span class=cl><span class=gi>+  Allow From 192.168.222.0/24
</span></span></span><span class=line><span class=ln> 8</span><span class=cl><span class=gi></span>&lt;/Location&gt;
</span></span><span class=line><span class=ln> 9</span><span class=cl>
</span></span><span class=line><span class=ln>10</span><span class=cl>&lt;Location /admin&gt;
</span></span><span class=line><span class=ln>11</span><span class=cl>  Order allow,deny
</span></span><span class=line><span class=ln>12</span><span class=cl><span class=gi>+  Allow 192.168.222.0/24
</span></span></span><span class=line><span class=ln>13</span><span class=cl><span class=gi></span>&lt;/Location&gt;
</span></span></code></pre></div><h2 id=配置打印机>配置打印机</h2><p>使用服务器的 IP (比如是 192.168.222.100) <code>https://192.168.222.100:631/admin</code> 开始添加打印机，记得先打开打印机等待预热完毕。</p><figure data-pswp=1201x726 data-size=800x><a href=https://icyleaf.com/uploads/2024/10/add-printer.png class=gallery-item target=_blank data-pswp-width=1201 data-pswp-height=726><img src=https://icyleaf.com/uploads/2024/10/add-printer_hu10132767163743862641.png></a></figure><p>添加打印机时已经识别到，选择第二个进行下一步。</p><figure data-pswp=1117x503 data-size=800x><a href=https://icyleaf.com/uploads/2024/10/set-printer-information.png class=gallery-item target=_blank data-pswp-width=1117 data-pswp-height=503><img src=https://icyleaf.com/uploads/2024/10/set-printer-information_hu16195519567328272891.png></a></figure><p>记得勾选 <code>Share This Printer</code> 允许局域网其他设备可以连接到这台打印机。</p><figure data-pswp=1212x775 data-size=800x><a href=https://icyleaf.com/uploads/2024/10/set-printer-driver.png class=gallery-item target=_blank data-pswp-width=1212 data-pswp-height=775><img src=https://icyleaf.com/uploads/2024/10/set-printer-driver_hu10128032967233664781.png></a></figure><p>打印机的品牌已经正确识别，选择打印机对应的型号，看到 &ldquo;Printer Brother_DCP-7040 has been added successfully.&rdquo; 离成功就差最后一步。</p><figure data-pswp=1257x746 data-size=800x><a href=https://icyleaf.com/uploads/2024/10/set-printer-metadata.png class=gallery-item target=_blank data-pswp-width=1257 data-pswp-height=746><img src=https://icyleaf.com/uploads/2024/10/set-printer-metadata_hu15088787595505913060.png></a></figure><p>因为还要设置好纸张类型、DPI、纸张类型&mldr;一切都设置好可以在 Manage Printer 查看打印机信息和相关维护功能。</p><figure data-pswp=1919x888 data-size=800x><a href=https://icyleaf.com/uploads/2024/10/brother-printer.png class=gallery-item target=_blank data-pswp-width=1919 data-pswp-height=888><img src=https://icyleaf.com/uploads/2024/10/brother-printer_hu379063551251061234.png></a></figure><h2 id=airprint-隔空打印>AirPrint 隔空打印</h2><p>尝试用 iPhone 隔空打印一张，能够顺利找到打印机。</p><figure data-pswp=600x1300 data-size=800x><a href=https://icyleaf.com/uploads/2024/10/iphone-airprint.png class=gallery-item target=_blank data-pswp-width=600 data-pswp-height=1300><img src=https://icyleaf.com/uploads/2024/10/iphone-airprint_hu10681743698282296490.png></a></figure><p>提交后能够在 CUPS 的任务队列查看详情信息。</p><figure data-pswp=2442x664 data-size=800x><a href=https://icyleaf.com/uploads/2024/10/printer-jobs.png class=gallery-item target=_blank data-pswp-width=2442 data-pswp-height=664><img src=https://icyleaf.com/uploads/2024/10/printer-jobs_hu16458583105410469404.png></a></figure><h2 id=意犹未尽>意犹未尽</h2><p>CUPS 能够仅实现打印机的复制功能，刚好这台打印机找到了对应的驱动；还缺少无线扫描的功能正在探索中，据说可以使用 <a href=http://www.sane-project.org/>SANE</a> 配合驱动，服务器是 Server 端没有桌面环境，有点头疼，容我再想想怎么解决。</p><div class=post-donate><p class=post-donate-title>如果你觉得我的文章对你有帮助，欢迎打赏，这对我非常重要，谢谢！</p><div class=post-donate-channel><img src=https://icyleaf.com/images/donate/alipay.png alt=支付宝打赏>
<img src=https://icyleaf.com/images/donate/wechat.png alt=微信打赏></div></div></div></div><div class=post-nav><a href=https://icyleaf.com/2023/08/using-vector-transform-mosdns-logging-to-grafana-via-loki/ class=prev rel=prev title="vector + loki 实现 mosdns 数据看板"><i class="iconfont icon-left"></i>&nbsp;vector + loki 实现 mosdns 数据看板</a></div><div class=post-comment><script>var getTheme=window.localStorage&&window.localStorage.getItem("blog-dark-mode"),getTheme=getTheme??"github-light";let theme=getTheme==="dark"?"github-dark":"github-light",s=document.createElement("script");s.src="https://utteranc.es/client.js",s.setAttribute("repo","icyleaf/icyleaf.com"),s.setAttribute("issue-term","pathname"),s.setAttribute("theme",theme),s.setAttribute("crossorigin","anonymous"),s.setAttribute("async",""),document.querySelector("div.post-comment").innerHTML="",document.querySelector("div.post-comment").appendChild(s)</script></div></article></div></main><footer class=footer><div class=copyright>&copy;
<span itemprop=copyrightYear>2005 - 2024</span>
<span>🍺</span>
<span class=author itemprop=copyrightHolder><a href=https://icyleaf.com/>icyleaf</a></span></div></footer><script defer src=https://fastly.jsdelivr.net/npm/jquery@3.6.4/dist/jquery.min.js crossorigin=anonymous></script><script defer src=https://icyleaf.com/js/vendor_main.min.js></script><script type=module>
  
  import PhotoSwipeLightbox from '\/photoswipe\/photoswipe-lightbox.esm.js';

  const lightbox = new PhotoSwipeLightbox({
    gallery: '#post-gallery',
    children: 'a.gallery-item',
    pswpModule: () => import('\/photoswipe\/photoswipe.esm.js'),
  });
  lightbox.init();
</script></div></body></html>