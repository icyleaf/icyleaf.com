<!doctype html><html lang=zh><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="chrome=1"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>ä½¿ç”¨ Git Hooks å®ç°è‡ªåŠ¨é¡¹ç›®éƒ¨ç½² | icyleaf</title><link rel=prev href=https://icyleaf.com/2012/03/pngcrush-usage-with-ios-apps/><link rel=next href=https://icyleaf.com/2012/04/automating-script-to-testflight-from-xcode/><link rel=canonical href=https://icyleaf.com/2012/03/apps-auto-deploy-with-git/><link rel=apple-touch-icon sizes=180x180 href=https://icyleaf.com/images/icyleaf-icon.png><link rel=icon type=image/png sizes=32x32 href=https://icyleaf.com/images/icyleaf-icon.png><link rel=icon type=image/png sizes=16x16 href=https://icyleaf.com/images/icyleaf-icon.png><link rel=stylesheet href=https://icyleaf.com/css/main.min.css><link rel=stylesheet href=https://icyleaf.com/font/iconfont.css><link rel=stylesheet href=https://icyleaf.com/font-ali/iconfont.css><meta name=title content="ä½¿ç”¨ Git Hooks å®ç°è‡ªåŠ¨é¡¹ç›®éƒ¨ç½² | icyleaf"><meta name=author content="icyleaf"><meta name=description content="æ—¥å¸¸å†™ä»£ç çƒ­çˆ±æˆ·å¤–çš„æ¢¦æƒ³å®¶"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/icyleaf.com\/"},"articleSection":"posts","name":"ä½¿ç”¨ Git Hooks å®ç°è‡ªåŠ¨é¡¹ç›®éƒ¨ç½²","headline":"ä½¿ç”¨ Git Hooks å®ç°è‡ªåŠ¨é¡¹ç›®éƒ¨ç½²","description":"æœ€è¿‘åœ¨æŸæœåŠ¡å™¨ä¸Šé¢æ­å»º git å¼€å‘å’Œéƒ¨ç½²ç¯å¢ƒï¼Œgit å¼€å‘ç¯å¢ƒå¾ˆç®€å•ï¼ŒæŒ‰ç…§ ProGit ä¸€ä¹¦çš„ç›¸å…³çŸ¥è¯†å°±å¯ä»¥è½»æ¾æå®šï¼Œå®ç°äº†ç±»ä¼¼ Github çš„ä½¿ç”¨ SSH \u002b ç§æœ‰ Clone çš„æ–¹å¼ã€‚ å…³äºéƒ¨","inLanguage":"zh","author":"icyleaf","creator":"icyleaf","publisher":"icyleaf","accountablePerson":"icyleaf","copyrightHolder":"icyleaf","copyrightYear":"2012","datePublished":"2012-03-14 12:34:56 \u002b0800 \u002b0800","dateModified":"2012-03-14 12:34:56 \u002b0800 \u002b0800","url":"https:\/\/icyleaf.com\/2012\/03\/apps-auto-deploy-with-git\/","wordCount":"763","keywords":["Git","icyleaf"]}</script></head><body><div class=wrapper><nav class=navbar><progress class=content_progress max=0 value=0></progress><div class=container><div class="navbar-header header-logo"><a href=https://icyleaf.com/>icyleaf</a></div><div class=navbar-right><span class=menu><a class=menu-item href=https://icyleaf.com/posts title>Posts</a>
<a class=menu-item href=https://icyleaf.com/about title>About</a>
<span class=divide></span><a href=javascript:void(0); class=theme-switch><i class="iconfont icon-dark-mode"></i></a></span></div></div></nav><nav class=navbar-mobile id=nav-mobile style=display:none><progress class=content_progress max=0 value=0></progress><div class=container><div class=navbar><div class="navbar-header header-logo"><a href=https://icyleaf.com/>icyleaf</a></div><div class=navbar-right><div><a href=javascript:void(0); class=theme-switch><i class="iconfont icon-dark-mode"></i></a></div><div class=menu-toggle><span></span><span></span><span></span></div></div></div><div class=menu id=mobile-menu><nav class=mb-md><a class=menu-item href=https://icyleaf.com/posts title><h3>Posts</h3><div class=menu-active></div></a><a class=menu-item href=https://icyleaf.com/about title><h3>About</h3><div class=menu-active></div></a></nav></div></div></nav><main class=main><div class=container><article class=post-warp itemscope itemtype=http://schema.org/Article><header class=post-header><h1 class=post-title itemprop="name headline">ä½¿ç”¨ Git Hooks å®ç°è‡ªåŠ¨é¡¹ç›®éƒ¨ç½²</h1><div class=post-meta><time datetime=2012-03-14 itemprop=datePublished>March 14, 2012</time>
Â·
<span class=tags>Git</span>
Â·
<span class=post-word-count>763 words Â· 3 minutes</span></div></header><div class=post-toc id=post-toc><h2 class=post-toc-title></h2><div class="post-toc-content always-active"><nav id=TableOfContents></nav></div></div><div class=post-content><p>æœ€è¿‘åœ¨æŸæœåŠ¡å™¨ä¸Šé¢æ­å»º git å¼€å‘å’Œéƒ¨ç½²ç¯å¢ƒï¼Œgit å¼€å‘ç¯å¢ƒå¾ˆç®€å•ï¼ŒæŒ‰ç…§ ProGit ä¸€ä¹¦çš„ç›¸å…³çŸ¥è¯†å°±å¯ä»¥è½»æ¾æå®šï¼Œå®ç°äº†ç±»ä¼¼ Github çš„ä½¿ç”¨ SSH + ç§æœ‰ Clone çš„æ–¹å¼ã€‚</p><p>å…³äºéƒ¨ç½²ï¼Œå®é™…ä¸Šæ˜¯è‡ªåŠ¨éƒ¨ç½²ï¼Œèµ·åˆçš„æƒ³æ³•æ˜¯ä½¿ç”¨ bash shell åˆ¶å®šä¸€ä¸ªå®šæ—¶ä»»åŠ¡å»ä¸æ–­ git pull äº§å“ä»£ç ï¼Œåæ¥è®°å¾— Git å¸¦æœ‰ Hooksï¼Œç´¢æ€§åœ¨ProGit ä¸€ä¹¦ç¿»äº†ç¿»ï¼š</p><blockquote><p>Git æœ¬èº«å¯ä»¥è°ƒç”¨è‡ªå®šä¹‰çš„æŒ‚é’©è„šæœ¬ï¼Œå…¶ä¸­æœ‰ä¸¤ç»„ï¼šå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯ã€‚å®¢æˆ·ç«¯æŒ‚é’©ç”¨äºå®¢æˆ·ç«¯çš„æ“ä½œï¼Œå¦‚æäº¤å’Œåˆå¹¶ã€‚æœåŠ¡å™¨ç«¯æŒ‚é’©ç”¨äº Git æœåŠ¡å™¨ç«¯çš„æ“ä½œï¼Œå¦‚æ¥æ”¶è¢«æ¨é€çš„æäº¤ã€‚è¯¦æƒ…è¯·æŸ¥çœ‹ <a href=http://progit.org/book/zh/ch7-3.html>ProGit ç›¸å…³ç« èŠ‚</a></p></blockquote><p>å¦‚æœè¿™æ ·å°±ç®€å•äº†ï¼Œåˆ©ç”¨æœåŠ¡å™¨ç«¯è°ƒç”¨æƒ³è¦çš„æŒ‚é’©ï¼ˆHookï¼‰ï¼Œå³å¯å®ç°è‡ªåŠ¨éƒ¨ç½²çš„æ–¹æ¡ˆï¼Œä¸ºäº†ä¿è¯ä¸è¢«è‚†æ„éƒ¨ç½²ï¼Œç‰¹åŠ äº†ä¸€ä¸ªå¯¹éœ€è¦éƒ¨ç½² commit çš„åˆ¤æ–­ï¼Œåˆ©ç”¨è¯»å– commit subject å¹¶åŒ¹é…æƒ³è¦çš„å­—ç¬¦ä¸²æ‰å»éƒ¨ç½²ï¼Œè¿™æ ·æˆ‘è®¤ä¸ºæ˜¯ä¸€ä¸ªæ¯”è¾ƒå®‰è£…çš„éƒ¨ç½²æ–¹æ¡ˆã€‚</p><p>Gitçš„æŒ‚é’©ï¼ˆHookï¼‰ä¸»è¦åŒ…å«ï¼š</p><ul><li>applypatch-msg</li><li>post-update</li><li>pre-rebase</li><li>commit-msg</li><li>pre-applypatch</li><li>update</li><li>post-commit</li><li>pre-commit</li><li>post-receive</li><li>prepare-commit-msg</li></ul><p>è¿™é‡Œæˆ‘ä»¬åªéœ€è¦ä½¿ç”¨ post-receive è¿™ä¸ª Hookï¼šåœ¨æ¥æ”¶ post(push)
è¯·æ±‚ä¹‹åæ‰§è¡Œã€‚å…¶ä»–å¤§éƒ¨åˆ†æˆ‘ä¹Ÿæ²¡æœ‰å¤§å¤šç ”ç©¶ï¼Œä¸è¿‡çœ‹åå­—ä¸ç®—éš¾ç†è§£ï¼Œæˆ‘è§‰å¾—å…¶ä¸­å¤§éƒ¨åˆ†åŒ…å« commit çš„å±äºå®¢æˆ·ç«¯ã€‚</p><p>å¥½äº†ï¼Œéƒ¨ç½²å¼€å§‹ï¼š</p><p>â€‹1. åœ¨æœåŠ¡å™¨ git ä»“åº“ï¼ˆæ³¨æ„æ˜¯ bare ä»“åº“ï¼Œä¸æ˜¯ä»£ç ä»“åº“ï¼‰çš„ Hooksï¼Œç¼–è¾‘
post-receiveï¼ˆå¦‚æœæ²¡æœ‰è‡ªè¡Œåˆ›å»ºï¼‰ï¼Œä»£ç è¯·çœ‹ï¼šhttp://gist.github.com/566767</p><p>è¿™é‡Œä¼šå…ˆåˆ¤æ–­è„šæœ¬æ‰€åœ¨ç›®å½•æ˜¯å¦æ˜¯ bare git ä»“åº“ï¼Œç„¶åè·å–æœ€æ–° commit çš„ subjectï¼Œå¹¶åŒ¹é…æ˜¯å¦åŒ…å« [deploy] å­—æ ·ï¼Œå¦‚æœåŒ…å«ï¼Œåˆ™ç»§ç»­æ£€æŸ¥äº§å“ä»£ç ä»“åº“è·¯å¾„æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨åˆ™æ‰§è¡Œ git pull æ“ä½œã€‚</p><p>â€‹2. å¯¹åˆšæ‰ç¼–è¾‘çš„ post-receive æ‰§è¡Œä¸‹é¢å‘½ä»¤ä»¥ä¿è¯è„šæœ¬å¯æ‰§è¡Œï¼š</p><pre><code>$ chmod +x post-receive
</code></pre><p>â€‹3. å®Œæˆï¼</p><p>å¯¹äºè‡ªå®šä¹‰è„šæœ¬ï¼Œå…¶å®ä¸ä»…é™äº bash shellï¼Œä½ å¯ä»¥ä½¿ç”¨ä½ ç†Ÿæ‚‰çš„è¯­è¨€ï¼Œç„¶åæŠŠä½ çš„è„šæœ¬è·¯å¾„åœ¨ hooks è„šæœ¬ä¸­åŠ è½½å³å¯ã€‚</p><p>è„šæœ¬è¿˜ä¼šç»§ç»­æ›´æ–°ï¼Œä¸‹é¢éœ€è¦å¢åŠ å…³äºæµ‹è¯•éƒ¨åˆ†çš„ç›¸å…³åˆ¤æ–­å’Œéƒ¨ç½²ã€‚ bash shell è¿˜éœ€è¦è¿›ä¸€æ­¥å­¦ä¹ ï¼Œä¸Šé¢è„šæœ¬æ˜¯æˆ‘ç¬¬ä¸€æ¬¡å†™ï¼Œå¦‚æœ‰ä¸å¦¥ä¹‹å¤„ï¼Œè¯·æŒ‡æ•™ï¼Œæ„Ÿè°¢ï¼</p></div><div class=post-nav><a href=https://icyleaf.com/2012/03/pngcrush-usage-with-ios-apps/ class=prev rel=prev title="pngcrush çš„ä¸€äº›ç”¨æ³•"><i class="iconfont icon-left"></i>&nbsp;pngcrush çš„ä¸€äº›ç”¨æ³•</a>
<a href=https://icyleaf.com/2012/04/automating-script-to-testflight-from-xcode/ class=next rel=next title="è‡ªåŠ¨åŒ–è„šæœ¬ä¸Šä¼ åº”ç”¨è‡³ testflightapp">è‡ªåŠ¨åŒ–è„šæœ¬ä¸Šä¼ åº”ç”¨è‡³ testflightapp&nbsp;<i class="iconfont icon-right"></i></a></div><div class=post-comment></div></article></div></main><footer class=footer><div class=copyright>&copy;
<span itemprop=copyrightYear>2005 - 2021</span>
<span>ğŸº</span>
<span class=author itemprop=copyrightHolder><a href=https://icyleaf.com/>icyleaf</a></span></div></footer><script src=https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js crossorigin=anonymous></script><script defer src=https://icyleaf.com/js/vendor_main.min.js></script><script src=https://cdn.jsdelivr.net/npm/pangu@4.0.7/dist/browser/pangu.min.js integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin=anonymous></script><script>pangu.spacingPage()</script><script>(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)})(window,document,'script','//www.google-analytics.com/analytics.js','ga'),ga('create','UA-2570916-5','auto'),ga('send','pageview')</script></div></body></html>