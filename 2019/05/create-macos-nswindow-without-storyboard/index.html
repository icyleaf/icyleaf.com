<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="chrome=1"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>åˆ›å»ºæ—  Storyboardï¼ˆxibï¼‰ çš„ macOS NSWindow | icyleaf</title><link rel=prev href=https://icyleaf.com/2019/04/apply-thailand-evisa/><link rel=next href=https://icyleaf.com/2019/11/cocoapods-cdn-source-code-reading/><link rel=canonical href=https://icyleaf.com/2019/05/create-macos-nswindow-without-storyboard/><link rel=apple-touch-icon sizes=180x180 href=https://icyleaf.com/images/icyleaf-icon.png><link rel=icon type=image/png sizes=32x32 href=https://icyleaf.com/images/icyleaf-icon.png><link rel=icon type=image/png sizes=16x16 href=https://icyleaf.com/images/icyleaf-icon.png><link rel=stylesheet href=https://icyleaf.com/css/main.min.css><link rel=stylesheet href=https://icyleaf.com/font/iconfont.css><link rel=stylesheet href=https://icyleaf.com/font-ali/iconfont.css><meta name=title content="åˆ›å»ºæ—  Storyboardï¼ˆxibï¼‰ çš„ macOS NSWindow | icyleaf"><meta name=author content="icyleaf"><meta name=description content="æ—¥å¸¸å†™ä»£ç çƒ­çˆ±æˆ·å¤–çš„æ¢¦æƒ³å®¶"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/icyleaf.com\/"},"articleSection":"posts","name":"åˆ›å»ºæ—  Storyboardï¼ˆxibï¼‰ çš„ macOS NSWindow","headline":"åˆ›å»ºæ—  Storyboardï¼ˆxibï¼‰ çš„ macOS NSWindow","description":"å‰è¨€ å†å±Š WWDC ä¼—å¤šå’Œ macOS å¼€å‘ç›¸å…³çš„è§†é¢‘ä¸­åªè¦æ¶‰åŠåˆ° UI éƒ¨åˆ†å¿…ä¼šç‰µæ‰¯ä¸Š Storyboardï¼Œå®ƒèƒ½å¸®ä½ è¾…åŠ©ç”» UIï¼Œä½¿ç”¨ Auto Layout è¿›è¡Œå¸ƒå±€ï¼Œç”šè‡³ä½ å¯ä»¥ä¸ç”¨å†™ä¸€è¡Œ","inLanguage":"zh-cn","author":"icyleaf","creator":"icyleaf","publisher":"icyleaf","accountablePerson":"icyleaf","copyrightHolder":"icyleaf","copyrightYear":"2019","datePublished":"2019-05-23 22:45:07 \u002b0800 \u002b0800","dateModified":"2019-05-23 22:45:07 \u002b0800 \u002b0800","url":"https:\/\/icyleaf.com\/2019\/05\/create-macos-nswindow-without-storyboard\/","wordCount":"1872","keywords":["macOS","icyleaf"]}</script></head><body><div class=wrapper><nav class=navbar><progress class=content_progress max=0 value=0></progress><div class=container><div class="navbar-header header-logo"><a href=https://icyleaf.com/>icyleaf</a></div><div class=navbar-right><span class=menu><a class=menu-item href=https://icyleaf.com/posts title>Posts</a>
<a class=menu-item href=https://icyleaf.com/about title>About</a>
<span class=divide></span><a href=javascript:void(0); class=theme-switch><i class="iconfont icon-dark-mode"></i></a></span></div></div></nav><nav class=navbar-mobile id=nav-mobile style=display:none><progress class=content_progress max=0 value=0></progress><div class=container><div class=navbar><div class="navbar-header header-logo"><a href=https://icyleaf.com/>icyleaf</a></div><div class=navbar-right><div><a href=javascript:void(0); class=theme-switch><i class="iconfont icon-dark-mode"></i></a></div><div class=menu-toggle><span></span><span></span><span></span></div></div></div><div class=menu id=mobile-menu><nav class=mb-md><a class=menu-item href=https://icyleaf.com/posts title><h3>Posts</h3><div class=menu-active></div></a><a class=menu-item href=https://icyleaf.com/about title><h3>About</h3><div class=menu-active></div></a></nav></div></div></nav><main class=main><div class=container><article class=post-warp itemscope itemtype=http://schema.org/Article><header class=post-header><h1 class=post-title itemprop="name headline">åˆ›å»ºæ—  Storyboardï¼ˆxibï¼‰ çš„ macOS NSWindow</h1><div class=post-meta>Written by <a itemprop=name href=https://icyleaf.com/ rel=author>icyleaf</a> with â™¥
<span class=post-time>on <time datetime=2019-05-23 itemprop=datePublished>May 23, 2019</time></span>
in
<i class="iconfont icon-folder"></i>
<span class=post-category><a href=https://icyleaf.com/categories/technology/>Technology,</a></span>
<span class=post-word-count>1872 words 8 minutes reading</span></div></header><div class=post-toc id=post-toc><h2 class=post-toc-title></h2><div class="post-toc-content always-active"><nav id=TableOfContents><ul><li><ul><li><a href=#å‰è¨€>å‰è¨€</a></li><li><a href=#å¼€å§‹æ•™å­¦>å¼€å§‹æ•™å­¦</a></li><li><a href=#ç»“è¯­>ç»“è¯­</a></li></ul></li></ul></nav></div></div><div class=post-content><h3 id=å‰è¨€>å‰è¨€</h3><p>å†å±Š WWDC ä¼—å¤šå’Œ macOS å¼€å‘ç›¸å…³çš„è§†é¢‘ä¸­åªè¦æ¶‰åŠåˆ° UI éƒ¨åˆ†å¿…ä¼šç‰µæ‰¯ä¸Š Storyboardï¼Œå®ƒèƒ½å¸®ä½ è¾…åŠ©ç”» UIï¼Œä½¿ç”¨ Auto Layout è¿›è¡Œå¸ƒå±€ï¼Œç”šè‡³ä½ å¯ä»¥ä¸ç”¨å†™ä¸€è¡Œä»£ç ä»…ä»…ä½¿ç”¨å®ƒå’Œ Core Data å°±èƒ½å®Œæˆä¸€ä¸ª CURD çš„åŠŸèƒ½ã€‚è‹¹æœæ€»æ˜¯æåŠ›çš„æ¨èæ‰€æœ‰çš„å¼€å‘è€…ï¼ˆå°¤å…¶æ˜¯åˆå­¦è€…ï¼‰ä½¿ç”¨ Storyboardï¼Œå®ƒç»™äººæœ€ç›´è§‚çš„æ„Ÿå—ï¼Œé…ç½®å‚æ•°ä¹Ÿéƒ½åšäº†è°ƒæ•™ï¼ˆæœ‰æ—¶å€™å¼€å¯ä¸€ä¸ªå‚æ•°éœ€è¦æ‰‹æ•²å¥½å¤šè¡Œä»£ç ï¼‰ã€‚</p><p>ä½†æ€»æœ‰é‚£ä¹ˆä¸€ç¾¤äººå°±æ˜¯ä¸çˆ±ä½¿ç”¨ Storyboardï¼ˆæ¯”å¦‚æˆ‘ï¼‰ï¼Œå°¤å…¶ App æ¶‰åŠæ¯”è¾ƒå¤šçš„ç•Œé¢å’Œäº¤äº’çš„æ—¶å€™æ„Ÿè§‰è¿˜æ˜¯ä»£ç æ›´å¯æ§ï¼Œå›¢é˜Ÿå¼€å‘åœ¨ä»£ç ä»“åº“ç®¡ç†ä¸Šä¹Ÿæ›´ä¸ºæ–¹ä¾¿ã€‚</p><p>ä½•å¥ˆåœ¨ç½‘ç»œä¸Šå­˜åœ¨çš„ç»å¤§å¤šæ•°çš„æ•™ç¨‹å’Œè§†é¢‘éƒ½æ˜¯ä»¥ Storyboard ä¸ºä¸»ï¼Œç¨ä¸ç•™ç¥å¯èƒ½å°±å¿˜è®°è®¾ç½®äº†å“ªé‡Œï¼Œå†æˆ–è€…è¿‡æ®µæ—¶é—´ä¸¾ä¸€åä¸‰çš„æ—¶å€™æ€»ä¼šå¿˜è®°åœ¨ Storyboard è®¾ç½®äº†ä»€ä¹ˆè€Œæ— æ³•å®ç°åŒæ ·çš„æ•ˆæœã€‚</p><p>æ°å¥½æˆ‘æœ€è¿‘æ¯”è¾ƒé—²èŠ±äº†ç‚¹æ—¶é—´åœ¨å†™ macOS Appï¼Œè¿‡ç¨‹ä¸­ä½“ä¼šåˆ°äº† macOS å’Œ iOS ä¸¤ä¸ªä½“ç³»å­˜åœ¨äº†å·¨å¤§çš„å·®å¼‚ï¼Œå¯èƒ½æ˜¯ä¹ æƒ¯äº† iOS æ¡†æ¶çš„ç¼–ç æ–¹å¼å°±æ„Ÿè§‰åˆ° macOS æ ¼æ ¼ä¸å…¥ï¼Œæƒ³è¦å®Œæˆä¸€ä¸ªåœ¨ iOS ä¸Šç®€å•çš„ç•Œé¢ä½† macOS ä¸Šå°±è¦æƒ³å°½å„ç§åŠæ³•æ¥å»å®ç°ï¼Œè¿«åˆ‡æœŸå¾…åœ¨é©¬ä¸Šæ¥ä¸´çš„ WWDC 2019 ä¸Šå®£å¸ƒæ–°çš„è§£å†³æ–¹æ¡ˆã€‚</p><h3 id=å¼€å§‹æ•™å­¦>å¼€å§‹æ•™å­¦</h3><p>æ‰“å¼€ Xcode é€‰æ‹© macOS ä¸‹é¢çš„ Cocoa App è¿›è¡Œä¸‹ä¸€æ­¥ï¼Œå¡«å†™å¥½é¡¹ç›®åç§°åå‹¾ä¸å‹¾é€‰ <strong>Use Storyboard</strong> éƒ½æ²¡æœ‰å…³ç³»ï¼Œå‹¾é€‰å°±ä¼šåˆ›å»ºä¸€ä¸ª <code>Main.storyboard</code> çš„æ–‡ä»¶ï¼Œä¸å‹¾é€‰ä¹Ÿä¼šåˆ›å»ºä¸€ä¸ª <code>MainMenu.xib</code> çš„æ–‡ä»¶ï¼Œé€‰æ‹©é¡¹ç›®ä¿å­˜çš„è·¯å¾„å°±åˆ›å»ºå¥½ç¬¬ä¸€ä¸ªé¡¹ç›®äº†ã€‚</p><p>æ— è®ºé»˜è®¤çš„æ˜¯ <code>Main.storyboard</code> æˆ– <code>MainMenu.xib</code> éƒ½ä¼šä¸€ä¸ª Main Menu æ§ä»¶è¿™é‡Œå’±ä»¬å…ˆä¸ç®¡å®ƒï¼Œé™¤æ­¤ä¹‹å¤–è¿˜ä¼šæœ‰ä¸€ä¸ª Window æ§ä»¶ï¼Œä¸€ä¸ª macOS App åŸºç¡€çš„å±‚çº§å…³ç³»æ˜¯è¿™æ ·çš„</p><div class=highlight><pre class=chroma><code class=language-text data-lang=text><span class=ln>1</span>+--------------------------------------------------------------+
<span class=ln>2</span>|                           NSWindow                           |
<span class=ln>3</span>|  +--------------------------------------------------------+  |
<span class=ln>4</span>|  |                    NSViewController                    |  |
<span class=ln>5</span>|  |  +--------------------------------------------------+  |  |
<span class=ln>6</span>|  |  |                      NSView                      |  |  |
<span class=ln>7</span>|  |  +--------------------------------------------------+  |  |
<span class=ln>8</span>|  +--------------------------------------------------------+  |
<span class=ln>9</span>+--------------------------------------------------------------+
</code></pre></div><p>é€‰ä¸­ Window æ§ä»¶ååé€‰æ‹©åˆ é™¤ï¼ˆ<code>Main.storyboard</code> è¿˜éœ€è¦å†åˆ é™¤é»˜è®¤ç”Ÿæˆçš„ ViewController æ§ä»¶ï¼‰ï¼Œåˆ é™¤åæ ·å­æ˜¯è¿™æ ·çš„</p><p><img src=https://icyleaf.com/tutorials/macos-app-without-storyboard/001/shot001-xcode-storyboard.png alt="Storyboard and xib in Xcode" loading=lazy></p><p>ç”±äºæˆ‘ä»¬åˆ é™¤äº†é»˜è®¤çš„ NSWindow å› æ­¤éœ€è¦åœ¨ <code>Appdelegate.swift</code> æ–‡ä»¶åˆ›å»ºä¸€ä¸ªï¼š</p><div class=highlight><pre class=chroma><code class=language-swift data-lang=swift><span class=ln> 1</span><span class=kd>import</span> <span class=nc>Cocoa</span>
<span class=ln> 2</span>
<span class=ln> 3</span><span class=kr>@NSApplicationMain</span>
<span class=ln> 4</span><span class=kd>class</span> <span class=nc>AppDelegate</span><span class=p>:</span> <span class=n>NSObject</span><span class=p>,</span> <span class=n>NSApplicationDelegate</span> <span class=p>{</span>
<span class=ln> 5</span>
<span class=ln> 6</span>    <span class=c1>// åˆ›å»ºé»˜è®¤çš„ Window</span>
<span class=ln> 7</span>    <span class=kr>lazy</span> <span class=kd>var</span> <span class=nv>window</span><span class=p>:</span> <span class=n>NSWindow</span> <span class=p>=</span> <span class=p>{</span>
<span class=ln> 8</span>       <span class=kd>let</span> <span class=nv>w</span> <span class=p>=</span> <span class=n>NSWindow</span><span class=p>(</span><span class=n>contentRect</span><span class=p>:</span> <span class=n>NSMakeRect</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>640</span><span class=p>,</span> <span class=mi>480</span><span class=p>),</span>
<span class=ln> 9</span>                        <span class=n>styleMask</span><span class=p>:</span> <span class=p>[.</span><span class=n>titled</span><span class=p>,</span> <span class=p>.</span><span class=n>resizable</span><span class=p>,</span> <span class=p>.</span><span class=n>miniaturizable</span><span class=p>,</span> <span class=p>.</span><span class=n>closable</span><span class=p>,</span> <span class=p>.</span><span class=n>fullSizeContentView</span><span class=p>],</span>
<span class=ln>10</span>                        <span class=n>backing</span><span class=p>:</span> <span class=p>.</span><span class=n>buffered</span><span class=p>,</span>
<span class=ln>11</span>                        <span class=k>defer</span><span class=p>:</span> <span class=kc>false</span><span class=p>)</span>
<span class=ln>12</span>
<span class=ln>13</span>        <span class=c1>// è®¾ç½®æœ€å°å°ºå¯¸</span>
<span class=ln>14</span>        <span class=n>w</span><span class=p>.</span><span class=n>minSize</span> <span class=p>=</span> <span class=n>NSMakeSize</span><span class=p>(</span><span class=mi>320</span><span class=p>,</span> <span class=mi>240</span><span class=p>)</span>
<span class=ln>15</span>
<span class=ln>16</span>        <span class=c1>// æ‰“å¼€æ˜¾ç¤ºåœ¨å±å¹•çš„ä¸­å¿ƒä½ç½®</span>
<span class=ln>17</span>        <span class=n>w</span><span class=p>.</span><span class=n>center</span><span class=p>()</span>
<span class=ln>18</span>
<span class=ln>19</span>        <span class=k>return</span> <span class=n>w</span>
<span class=ln>20</span>    <span class=p>}()</span>
<span class=ln>21</span><span class=p>}</span>
</code></pre></div><p>é»˜è®¤çš„ window è®¾ç½®å¥½äº†ï¼Œæˆ‘ä»¬è®©ä»–èµ¶ç´§æ˜¾ç¤ºå‡ºæ¥å§ï¼Œåœ¨ <code>applicationDidFinishLaunching</code> æ–¹æ³•æ·»åŠ å¦‚ä¸‹ä»£ç :</p><div class=highlight><pre class=chroma><code class=language-swift data-lang=swift><span class=ln>1</span><span class=kd>func</span> <span class=nf>applicationDidFinishLaunching</span><span class=p>(</span><span class=kc>_</span> <span class=n>aNotification</span><span class=p>:</span> <span class=n>Notification</span><span class=p>)</span> <span class=p>{</span>
<span class=ln>2</span>    <span class=c1>// è®¾ç½®ä¸º mainWindow è¿™æ ·æˆ‘ä»¬æ‰èƒ½é€šè¿‡ä¸‹é¢çš„ä»£ç è°ƒç”¨</span>
<span class=ln>3</span>    <span class=n>window</span><span class=p>.</span><span class=n>makeKeyAndOrderFront</span><span class=p>(</span><span class=kc>nil</span><span class=p>)</span>
<span class=ln>4</span>
<span class=ln>5</span>    <span class=c1>// è®¾ç½® mainWindow çš„æ ‡é¢˜</span>
<span class=ln>6</span>    <span class=n>NSApplication</span><span class=p>.</span><span class=n>shared</span><span class=p>.</span><span class=n>mainWindow</span><span class=p>?.</span><span class=n>title</span> <span class=p>=</span> <span class=s>&#34;Hello world&#34;</span>
<span class=ln>7</span><span class=p>}</span>
</code></pre></div><p>æ³¨æ„çœ‹ä¸Šé¢ä»£ç å—çš„å¤‡æ³¨ï¼Œè¿™ä¸¤è¡Œä»£ç ä¸èƒ½é¢ å€’ï¼Œå¦åˆ™ <code>NSApplication.shared.mainWindow</code> è¿”å›çš„æ˜¯ <code>nil</code>ï¼Œæˆ‘ä»¬æ¥è¿è¡Œä¸€ä¸‹çœ‹çœ‹ï¼Œæ˜¯ä¸æ˜¯å°±èƒ½çœ‹åˆ°ä¸€ä¸ª 640x480 çš„çª—å£ï¼Œæ ‡é¢˜æ˜¾ç¤ºçš„ hello world</p><p><img src=https://icyleaf.com/tutorials/macos-app-without-storyboard/001/shot002-nswindow.png alt="NSWindow App" loading=lazy></p><p>ç”¨é¼ æ ‡æ‹–æ‹½ç¼©æ”¾å¤§å°çœ‹çœ‹æ˜¯ä¸æ˜¯åˆ°ä¸€ä¸ªä¿ç•™å°ºå¯¸å°±æ— æ³•å†ç¼©å°äº†ï¼Œè¿™ä¸ªå°±æ˜¯é€šè¿‡ä»£ç è®¾ç½®çš„æœ€å°å°ºå¯¸ã€‚è™½ç„¶ App å¯ä»¥è¿è¡Œäº†å†…å®¹è¿˜æ˜¯ç©ºç©ºçš„ï¼Œæ ¹æ®ä¸Šé¢ç”»å‡ºæ¥çš„å±‚çº§å…³ç³»è¿˜éœ€è¦ä¸€ä¸ª NSViewController å……å½“ contentViewControllerï¼Œå®ƒç›¸å½“äº iOS çš„ rootViewController è¿™æ ·è¯´åº”è¯¥å°±å¾ˆå®¹æ˜“ç†è§£äº†å§ã€‚</p><p>å‡è®¾ App éœ€è¦å®Œæˆè¿™æ ·ä¸€ä¸ªåŠŸèƒ½ï¼Œç•Œé¢æœ‰ä¸€ä¸ª Label å’Œ Buttonï¼Œç‚¹å‡» Button å¯ä»¥æ”¹å˜ Label çš„æ–‡å­—å†…å®¹ï¼š</p><div class=highlight><pre class=chroma><code class=language-text data-lang=text><span class=ln>1</span>+----------------------+          +----------------------+
<span class=ln>2</span>|                      |          |                      |
<span class=ln>3</span>|   Click the button   |          |         Yeah!        |
<span class=ln>4</span>|                      |          |                      |
<span class=ln>5</span>| +------------------+ | -------&gt; | +------------------+ |
<span class=ln>6</span>| |     Click me     | |          | |     Click me     | |
<span class=ln>7</span>| +------------------+ |          | +------------------+ |
<span class=ln>8</span>|                      |          |                      |
<span class=ln>9</span>+----------------------+          +----------------------+
</code></pre></div><p>æˆ‘ä»¬ç”¨åŸç”Ÿ Auto Layout å¸ƒå±€åçš„ä»£ç æ˜¯è¿™æ ·çš„</p><div class=highlight><pre class=chroma><code class=language-swift data-lang=swift><span class=ln> 1</span><span class=kd>import</span> <span class=nc>Cocoa</span>
<span class=ln> 2</span>
<span class=ln> 3</span><span class=kd>class</span> <span class=nc>ViewController</span><span class=p>:</span> <span class=n>NSViewController</span> <span class=p>{</span>
<span class=ln> 4</span>
<span class=ln> 5</span>    <span class=kr>lazy</span> <span class=kd>var</span> <span class=nv>label</span><span class=p>:</span> <span class=n>NSTextField</span> <span class=p>=</span> <span class=p>{</span>
<span class=ln> 6</span>        <span class=kd>let</span> <span class=nv>v</span> <span class=p>=</span> <span class=n>NSTextField</span><span class=p>(</span><span class=n>labelWithString</span><span class=p>:</span> <span class=s>&#34;Press the button&#34;</span><span class=p>)</span>
<span class=ln> 7</span>        <span class=n>v</span><span class=p>.</span><span class=n>translatesAutoresizingMaskIntoConstraints</span> <span class=p>=</span> <span class=kc>false</span>
<span class=ln> 8</span>
<span class=ln> 9</span>        <span class=k>return</span> <span class=n>v</span>
<span class=ln>10</span>    <span class=p>}()</span>
<span class=ln>11</span>
<span class=ln>12</span>
<span class=ln>13</span>    <span class=kr>lazy</span> <span class=kd>var</span> <span class=nv>button</span><span class=p>:</span> <span class=n>NSButton</span> <span class=p>=</span> <span class=p>{</span>
<span class=ln>14</span>        <span class=kd>let</span> <span class=nv>v</span> <span class=p>=</span> <span class=n>NSButton</span><span class=p>(</span><span class=n>frame</span><span class=p>:</span> <span class=p>.</span><span class=n>zero</span><span class=p>)</span>
<span class=ln>15</span>        <span class=n>v</span><span class=p>.</span><span class=n>translatesAutoresizingMaskIntoConstraints</span> <span class=p>=</span> <span class=kc>false</span>
<span class=ln>16</span>
<span class=ln>17</span>        <span class=k>return</span> <span class=n>v</span>
<span class=ln>18</span>    <span class=p>}()</span>
<span class=ln>19</span>
<span class=ln>20</span>    <span class=kr>override</span> <span class=kd>func</span> <span class=nf>viewDidLoad</span><span class=p>()</span> <span class=p>{</span>
<span class=ln>21</span>        <span class=kc>super</span><span class=p>.</span><span class=n>viewDidLoad</span><span class=p>()</span>
<span class=ln>22</span>
<span class=ln>23</span>        <span class=n>view</span><span class=p>.</span><span class=n>addSubview</span><span class=p>(</span><span class=n>label</span><span class=p>)</span>
<span class=ln>24</span>        <span class=n>view</span><span class=p>.</span><span class=n>addSubview</span><span class=p>(</span><span class=n>button</span><span class=p>)</span>
<span class=ln>25</span>
<span class=ln>26</span>        <span class=n>NSLayoutConstraint</span><span class=p>.</span><span class=n>activate</span><span class=p>([</span>
<span class=ln>27</span>            <span class=n>label</span><span class=p>.</span><span class=n>centerXAnchor</span><span class=p>.</span><span class=n>constraint</span><span class=p>(</span><span class=n>equalTo</span><span class=p>:</span> <span class=n>view</span><span class=p>.</span><span class=n>centerXAnchor</span><span class=p>),</span>
<span class=ln>28</span>            <span class=n>label</span><span class=p>.</span><span class=n>centerYAnchor</span><span class=p>.</span><span class=n>constraint</span><span class=p>(</span><span class=n>equalTo</span><span class=p>:</span> <span class=n>view</span><span class=p>.</span><span class=n>centerYAnchor</span><span class=p>,</span> <span class=n>constant</span><span class=p>:</span> <span class=o>-</span><span class=mi>20</span><span class=p>),</span>
<span class=ln>29</span>
<span class=ln>30</span>            <span class=n>button</span><span class=p>.</span><span class=n>centerXAnchor</span><span class=p>.</span><span class=n>constraint</span><span class=p>(</span><span class=n>equalTo</span><span class=p>:</span> <span class=n>view</span><span class=p>.</span><span class=n>centerXAnchor</span><span class=p>),</span>
<span class=ln>31</span>            <span class=n>button</span><span class=p>.</span><span class=n>topAnchor</span><span class=p>.</span><span class=n>constraint</span><span class=p>(</span><span class=n>equalTo</span><span class=p>:</span> <span class=n>label</span><span class=p>.</span><span class=n>bottomAnchor</span><span class=p>,</span> <span class=n>constant</span><span class=p>:</span> <span class=mi>20</span><span class=p>),</span>
<span class=ln>32</span>            <span class=n>button</span><span class=p>.</span><span class=n>heightAnchor</span><span class=p>.</span><span class=n>constraint</span><span class=p>(</span><span class=n>equalToConstant</span><span class=p>:</span> <span class=mi>30</span><span class=p>),</span>
<span class=ln>33</span>            <span class=n>button</span><span class=p>.</span><span class=n>widthAnchor</span><span class=p>.</span><span class=n>constraint</span><span class=p>(</span><span class=n>equalToConstant</span><span class=p>:</span> <span class=mi>100</span><span class=p>)</span>
<span class=ln>34</span>            <span class=p>])</span>
<span class=ln>35</span>
<span class=ln>36</span>        <span class=n>button</span><span class=p>.</span><span class=n>title</span> <span class=p>=</span> <span class=s>&#34;Click me&#34;</span>
<span class=ln>37</span>        <span class=n>button</span><span class=p>.</span><span class=n>target</span> <span class=p>=</span> <span class=kc>self</span>
<span class=ln>38</span>        <span class=n>button</span><span class=p>.</span><span class=n>action</span> <span class=p>=</span> <span class=k>#selector</span><span class=p>(</span><span class=n>onClickme</span><span class=p>)</span>
<span class=ln>39</span>    <span class=p>}</span>
<span class=ln>40</span>
<span class=ln>41</span>    <span class=kr>@objc</span> <span class=kd>func</span> <span class=nf>onClickme</span><span class=p>(</span><span class=kc>_</span> <span class=n>sender</span><span class=p>:</span> <span class=n>NSButton</span><span class=p>)</span> <span class=p>{</span>
<span class=ln>42</span>        <span class=n>label</span><span class=p>.</span><span class=n>textColor</span> <span class=p>=</span> <span class=p>.</span><span class=n>red</span>
<span class=ln>43</span>        <span class=n>label</span><span class=p>.</span><span class=n>stringValue</span> <span class=p>=</span> <span class=s>&#34;Yeah!&#34;</span>
<span class=ln>44</span>    <span class=p>}</span>
<span class=ln>45</span><span class=p>}</span>
</code></pre></div><p>ä»£ç çœ‹ç€ä¸é”™çš„æ ·å­ï¼Œè¿˜å·®æœ€åä¸€æ­¥æŠŠ ViewController æ·»åŠ åˆ° NSWindow é‡Œå§ï¼Œè¿”å› <code>AppDelegate.swift</code> æ–‡ä»¶æ‰¾åˆ°ä¸Šæ¬¡ç¼–è¾‘çš„ <code>applicationDidFinishLaunching</code> æ–¹æ³•é‡Œé¢åœ¨ä»£ç çš„æœ«å°¾æ·»åŠ æœ€åçš„ä»£ç ï¼š</p><div class=highlight><pre class=chroma><code class=language-swift data-lang=swift><span class=ln> 1</span><span class=kd>func</span> <span class=nf>applicationDidFinishLaunching</span><span class=p>(</span><span class=kc>_</span> <span class=n>aNotification</span><span class=p>:</span> <span class=n>Notification</span><span class=p>)</span> <span class=p>{</span>
<span class=ln> 2</span>    <span class=c1>// è®¾ç½®ä¸º mainWindow è¿™æ ·æˆ‘ä»¬æ‰èƒ½é€šè¿‡ä¸‹é¢çš„ä»£ç è°ƒç”¨</span>
<span class=ln> 3</span>    <span class=n>window</span><span class=p>.</span><span class=n>makeKeyAndOrderFront</span><span class=p>(</span><span class=kc>nil</span><span class=p>)</span>
<span class=ln> 4</span>
<span class=ln> 5</span>    <span class=c1>// è®¾ç½® mainWindow çš„æ ‡é¢˜</span>
<span class=ln> 6</span>    <span class=n>NSApplication</span><span class=p>.</span><span class=n>shared</span><span class=p>.</span><span class=n>mainWindow</span><span class=p>?.</span><span class=n>title</span> <span class=p>=</span> <span class=s>&#34;Hello world&#34;</span>
<span class=ln> 7</span>
<span class=ln> 8</span>    <span class=c1>// è®¾ç½® contentViewController</span>
<span class=ln> 9</span>    <span class=kd>let</span> <span class=nv>contentViewController</span> <span class=p>=</span> <span class=n>ViewController</span><span class=p>()</span> <span class=c1>// or ViewController(nibName:nil, bundle: nil)</span>
<span class=ln>10</span>    <span class=n>window</span><span class=p>.</span><span class=n>contentViewController</span> <span class=p>=</span> <span class=n>contentViewController</span>
<span class=ln>11</span><span class=p>}</span>
</code></pre></div><blockquote><p>å’¦ï¼Ÿï¼ä½ è¿™ä¸å¯¹å•Šï¼Œ<code>NSViewController</code> ä»£ç åœ¨åˆå§‹åŒ–çš„æ—¶å€™æ˜¯ä¸èƒ½è¿™æ ·çš„ï¼Œå¿…é¡»é€šè¿‡ <code>init(coder:)</code> æˆ– <code>init(nibName:bundle:)</code> è¿™ä¸¤ç§æ–¹æ³•æ‰è¡Œï¼Œè¿™æ ·å†™è¿è¡Œä¼šæç¤º &ldquo;could not load the nibName: WithoutStoryboard.ViewController in bundle (null).&rdquo; é”™è¯¯çš„ï¼</p></blockquote><p>è§‚å¯Ÿçš„ä¸é”™å˜›ï¼Œè¿™ç‚¹å°ç»†èŠ‚éƒ½ä½ å‘ç°äº†ï¼ŒNSViewController ç±»é€šå¸¸éƒ½æ˜¯é€šè¿‡ <code>init(nibName:bundle:)</code> è¿›è¡Œåˆå§‹åŒ–æ¥å…³è” xib ç•Œé¢ï¼Œæ—¢ç„¶æˆ‘ä»¬æŠ›å¼ƒäº† Storyboardï¼ˆxib) é‚£æ€ä¹ˆåŠå‘¢ï¼Œè¿™é‡Œç†è§£ NSViewController çš„<a href=https://developer.apple.com/documentation/appkit/nsviewcontroller>ç”Ÿå‘½å‘¨æœŸ</a> ï¼ˆmacOS 10.10 ä¹‹åç‰ˆæœ¬)</p><div class=highlight><pre class=chroma><code class=language-text data-lang=text><span class=ln> 1</span>+----------------------------------+   +------------------------------+
<span class=ln> 2</span>|               init               +--&gt;+           loadView()         |
<span class=ln> 3</span>+-----------------+----------------+   +---------------+--------------+
<span class=ln> 4</span>| Storyboard(xib) |      code      |                   |
<span class=ln> 5</span>+----------------------------------+                   v
<span class=ln> 6</span>|  init(coder:)   | init(nibName:  |   +---------------+--------------+
<span class=ln> 7</span>|                 |      bundle:)  |   |          viewDidLoad()       |
<span class=ln> 8</span>+-----------------+----------------+   +---------------+--------------+
<span class=ln> 9</span>                                                       |
<span class=ln>10</span>                                                       v
<span class=ln>11</span>+----------------------------------+   +---------------+--------------+
<span class=ln>12</span>|        viewWillDisappear()       +&lt;--+         viewWillAppear()     |
<span class=ln>13</span>+-----------------+----------------+   +------------------------------+
<span class=ln>14</span>                  |                    |    updateViewConstraints()   |
<span class=ln>15</span>                  |                    |                              |
<span class=ln>16</span>                  v                    |       viewWillLayout()       |
<span class=ln>17</span>+-----------------+----------------+   |                              |
<span class=ln>18</span>|         viewDidDisappear()       |   |        viewDidLayout()       |
<span class=ln>19</span>+----------------------------------+   +------------------------------+
</code></pre></div><p>ç”Ÿå‘½å‘¨æœŸå’Œ iOS çš„ UIViewController ä¹Ÿå·®ä¸å¤šï¼Œä»ä¸Šé¢çš„ç”Ÿå‘½å‘¨æœŸæ¥çœ‹åªèƒ½è¦†å†™ loadView æ–¹æ³•æ‰è¡Œï¼š</p><div class=highlight><pre class=chroma><code class=language-swift data-lang=swift><span class=ln>1</span><span class=kd>class</span> <span class=nc>ViewController</span><span class=p>:</span> <span class=n>NSViewController</span> <span class=p>{</span>
<span class=ln>2</span>
<span class=ln>3</span>    <span class=kr>override</span> <span class=kd>func</span> <span class=nf>loadView</span><span class=p>()</span> <span class=p>{</span>
<span class=ln>4</span>        <span class=c1>// è®¾ç½® ViewController å¤§å°åŒ mainWindow</span>
<span class=ln>5</span>        <span class=k>guard</span> <span class=kd>let</span> <span class=nv>windowRect</span> <span class=p>=</span> <span class=n>NSApplication</span><span class=p>.</span><span class=n>shared</span><span class=p>.</span><span class=n>mainWindow</span><span class=p>?.</span><span class=n>frame</span> <span class=k>else</span> <span class=p>{</span> <span class=k>return</span> <span class=p>}</span>
<span class=ln>6</span>        <span class=n>view</span> <span class=p>=</span> <span class=n>NSView</span><span class=p>(</span><span class=n>frame</span><span class=p>:</span> <span class=n>windowRect</span><span class=p>)</span>
<span class=ln>7</span>    <span class=p>}</span>
<span class=ln>8</span>
<span class=ln>9</span><span class=p>}</span>
</code></pre></div><p>çœ‹äº†ä¸Šé¢ä»£ç ä¹Ÿå°±æ˜ç™½äº†ä¸ºä»€ä¹ˆåœ¨ <code>AppDelegate.swift</code> è®¾ç½® contentViewController éœ€è¦åœ¨ä»£ç å—çš„æœ«å°¾æ·»åŠ äº†å§ï¼Œå¦‚æœåœ¨æœ€å¼€å§‹æ·»åŠ é‚£å°±æ— æ³•è·å–åˆ° mainWindow ä¹Ÿå°±æ— æ³•è®¾ç½® ViewController çš„ frameã€‚è¿™é‡Œè¿˜æœ‰ä¸ªå°æé†’ macOS 10.10 ä¹‹åç‰ˆæœ¬åœ¨è¦†å†™è¯¥æ–¹æ³•å¦‚æœè°ƒç”¨äº† <code>super.loadView()</code> æ–¹æ³•å°±ä¼šè‡ªåŠ¨åŠ è½½åŒåçš„ xib æ–‡ä»¶<strong>ç»å¯¹ä¸èƒ½å¡«å†™</strong>ã€‚</p><p>è®©æˆ‘ä»¬åœ¨è¿è¡Œä¸€æ¬¡çœ‹çœ‹ï¼Ÿ</p><p><img src=https://icyleaf.com/tutorials/macos-app-without-storyboard/001/shot003-final-app.png alt="Final App" loading=lazy></p><p>Ta-Da! å®Œæˆäº†ï¼</p><h3 id=ç»“è¯­>ç»“è¯­</h3><p>è¿™ç®—æ˜¯ä¸€ä¸ªå¼€ç¯‡ï¼Œåç»­è¿˜ä¼šå†ç»§ç»­æ•´ç†ï¼Œå°½è¯·æœŸå¾…ã€‚</p></div><div class=post-copyright><p class=copyright-item><span>Author:</span>
<span>icyleaf</span></p><p class=copyright-item><span>Link:</span>
<a href=https://icyleaf.com/2019/05/create-macos-nswindow-without-storyboard/>https://icyleaf.com/2019/05/create-macos-nswindow-without-storyboard/</a></p></div><div class=post-tags><section><i class="iconfont icon-tag"></i>Tag(s):
<span class=tag><a href=https://icyleaf.com/tags/macos/>#macOS</a></span></section><section><a href=javascript:window.history.back();>back</a></span> Â·
<span><a href=https://icyleaf.com/>home</a></span></section></div><div class=post-nav><a href=https://icyleaf.com/2019/04/apply-thailand-evisa/ class=prev rel=prev title=ç”³è¯·æ³°å›½ç”µå­è½åœ°ç­¾ç­”ç–‘è§£æƒ‘><i class="iconfont icon-left"></i>&nbsp;ç”³è¯·æ³°å›½ç”µå­è½åœ°ç­¾ç­”ç–‘è§£æƒ‘</a>
<a href=https://icyleaf.com/2019/11/cocoapods-cdn-source-code-reading/ class=next rel=next title="Cocoapods æ–°å¢ CDN æ”¯æŒçš„æºç è§£è¯»">Cocoapods æ–°å¢ CDN æ”¯æŒçš„æºç è§£è¯»&nbsp;<i class="iconfont icon-right"></i></a></div><div class=post-comment><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return}var b=document,a=b.createElement('script');a.async=!0,a.src='//icyleaf.disqus.com/embed.js',a.setAttribute('data-timestamp',+new Date),(b.head||b.body).appendChild(a)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></article></div></main><footer class=footer><div class=copyright>&copy;
<span itemprop=copyrightYear>2005 - 2021</span>
<span>ğŸº</span>
<span class=author itemprop=copyrightHolder><a href=https://icyleaf.com/>icyleaf</a></span>
| <span>Powered by <a href=https://gohugo.io/ target=_blank rel="external nofollow">Hugo</a> & <a href=https://github.com/icyleaf/hugo-theme-nicesima target=_blank rel="external nofollow">nicesima</a></span></div></footer><script src=https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js crossorigin=anonymous></script><script defer src=https://icyleaf.com/js/vendor_main.min.js></script><script src=https://cdn.jsdelivr.net/npm/pangu@4.0.7/dist/browser/pangu.min.js integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin=anonymous></script><script>pangu.spacingPage()</script><script>(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)})(window,document,'script','//www.google-analytics.com/analytics.js','ga'),ga('create','UA-2570916-5','auto'),ga('send','pageview')</script></div></body></html>