<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="chrome=1"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>æ·±å…¥æµ…å‡º Fastlane ä¸€çœ‹ä½ å°±æ‡‚ | icyleaf</title><link rel=prev href=https://icyleaf.com/2016/07/gitlab-api-wrapper-for-crystal/><link rel=next href=https://icyleaf.com/2016/08/how-to-install-rancher-on-osx/><link rel=canonical href=https://icyleaf.com/2016/07/fastlane-in-action/><link rel=apple-touch-icon sizes=180x180 href=https://icyleaf.com/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://icyleaf.com/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://icyleaf.com/favicon-16x16.png><link rel=manifest href=https://icyleaf.com/site.webmanifest><link rel=mask-icon href=https://icyleaf.com/safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#da532c"><meta name=theme-color content="#000000"><link rel=stylesheet href=https://icyleaf.com/css/main.min.css><link rel=stylesheet href=https://icyleaf.com/font/iconfont.css><link rel=stylesheet href=https://icyleaf.com/font-ali/iconfont.css><meta name=title content="æ·±å…¥æµ…å‡º Fastlane ä¸€çœ‹ä½ å°±æ‡‚ | icyleaf"><meta name=author content="icyleaf"><meta name=description content="æ—¥å¸¸å†™ä»£ç çƒ­çˆ±æˆ·å¤–çš„æ¢¦æƒ³å®¶"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/icyleaf.com\/"},"articleSection":"posts","name":"æ·±å…¥æµ…å‡º Fastlane ä¸€çœ‹ä½ å°±æ‡‚","headline":"æ·±å…¥æµ…å‡º Fastlane ä¸€çœ‹ä½ å°±æ‡‚","description":"è¿™æ˜¯ã€Š Fastlane - iOS å’Œ Android çš„è‡ªåŠ¨åŒ–æ„å»ºå·¥å…·ã€‹ç³»åˆ—çš„ç¬¬äºŒç¯‡ã€‚ æœ¬ç¯‡æˆ‘æƒ³ç€é‡ä»‹ç» fastlane æœ¬èº«çš„åŸºæœ¬ä½¿ç”¨ï¼Œè¿™é‡Œä½¿ç”¨ fastlane v1.98.0 ä½œä¸ºæ¼”ç¤ºç‰ˆæœ¬ã€‚ ç³»åˆ—ç´¢å¼• Fastlane - iOS å’Œ Android çš„è‡ªåŠ¨åŒ–æ„å»ºå·¥","inLanguage":"zh-cn","author":"icyleaf","creator":"icyleaf","publisher":"icyleaf","accountablePerson":"icyleaf","copyrightHolder":"icyleaf","copyrightYear":"2016","datePublished":"2016-07-19 20:12:07 \u002b0800 \u002b0800","dateModified":"2016-07-19 20:12:07 \u002b0800 \u002b0800","url":"https:\/\/icyleaf.com\/2016\/07\/fastlane-in-action\/","wordCount":"3589","keywords":["iOS","Android","CI","CD","Ruby","Fastlane","icyleaf"]}</script></head><body><div class=wrapper><nav class=navbar><progress class=content_progress max=0 value=0></progress><div class=container><div class="navbar-header header-back2home-logo"><span class=logo_mark>>$</span>
<a href=https://icyleaf.com/><span class=logo_text>cd /home/</span>
<span class=logo_cursor></span></a></div><div class=navbar-right><span class=menu><a class=menu-item href=https://icyleaf.com/posts title>Posts</a>
<a class=menu-item href=https://icyleaf.com/categories title>Categories</a>
<a class=menu-item href=https://icyleaf.com/tags title>Tags</a>
<a class=menu-item href=https://icyleaf.com/about title>About</a>
<span class=divide></span><a href=javascript:void(0); class=theme-switch><i class="iconfont icon-dark-mode"></i></a></span></div></div></nav><nav class=navbar-mobile id=nav-mobile style=display:none><progress class=content_progress max=0 value=0></progress><div class=container><div class=navbar><div class="navbar-header header-logo"><a href=https://icyleaf.com/>icyleaf</a></div><div class=navbar-right><div><a href=javascript:void(0); class=theme-switch><i class="iconfont icon-dark-mode"></i></a></div><div class=menu-toggle><span></span><span></span><span></span></div></div></div><div class=menu id=mobile-menu><nav class=mb-md><a class=menu-item href=https://icyleaf.com/posts title><h3>Posts</h3><div class=menu-active></div></a><a class=menu-item href=https://icyleaf.com/categories title><h3>Categories</h3><div class=menu-active></div></a><a class=menu-item href=https://icyleaf.com/tags title><h3>Tags</h3><div class=menu-active></div></a><a class=menu-item href=https://icyleaf.com/about title><h3>About</h3><div class=menu-active></div></a></nav></div></div></nav><main class=main><div class=container><article class=post-warp itemscope itemtype=http://schema.org/Article><header class=post-header><h1 class=post-title itemprop="name headline">æ·±å…¥æµ…å‡º Fastlane ä¸€çœ‹ä½ å°±æ‡‚</h1><div class=post-meta>Written by <a itemprop=name href=https://icyleaf.com/ rel=author>icyleaf</a> with â™¥
<span class=post-time>on <time datetime=2016-07-19 itemprop=datePublished>July 19, 2016</time></span>
in
<i class="iconfont icon-folder"></i>
<span class=post-category><a href=https://icyleaf.com/categories/technology/>Technology,</a></span>
<span class=post-word-count>3589 words</span></div></header><div class=post-toc id=post-toc><h2 class=post-toc-title></h2><div class="post-toc-content always-active"><nav id=TableOfContents><ul><li><ul><li><a href=#ç³»åˆ—ç´¢å¼•>ç³»åˆ—ç´¢å¼•</a></li></ul></li><li><a href=#å‘½ä»¤è¡Œå·¥å…·>å‘½ä»¤è¡Œå·¥å…·</a></li><li><a href=#ç”Ÿå‘½å‘¨æœŸ>ç”Ÿå‘½å‘¨æœŸ</a></li><li><a href=#ä»»åŠ¡lane>ä»»åŠ¡ï¼ˆlaneï¼‰</a><ul><li><a href=#ä»»åŠ¡å®šä¹‰>ä»»åŠ¡å®šä¹‰</a></li><li><a href=#ä»»åŠ¡æ‰§è¡Œ>ä»»åŠ¡æ‰§è¡Œ</a></li><li><a href=#ä»»åŠ¡äº’è°ƒ>ä»»åŠ¡äº’è°ƒ</a></li><li><a href=#ä»»åŠ¡è¿”å›å€¼>ä»»åŠ¡è¿”å›å€¼</a></li><li><a href=#å¼•å…¥å¤–éƒ¨ä»»åŠ¡æ–‡ä»¶>å¼•å…¥å¤–éƒ¨ä»»åŠ¡æ–‡ä»¶</a></li><li><a href=#ä»»åŠ¡æŸ¥çœ‹>ä»»åŠ¡æŸ¥çœ‹</a></li></ul></li><li><a href=#æ‰©å±•action>æ‰©å±•ï¼ˆActionï¼‰</a><ul><li><a href=#æ‰©å±•åˆ—è¡¨>æ‰©å±•åˆ—è¡¨</a></li><li><a href=#æ‰©å±•ä½¿ç”¨å¸®åŠ©>æ‰©å±•ä½¿ç”¨å¸®åŠ©</a></li><li><a href=#åˆ›å»ºè‡ªå®šä¹‰æ‰©å±•>åˆ›å»ºè‡ªå®šä¹‰æ‰©å±•</a></li><li><a href=#å¼•å…¥å¤–éƒ¨æ‰©å±•>å¼•å…¥å¤–éƒ¨æ‰©å±•</a></li><li><a href=#æ‰©å±•çš„å‘½ä»¤è¡Œè°ƒç”¨>æ‰©å±•çš„å‘½ä»¤è¡Œè°ƒç”¨</a></li></ul></li><li><a href=#è¾…åŠ©åŠŸèƒ½>è¾…åŠ©åŠŸèƒ½</a><ul><li><a href=#è‡ªåŠ¨æ›´æ–°>è‡ªåŠ¨æ›´æ–°</a></li><li><a href=#ç¯å¢ƒå˜é‡>ç¯å¢ƒå˜é‡</a></li></ul></li></ul></nav></div></div><div class=post-content><p>è¿™æ˜¯ã€Š <a href=https://icyleaf.com/2016/07/intro-fastlane-automation-for-ios-and-android/>Fastlane - iOS å’Œ Android çš„è‡ªåŠ¨åŒ–æ„å»ºå·¥å…·</a>ã€‹ç³»åˆ—çš„ç¬¬äºŒç¯‡ã€‚</p><p>æœ¬ç¯‡æˆ‘æƒ³ç€é‡ä»‹ç» <code>fastlane</code> æœ¬èº«çš„åŸºæœ¬ä½¿ç”¨ï¼Œè¿™é‡Œä½¿ç”¨ fastlane v1.98.0 ä½œä¸ºæ¼”ç¤ºç‰ˆæœ¬ã€‚</p><h3 id=ç³»åˆ—ç´¢å¼•>ç³»åˆ—ç´¢å¼•</h3><ol><li><a href=https://icyleaf.com/2016/07/intro-fastlane-automation-for-ios-and-android/>Fastlane - iOS å’Œ Android çš„è‡ªåŠ¨åŒ–æ„å»ºå·¥å…·</a></li><li><a href=https://icyleaf.com/2016/07/fastlane-in-action/>æ·±å…¥æµ…å‡º Fastlane ä¸€çœ‹ä½ å°±æ‡‚</a></li><li><a href=https://icyleaf.com/2017/03/fastlane-match-in-action/>ä½ è™æˆ‘åƒç™¾éï¼Œæˆ‘å¾…ä½ å¦‚åˆæ‹ï¼Œç›´åˆ°æˆ‘é‡åˆ° match</a></li></ol><h2 id=å‘½ä»¤è¡Œå·¥å…·>å‘½ä»¤è¡Œå·¥å…·</h2><p>å®‰è£…ä¹‹åé»˜è®¤ä¼šå®‰è£…ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…· <code>fastlane</code>ï¼Œåˆ©ç”¨å®ƒå¯ä»¥åˆå§‹åŒ–ã€æ‰§è¡Œä»»åŠ¡ã€æŸ¥çœ‹ä»»åŠ¡å®šä¹‰ã€æŸ¥çœ‹å¯ç”¨çš„åŠ¨ä½œå’ŒåŠ¨ä½œçš„è¯¦ç»†å®šä¹‰ï¼Œç”šè‡³å¯ä»¥ç”¨å®ƒæ¥åˆ›å»ºè‡ªå®šä¹‰çš„åŠ¨ä½œã€æ’ä»¶ä»¥åŠä¸€äº›è¾…åŠ©åŠŸèƒ½ã€‚æƒ³äº†è§£çš„è¯å¯ä»¥å…ˆçœ‹çœ‹å®ƒçš„å¸®åŠ©ï¼š</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash><span class=ln> 1</span>$ fastlane --help
<span class=ln> 2</span>
<span class=ln> 3</span>  fastlane
<span class=ln> 4</span>
<span class=ln> 5</span>  CLI <span class=k>for</span> <span class=s1>&#39;fastlane&#39;</span> - The easiest way to automate building and releasing your iOS and Android apps
<span class=ln> 6</span>
<span class=ln> 7</span>        Run using <span class=sb>`</span>fastlane <span class=o>[</span>platform<span class=o>]</span> <span class=o>[</span>lane_name<span class=o>]</span><span class=sb>`</span>
<span class=ln> 8</span>        To pass values to the lanes use <span class=sb>`</span>fastlane <span class=o>[</span>platform<span class=o>]</span> <span class=o>[</span>lane_name<span class=o>]</span> key:value key2:value2<span class=sb>`</span>
<span class=ln> 9</span>
<span class=ln>10</span>  Commands:
<span class=ln>11</span>    action                  Shows more information <span class=k>for</span> a specific <span class=nb>command</span>
<span class=ln>12</span>    actions                 Lists all available fastlane actions
<span class=ln>13</span>    add_plugin              Add a new plugin to your fastlane setup
<span class=ln>14</span>    disable_crash_reporting Deprecated: fastlane doesn<span class=s1>&#39;t use a crash reporter any more
</span><span class=ln>15</span><span class=s1>    docs                    Generate a markdown based documentation based on the Fastfile
</span><span class=ln>16</span><span class=s1>    enable_auto_complete    Enable tab auto completion
</span><span class=ln>17</span><span class=s1>    enable_crash_reporting  Deprecated: fastlane doesn&#39;</span>t use a crash reporter any more
<span class=ln>18</span>    <span class=nb>help</span>                    Display global or <span class=o>[</span>command<span class=o>]</span> <span class=nb>help</span> documentation
<span class=ln>19</span>    init                    Helps you with your initial fastlane setup
<span class=ln>20</span>    install_plugins         Install all plugins <span class=k>for</span> this project
<span class=ln>21</span>    lanes                   Lists all available lanes and shows their description
<span class=ln>22</span>    list                    Lists all available lanes without description
<span class=ln>23</span>    new_action              Create a new custom action <span class=k>for</span> fastlane.
<span class=ln>24</span>    new_plugin              Create a new plugin that can be used with fastlane
<span class=ln>25</span>    run                     Run a fastlane one-off action without a full lane
<span class=ln>26</span>    search_plugins          Search <span class=k>for</span> plugins, search query is optional
<span class=ln>27</span>    trigger                 Run a sepcific lane. Pass the lane name and optionally the platform first.
<span class=ln>28</span>    update_plugins          Update all plugin dependencies
<span class=ln>29</span>
<span class=ln>30</span>  Global Options:
<span class=ln>31</span>    --verbose
<span class=ln>32</span>    -h, --help           Display <span class=nb>help</span> documentation
<span class=ln>33</span>    -v, --version        Display version information
<span class=ln>34</span>
<span class=ln>35</span>  Author:
<span class=ln>36</span>    Felix Krause &lt;fastlane@krausefx.com&gt;
<span class=ln>37</span>
<span class=ln>38</span>  Website:
<span class=ln>39</span>    https://fastlane.tools
<span class=ln>40</span>
<span class=ln>41</span>  GitHub:
<span class=ln>42</span>    https://github.com/fastlane/fastlane
</code></pre></div><p>æˆ‘ä¼šéšç€ä¸‹é¢æ¯ä¸ªæ¦‚å¿µçš„è§£é‡Šå’Œå±•å¼€æ¥é…åˆä¸Šé¢çš„å‘½ä»¤ä¸€èµ·è®²è§£ã€‚</p><h2 id=ç”Ÿå‘½å‘¨æœŸ>ç”Ÿå‘½å‘¨æœŸ</h2><table><thead><tr><th>æ‰§è¡Œé¡ºåº</th><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>1</td><td>before_all</td><td>åœ¨æ‰§è¡Œ lane ä¹‹å‰åªæ‰§è¡Œä¸€æ¬¡</td></tr><tr><td>2</td><td>before_each</td><td>æ¯æ¬¡æ‰§è¡Œ lane ä¹‹å‰éƒ½ä¼šæ‰§è¡Œä¸€æ¬¡</td></tr><tr><td>3</td><td>lane</td><td>è‡ªå®šä¹‰çš„ä»»åŠ¡</td></tr><tr><td>4</td><td>after_each</td><td>æ¯æ¬¡æ‰§è¡Œ lane ä¹‹åéƒ½ä¼šæ‰§è¡Œä¸€æ¬¡</td></tr><tr><td>5</td><td>after_all</td><td>åœ¨æ‰§è¡Œ lane æˆåŠŸç»“æŸä¹‹åæ‰§è¡Œä¸€æ¬¡</td></tr><tr><td>6</td><td>error</td><td>åœ¨æ‰§è¡Œä¸Šè¿°æƒ…å†µä»»æ„ç¯å¢ƒæŠ¥é”™éƒ½ä¼šä¸­æ­¢å¹¶æ‰§è¡Œä¸€æ¬¡</td></tr></tbody></table><p>ä»¥ä¸Šçš„éƒ¨åˆ†å¤§å®¶åœ¨ä¸Šä¸€ç¯‡å·²ç»è§è¯†è¿‡äº†ï¼Œæœ‰äº›è¿˜æ²¡æ¥è§¦åˆ°ï¼Œä¸ç”¨ç€æ€¥éƒ½ä¼šä¸€ä¸€è¯´æ˜ã€‚</p><h2 id=ä»»åŠ¡lane>ä»»åŠ¡ï¼ˆlaneï¼‰</h2><p>æ­£å¸¸æƒ…å†µä¸‹ä½ å¯èƒ½åªä¼šæ˜¯ç”¨åˆ°ä¸€ç§ä»»åŠ¡æ–¹æ³• <code>lane</code> ä½†å…¶å®å®ƒä¼šåŒ…å«å¾ˆå¤šä¸­é«˜çº§ç”¨æ³•ã€‚åœ¨æ–‡ç« çš„æœ«å°¾ä¼šè¯¦ç»†æè¿°ã€‚</p><h3 id=ä»»åŠ¡å®šä¹‰>ä»»åŠ¡å®šä¹‰</h3><p>å®šä¹‰ä»»åŠ¡çš„æ–¹æ³•ç±»ä¼¼äº rake çš„ taskï¼Œä½†ä½¿ç”¨ä¸Šç¼ºæ¯”å‰è€…è¦å¥½ç”¨å¾ˆå¤šï¼Œè§ä¸‹è¡¨ï¼š</p><table><thead><tr><th>å®šä¹‰</th><th>æ˜¯å¦å¿…é¡»</th><th>è¯´æ˜</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>desc</td><td><code>false</code></td><td>æ–¹æ³•æè¿°</td><td>å¯å¤šæ¬¡ä½¿ç”¨æ‰“åˆ°æ¢è¡Œçš„ç›®çš„</td></tr><tr><td>name</td><td><code>true</code></td><td>æ–¹æ³•å</td><td>ç¬¦å·åŒ–çš„æ–¹æ³•å</td></tr><tr><td>options</td><td><code>false</code></td><td>æ–¹æ³•å‚æ•°</td><td>è¿”å› Hash ç±»å‹</td></tr><tr><td>task</td><td><code>true</code></td><td>æ–¹æ³•ä¸»ä½“</td><td>å‚è€ƒ ruby çš„æ–¹æ³•ä»£ç ä¸”æ”¯æŒ ruby ä»£ç </td></tr></tbody></table><div class=highlight><pre class=chroma><code class=language-ruby data-lang=ruby><span class=ln> 1</span><span class=n>desc</span> <span class=s1>&#39;å®šä¹‰ä¸€ä¸ª build æ–¹æ³•&#39;</span>
<span class=ln> 2</span><span class=n>desc</span> <span class=s1>&#39;å‚æ•° adhoc åˆ¤æ–­æ˜¯å¦ä¸ºå†…æµ‹ç‰ˆæœ¬, é»˜è®¤ä¸º false&#39;</span>
<span class=ln> 3</span><span class=n>desc</span> <span class=s1>&#39;fastlane build&#39;</span>
<span class=ln> 4</span><span class=n>desc</span> <span class=s1>&#39;fastlane build adhoc:true&#39;</span>
<span class=ln> 5</span><span class=n>lane</span> <span class=ss>:build</span> <span class=k>do</span> <span class=o>|</span><span class=n>options</span><span class=o>|</span>
<span class=ln> 6</span>  <span class=c1># task to do something</span>
<span class=ln> 7</span>  <span class=n>adhoc</span> <span class=o>=</span> <span class=n>options</span><span class=o>[</span><span class=ss>:adhoc</span><span class=o>]</span> <span class=o>||</span> <span class=kp>false</span>
<span class=ln> 8</span>  <span class=nb>puts</span> <span class=s2>&#34;adhoc: </span><span class=si>#{</span><span class=n>adhoc</span><span class=si>}</span><span class=s2>&#34;</span>
<span class=ln> 9</span>
<span class=ln>10</span>  <span class=n>gym</span><span class=p>(</span><span class=ss>type</span><span class=p>:</span> <span class=n>adhoc</span> <span class=p>?</span> <span class=s1>&#39;adhoc&#39;</span> <span class=p>:</span> <span class=s1>&#39;appstore&#39;</span><span class=p>)</span>
<span class=ln>11</span><span class=k>end</span>
</code></pre></div><h3 id=ä»»åŠ¡æ‰§è¡Œ>ä»»åŠ¡æ‰§è¡Œ</h3><p>ä¸€èˆ¬æƒ…å†µä¸‹å®ƒéœ€è¦é…åˆå®šä¹‰å¥½çš„ lane æ‰èƒ½ä½¿ç”¨ï¼Œåˆšåˆšæˆ‘ä»¬å®šä¹‰çš„ä¸€ä¸ª build æ–¹æ³•ï¼Œæˆ‘ä»¬è¿™é‡Œå°±è¯•ç€æ‰§è¡Œä¸€ä¸‹å§ã€‚</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash><span class=ln>1</span><span class=c1># é»˜è®¤æ‰§è¡Œ</span>
<span class=ln>2</span>$ fastlane build
<span class=ln>3</span><span class=c1># ä¼ é€’å‚æ•°</span>
<span class=ln>4</span>$ fastlane build adhoc:true
</code></pre></div><h3 id=ä»»åŠ¡äº’è°ƒ>ä»»åŠ¡äº’è°ƒ</h3><p><code>lane</code> å…¶å®å¯ä»¥ç†è§£ä¸º <code>def</code> çš„åˆ«åï¼Œå› æ­¤å¤šä¸ª lane çš„è¯å®é™…ä¸Šæ˜¯å¯ä»¥ç›¸äº’è°ƒç”¨çš„ï¼Œè¿™ä¸ªå…¶å®ç‰¹åˆ«å®ç”¨ï¼Œè¿™æ ·å…¶å®æˆ‘å°±å¯ä»¥æŠŠ cocoapods çš„æ‰§è¡Œæ”¾åˆ°å•ç‹¬çš„ lane é‡Œé¢è€Œä¸æ˜¯ <code>before_all</code>ï¼Œè¿™æ ·æ‰§è¡Œéæ„å»ºçš„ä»»åŠ¡å°±ä¸ä¼šæ‰§è¡Œä¸ç›¸å…³çš„ä»»åŠ¡æˆ–åŠ¨ä½œï¼Œå› æ­¤ fastlane è€Œäº§ç”Ÿäº†ä¸€ä¸ªç§æœ‰ä»»åŠ¡ç”¨å†…éƒ¨ä½¿ç”¨ <code>private_lane</code></p><div class=highlight><pre class=chroma><code class=language-ruby data-lang=ruby><span class=ln> 1</span>
<span class=ln> 2</span><span class=n>default_platform</span> <span class=ss>:ios</span>
<span class=ln> 3</span>
<span class=ln> 4</span><span class=n>platform</span> <span class=ss>:ios</span> <span class=k>do</span>
<span class=ln> 5</span>  <span class=n>desc</span> <span class=s1>&#39;æ„å»ºå‰çš„å‡†å¤‡å·¥ä½œ&#39;</span>
<span class=ln> 6</span>  <span class=n>desc</span> <span class=s1>&#39;è¿™æ˜¯ä¸€ä¸ªç§æœ‰ä»»åŠ¡ï¼Œä»…ä¾› Fastfile å†…éƒ¨ lane è°ƒç”¨ä½¿ç”¨&#39;</span>
<span class=ln> 7</span>  <span class=n>lane</span> <span class=ss>:prepare</span> <span class=k>do</span>
<span class=ln> 8</span>    <span class=n>cocoapods</span>
<span class=ln> 9</span>    <span class=n>match</span>
<span class=ln>10</span>  <span class=k>end</span>
<span class=ln>11</span>
<span class=ln>12</span>  <span class=n>desc</span> <span class=s1>&#39;é€šç”¨çš„æ„å»ºä»»åŠ¡&#39;</span>
<span class=ln>13</span>  <span class=n>desc</span> <span class=s1>&#39;fastlane build&#39;</span>
<span class=ln>14</span>  <span class=n>desc</span> <span class=s1>&#39;fastlane build type:adhoc&#39;</span>
<span class=ln>15</span>  <span class=n>lane</span> <span class=ss>:build</span> <span class=k>do</span> <span class=o>|</span><span class=n>options</span><span class=o>|</span>
<span class=ln>16</span>    <span class=c1># è°ƒç”¨ä¸Šé¢ prepare ç§æœ‰ä»»åŠ¡</span>
<span class=ln>17</span>    <span class=n>prepare</span>
<span class=ln>18</span>
<span class=ln>19</span>    <span class=k>case</span> <span class=n>options</span><span class=o>[</span><span class=ss>:type</span><span class=o>]</span>
<span class=ln>20</span>    <span class=k>when</span> <span class=s1>&#39;adhoc&#39;</span>
<span class=ln>21</span>      <span class=c1># è°ƒç”¨ ä¸‹é¢ adhoc ä»»åŠ¡</span>
<span class=ln>22</span>      <span class=n>adhoc</span>
<span class=ln>23</span>    <span class=k>else</span>
<span class=ln>24</span>      <span class=c1># è°ƒç”¨ä¸‹é¢ appstore ä»»åŠ¡</span>
<span class=ln>25</span>      <span class=n>appstore</span>
<span class=ln>26</span>    <span class=k>end</span>
<span class=ln>27</span>  <span class=k>end</span>
<span class=ln>28</span>
<span class=ln>29</span>  <span class=n>desc</span> <span class=s1>&#39;æ„å»º adhoc ä»»åŠ¡&#39;</span>
<span class=ln>30</span>  <span class=n>desc</span> <span class=s1>&#39;fastlane adhoc&#39;</span>
<span class=ln>31</span>  <span class=n>lane</span> <span class=ss>:adhoc</span> <span class=k>do</span>
<span class=ln>32</span>    <span class=n>gym</span><span class=p>(</span><span class=ss>type</span><span class=p>:</span> <span class=s1>&#39;adhoc&#39;</span><span class=p>)</span>
<span class=ln>33</span>  <span class=k>end</span>
<span class=ln>34</span>
<span class=ln>35</span>  <span class=n>desc</span> <span class=s1>&#39;æ„å»º appstore ä»»åŠ¡&#39;</span>
<span class=ln>36</span>  <span class=n>desc</span> <span class=s1>&#39;fastlane appstore&#39;</span>
<span class=ln>37</span>  <span class=n>lane</span> <span class=ss>:appstore</span> <span class=k>do</span>
<span class=ln>38</span>    <span class=n>gym</span><span class=p>(</span><span class=ss>type</span><span class=p>:</span> <span class=s1>&#39;appstore&#39;</span><span class=p>)</span>
<span class=ln>39</span>  <span class=k>end</span>
<span class=ln>40</span><span class=k>end</span>
</code></pre></div><p>ä¸Šé¢çš„ä»»åŠ¡ä¸­ï¼Œ<code>build</code>/<code>adhoc</code>/<code>appstore</code> éƒ½å¯ä»¥æ‰§è¡Œï¼Œåªæœ‰ <code>prepare</code> æ˜¯æ— æ³•é€šè¿‡å‘½ä»¤è¡Œå¤–éƒ¨æ‰§è¡Œï¼Œå¦‚æœæ‰§è¡Œä¼šç›´æ¥æŠ¥é”™ï¼š</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash><span class=ln>1</span>$ fastlane prepare
<span class=ln>2</span><span class=o>[</span>19:17:42<span class=o>]</span>: You can<span class=s1>&#39;t call the private lane &#39;</span>prepare<span class=err>&#39;</span> directly
</code></pre></div><h3 id=ä»»åŠ¡è¿”å›å€¼>ä»»åŠ¡è¿”å›å€¼</h3><p>å’Œ ruby çš„æ–¹æ³•ä¸€è‡´ï¼Œæ¯ä¸ª lane æœ€åä¸€è¡Œä¼šé»˜è®¤ä½œä¸ºè¿”å›å€¼ï¼ˆæ— éœ€ <a href=http://learnrubythehardway.org/book/ex21.html>return</a>ï¼‰ã€‚</p><div class=highlight><pre class=chroma><code class=language-ruby data-lang=ruby><span class=ln>1</span>
<span class=ln>2</span><span class=n>lane</span> <span class=ss>:sum</span> <span class=k>do</span> <span class=o>|</span><span class=n>options</span><span class=o>|</span>
<span class=ln>3</span>  <span class=n>options</span><span class=o>[</span><span class=ss>:a</span><span class=o>]</span> <span class=o>+</span> <span class=n>optiona</span><span class=o>[</span><span class=ss>:b</span><span class=o>]</span>
<span class=ln>4</span><span class=k>end</span>
<span class=ln>5</span>
<span class=ln>6</span><span class=n>lane</span> <span class=ss>:calculate</span> <span class=k>do</span>
<span class=ln>7</span>  <span class=n>value</span> <span class=o>=</span> <span class=n>sum</span><span class=p>(</span><span class=ss>a</span><span class=p>:</span> <span class=mi>3</span><span class=p>,</span> <span class=ss>b</span><span class=p>:</span> <span class=mi>5</span><span class=p>)</span>
<span class=ln>8</span>  <span class=nb>puts</span> <span class=n>value</span> <span class=c1>#=&gt; 8</span>
<span class=ln>9</span><span class=k>end</span>
</code></pre></div><h3 id=å¼•å…¥å¤–éƒ¨ä»»åŠ¡æ–‡ä»¶>å¼•å…¥å¤–éƒ¨ä»»åŠ¡æ–‡ä»¶</h3><p><code>Fastfile</code> é™¤äº†è‡ªèº«ä»¥å¤–è¿˜èƒ½å¤Ÿå¼•å…¥å¤–éƒ¨å…¶ä»–çš„ <code>Fastfile</code> å¹¶è°ƒç”¨ä»»åŠ¡ï¼Œåªéœ€è¦å¯¼å…¥å¤–éƒ¨æ–‡ä»¶å¹¶ä½¿ç”¨ç‰¹æ®Šçš„æ–¹æ³•æ ‡è¯†å³å¯ï¼š</p><h4 id=1-import---å¯¼å…¥æœ¬åœ°æ–‡ä»¶>1. import - å¯¼å…¥æœ¬åœ°æ–‡ä»¶</h4><div class=highlight><pre class=chroma><code class=language-ruby data-lang=ruby><span class=ln>1</span><span class=c1># å¯¼å…¥ lanes ç›®å½•çš„ AndroidFastfile</span>
<span class=ln>2</span><span class=n>import</span> <span class=s2>&#34;lanes/AndroidFastfile&#34;</span>
</code></pre></div><h4 id=2-import_from_git---å¯¼å…¥-git-ä»“åº“æ–‡ä»¶>2. import_from_git - å¯¼å…¥ git ä»“åº“æ–‡ä»¶</h4><p>å¯ä»¥ç›´æ¥å¼•å…¥ git ä»“åº“çš„ Fastfile æ–‡ä»¶æ˜¯ä¸€ä¸ªéå¸¸èµçš„åŠŸèƒ½ï¼Œé€šè¿‡ä½¿ç”¨å‘ç°å…¶å®ç°åŸç†æ˜¯å…ˆæŠŠ git ä»“åº“å…‹éš†ä¸‹æ¥ååœ¨å¼•å…¥ç›¸å¯¹äºçš„æ–‡ä»¶ï¼Œå› æ­¤å»ºè®®å›½å†…åœ¨æ²¡æœ‰ç½‘ç»œåŠ é€Ÿï¼ˆç¿»å¢™ï¼‰çš„æƒ…å†µä¸‹å°½é‡ä¸ç”¨å¼•å…¥æ¯”è¾ƒå¤§çš„ git ä»“åº“ï¼Œå¦åˆ™ä½¿ç”¨ä¼šéœ€è¦æ¼«é•¿çš„ç­‰å¾…&mldr;</p><div class=highlight><pre class=chroma><code class=language-ruby data-lang=ruby><span class=ln>1</span><span class=c1># å¯¼å…¥ mozilla/firefox-ios é¡¹ç›®ä¸‹ fastlane ä¸‹é¢ Fastfile æ–‡ä»¶</span>
<span class=ln>2</span><span class=n>import_from_git</span><span class=p>(</span><span class=ss>url</span><span class=p>:</span> <span class=s1>&#39;https://github.com/mozilla/firefox-ios&#39;</span><span class=p>)</span>
<span class=ln>3</span><span class=c1># æˆ–è€…</span>
<span class=ln>4</span><span class=n>import_from_git</span><span class=p>(</span><span class=ss>url</span><span class=p>:</span> <span class=s1>&#39;git@github.com:mozilla/firefox-ios.git&#39;</span><span class=p>,</span>
<span class=ln>5</span>               <span class=ss>path</span><span class=p>:</span> <span class=s1>&#39;fastlane/Fastfile&#39;</span><span class=p>)</span>
</code></pre></div><p>å‡è‹¥å¤–éƒ¨å¼•å…¥çš„ <code>Fastfile</code> æœ‰ä¸ªæ–¹æ³•æ˜¯ <strong>build</strong>ï¼Œåœ¨å‘½ä»¤è¡Œå·¥å…·ç›´æ¥æ‰§è¡Œå³å¯ï¼Œå¦‚æœå¤–éƒ¨å’Œå†…éƒ¨éƒ½æœ‰ç›¸åŒçš„ä»»åŠ¡åï¼Œæ‰§è¡Œä¼šç›´æ¥æŠ¥é”™ï¼š</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash><span class=ln>1</span>$ fastlane ios build
<span class=ln>2</span>
<span class=ln>3</span><span class=o>[</span>!<span class=o>]</span> Lane <span class=s1>&#39;gradle&#39;</span> was defined multiple times!
</code></pre></div><p>å¦‚æœå‘ç”Ÿè¿™æ ·çš„äº‹æƒ…ä¸”ä½ å¸Œæœ›åœ¨ä¸»ä½“ <code>Fastfile</code> ä¹Ÿè°ƒç”¨çš„è¯éœ€è¦ä½¿ç”¨ç‰¹æ®Šçš„æ–¹æ³•å®šä¹‰ï¼š<code>override_lane</code></p><blockquote><p>æ³¨æ„ï¼šæ­¤æ–¹æ³•åªä¼šè¦†ç›–å¤–éƒ¨çš„ç›¸åŒæ–¹æ³•åçš„ä»£ç æ‰§è¡Œï¼Œç›®å‰æš‚æ—¶æ— æ³•ä½¿ç”¨ç±»ä¼¼ ruby çš„ <code>super</code> ç»§æ‰¿åŸç”±æ–¹æ³•ï¼</p></blockquote><div class=highlight><pre class=chroma><code class=language-ruby data-lang=ruby><span class=ln>1</span><span class=n>override_lane</span> <span class=ss>:build</span> <span class=k>do</span>
<span class=ln>2</span>  <span class=o>...</span>
<span class=ln>3</span><span class=k>end</span>
</code></pre></div><h3 id=ä»»åŠ¡æŸ¥çœ‹>ä»»åŠ¡æŸ¥çœ‹</h3><p>åªéœ€æ‰§è¡Œä¸‹é¢è¿™è¡Œå‘½ä»¤å°±å¯ä»¥çœ‹åˆ°éç§æœ‰ä»»åŠ¡çš„å¯ç”¨åˆ—è¡¨ä¿¡æ¯</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash><span class=ln> 1</span>$ fastlane lanes
<span class=ln> 2</span>
<span class=ln> 3</span>--------- ios---------
<span class=ln> 4</span>----- fastlane ios build
<span class=ln> 5</span>é€šç”¨çš„æ„å»ºä»»åŠ¡
<span class=ln> 6</span>fastlane build
<span class=ln> 7</span>fastlane build type:adhoc
<span class=ln> 8</span>
<span class=ln> 9</span>----- fastlane ios adhoc
<span class=ln>10</span>æ„å»º adhoc ä»»åŠ¡
<span class=ln>11</span>
<span class=ln>12</span>----- fastlane ios appstore
<span class=ln>13</span>æ„å»º appstore ä»»åŠ¡
<span class=ln>14</span>
<span class=ln>15</span>Execute using <span class=sb>`</span>fastlane <span class=o>[</span>lane_name<span class=o>]</span><span class=sb>`</span>
</code></pre></div><h2 id=æ‰©å±•action>æ‰©å±•ï¼ˆActionï¼‰</h2><p>æ‰©å±•æ˜¯ fastlane çš„æ€æ‰‹é”ï¼Œé‡åœ¨é›†æˆäº†ä¼—å¤šéå¸¸ä¼˜ç§€å¥½ç”¨çš„æ–¹æ³•ä¾› lane å†…éƒ¨ä½¿ç”¨ï¼Œæˆªè‡³ fastlane v<code>1.98.0</code> ç‰ˆæœ¬ä»¥åŒ…å« 175 ä¸ªæ‰©å±•ï¼Œè¿™ä¸ªæ•°é‡è¿˜åœ¨é™†ç»­å¢åŠ ä¸­ã€‚æ‰©å±•åˆæœŸæ˜¯ç”±å‘èµ·äººä¸€ä¸ªäººå®Œæˆï¼Œåç»­çš„å¤§éƒ¨åˆ†éƒ½æ˜¯ç¤¾åŒºå…±äº«ï¼Œå¦‚æœä½ å‘ç°æ²¡æœ‰ä½ æƒ³è¦çš„æ‰©å±•ï¼Œå¯ä»¥å…ˆå» <a href="https://github.com/fastlane/fastlane/issues?q=is%3Aopen+is%3Aissue+label%3Aaction">issues</a> æœç´¢ä¸‹æ²¡æœ‰è¦ä¹ˆè‡ªå·±åŠ¨æ‰‹æäº¤è¦ä¹ˆåªæœ‰ç­‰å¾…äº†.</p><h3 id=æ‰©å±•åˆ—è¡¨>æ‰©å±•åˆ—è¡¨</h3><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash><span class=ln> 1</span>$ fastlane actions
<span class=ln> 2</span>+--------------------+-------------------------------------------------------------+------------------+
<span class=ln> 3</span><span class=p>|</span>                                   Available fastlane actions                                        <span class=p>|</span>
<span class=ln> 4</span>+--------------------+-------------------------------------------------------------+------------------+
<span class=ln> 5</span><span class=p>|</span> Action             <span class=p>|</span> Description                                                 <span class=p>|</span> Author           <span class=p>|</span>
<span class=ln> 6</span>+--------------------+-------------------------------------------------------------+------------------+
<span class=ln> 7</span><span class=p>|</span> adb                <span class=p>|</span> Run ADB Actions                                             <span class=p>|</span> hjanuschka       <span class=p>|</span>
<span class=ln> 8</span><span class=p>|</span> adb_devices        <span class=p>|</span> Get an Array of Connected android device serials            <span class=p>|</span> hjanuschka       <span class=p>|</span>
<span class=ln> 9</span><span class=p>|</span> add_git_tag        <span class=p>|</span> This will add an annotated git tag to the current branch    <span class=p>|</span> Multiple         <span class=p>|</span>
<span class=ln>10</span>...
<span class=ln>11</span>+--------------------+-------------------------------------------------------------+------------------+
<span class=ln>12</span>  Total of <span class=m>175</span> actions
<span class=ln>13</span>
<span class=ln>14</span>Get more information <span class=k>for</span> one specific action using <span class=sb>`</span>fastlane action <span class=o>[</span>name<span class=o>]</span><span class=sb>`</span>
</code></pre></div><h3 id=æ‰©å±•ä½¿ç”¨å¸®åŠ©>æ‰©å±•ä½¿ç”¨å¸®åŠ©</h3><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash><span class=ln> 1</span><span class=c1># æŸ¥çœ‹ adb æ‰©å±•çš„ä½¿ç”¨å¸®åŠ©</span>
<span class=ln> 2</span>$ fastlane action adb
<span class=ln> 3</span>Loading documentation <span class=k>for</span> adb:
<span class=ln> 4</span>
<span class=ln> 5</span>+---------------------------------+
<span class=ln> 6</span><span class=p>|</span>               adb               <span class=p>|</span>
<span class=ln> 7</span>+---------------------------------+
<span class=ln> 8</span><span class=p>|</span> Run ADB Actions                 <span class=p>|</span>
<span class=ln> 9</span><span class=p>|</span>                                 <span class=p>|</span>
<span class=ln>10</span><span class=p>|</span> see adb --help <span class=k>for</span> more details <span class=p>|</span>
<span class=ln>11</span><span class=p>|</span>                                 <span class=p>|</span>
<span class=ln>12</span><span class=p>|</span> Created by hjanuschka           <span class=p>|</span>
<span class=ln>13</span>+---------------------------------+
<span class=ln>14</span>
<span class=ln>15</span>+----------+----------------------------------------------------------------------+-------------------+---------+
<span class=ln>16</span><span class=p>|</span>                                                  adb Options                                                  <span class=p>|</span>
<span class=ln>17</span>+----------+----------------------------------------------------------------------+-------------------+---------+
<span class=ln>18</span><span class=p>|</span> Key      <span class=p>|</span> Description                                                          <span class=p>|</span> Env Var           <span class=p>|</span> Default <span class=p>|</span>
<span class=ln>19</span>+----------+----------------------------------------------------------------------+-------------------+---------+
<span class=ln>20</span><span class=p>|</span> serial   <span class=p>|</span> Android serial, which device should be used <span class=k>for</span> this <span class=nb>command</span>         <span class=p>|</span> FL_ANDROID_SERIAL <span class=p>|</span>         <span class=p>|</span>
<span class=ln>21</span><span class=p>|</span> <span class=nb>command</span>  <span class=p>|</span> All commands you want to pass to the adb command, e.g. <span class=sb>`</span>kill-server<span class=sb>`</span> <span class=p>|</span> FL_ADB_COMMAND    <span class=p>|</span>         <span class=p>|</span>
<span class=ln>22</span><span class=p>|</span> adb_path <span class=p>|</span> The path to your <span class=sb>`</span>adb<span class=sb>`</span> binary                                        <span class=p>|</span> FL_ADB_PATH       <span class=p>|</span> adb     <span class=p>|</span>
<span class=ln>23</span>+----------+----------------------------------------------------------------------+-------------------+---------+
<span class=ln>24</span>
<span class=ln>25</span>+-------------------------------+
<span class=ln>26</span><span class=p>|</span>       adb Return Value        <span class=p>|</span>
<span class=ln>27</span>+-------------------------------+
<span class=ln>28</span><span class=p>|</span> The output of the adb <span class=nb>command</span> <span class=p>|</span>
<span class=ln>29</span>+-------------------------------+
<span class=ln>30</span>
<span class=ln>31</span>More information can be found on https://github.com/fastlane/fastlane/blob/master/fastlane/docs/Actions.md
</code></pre></div><h3 id=åˆ›å»ºè‡ªå®šä¹‰æ‰©å±•>åˆ›å»ºè‡ªå®šä¹‰æ‰©å±•</h3><p>é€šè¿‡å†…ç½®çš„å‘½ä»¤åˆ›å»ºä½ éœ€è¦çš„æ‰©å±•ï¼Œæ‰©å±•åå¿…é¡»æ˜¯å…¨éƒ¨å°å†™ä¸”åªèƒ½ä½¿ç”¨ä¸‹åˆ’çº¿åˆ†å‰²è¯ç»„ï¼Œç”Ÿæˆå¥½çš„æ‰©å±•æ–‡ä»¶ä¼šåœ¨ <code>fastlane/actions</code> ç›®å½•æ‰¾åˆ°:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash><span class=ln>1</span>$ fastlane new_action
<span class=ln>2</span>Must be lower <span class=k>case</span>, and use a <span class=s1>&#39;_&#39;</span> between words. Do not use <span class=s1>&#39;.&#39;</span>
<span class=ln>3</span>examples: <span class=s1>&#39;testflight&#39;</span>, <span class=s1>&#39;upload_to_s3&#39;</span>
<span class=ln>4</span>Name of your action: hello
<span class=ln>5</span><span class=o>[</span>15:33:15<span class=o>]</span>: Created new action file <span class=s1>&#39;./fastlane/actions/hello.rb&#39;</span>. Edit it to implement your custom action.
</code></pre></div><p>è¿™å—ä¼šå æ¯”è¾ƒå¤§çš„ç¯‡å¹…ï¼Œå°½æƒ…æœŸå¾…åç»­çš„å±•å¼€ã€‚</p><h3 id=å¼•å…¥å¤–éƒ¨æ‰©å±•>å¼•å…¥å¤–éƒ¨æ‰©å±•</h3><p>è¿™å—å…¶å®ä¹Ÿæœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥å¼•å…¥ï¼Œæ–‡ä»¶å¼•å…¥æ˜¯å®˜æ–¹æ•™ç¨‹æä¾›çš„æ–¹æ³•ï¼Œç¬¬äºŒç§æ˜¯æˆ‘ä¸ªäººå°è¯•å‡ºæ¥çš„ï¼Œç¬¬ä¸‰ç§æ˜¯æœ€è¿‘ç‰ˆæœ¬æ‰å®˜æ–¹æ”¯æŒçš„ã€‚</p><h4 id=1-æœ¬åœ°æ–‡ä»¶å¼•å…¥>1. æœ¬åœ°æ–‡ä»¶å¼•å…¥</h4><p>è‡ªå®šä¹‰çš„æ‰©å±•å…¶å®ä¹Ÿç®—æ˜¯æœ¬åœ°æ–‡ä»¶å¼•å…¥çš„ä¸€ç§å½¢å¼ï¼Œå½“ç„¶ä½äºå…¶ä»–è·¯å¾„çš„é€šè¿‡æŒ‡å®šæ–¹æ³•ä¹Ÿèƒ½åšåˆ°</p><div class=highlight><pre class=chroma><code class=language-ruby data-lang=ruby><span class=ln>1</span><span class=c1># å¼•å…¥é¡¹ç›®æ ¹ç›®å½• script/share_actions è·¯å¾„</span>
<span class=ln>2</span><span class=n>actions_path</span> <span class=s1>&#39;../script/share_actions&#39;</span>
</code></pre></div><h4 id=2-rubygem-å¼•å…¥>2. rubygem å¼•å…¥</h4><blockquote><p>ä¸å†å»ºè®®ä½¿ç”¨æœ¬æ–¹æ³•ï¼Œè¯·çœ‹ç¬¬ä¸‰ç§æ’ä»¶å¼•å…¥ã€‚</p></blockquote><p>æˆ‘åœ¨å›¢é˜Ÿå†…éƒ¨åˆ›å»ºäº†ä¸€ä¸ªè‡ªå®šä¹‰çš„æ‰©å±•ï¼Œä»…é™äºå›¢é˜Ÿå†…éƒ¨ä½¿ç”¨è€Œæ— æ³•è´¡çŒ®ç¤¾åŒºï¼Œæˆ‘åªèƒ½é‡‡å–å°è£…æˆ ruby gem åŒ…ï¼Œé€šè¿‡ ruby çš„ <code>require</code> æ–¹å¼å¼•å…¥ï¼Œæœ€ç»ˆå¯ä»¥å®Œç¾æ”¯æŒï¼Œç›®å‰å·²åœ¨é¡¹ç›®ä¸­ä½¿ç”¨å¤§åŠå¹´ä¹‹ä¹…ã€‚æœ€é‡è¦çš„æ˜¯æˆ‘æ˜¯å¼€æºçš„ï¼š<a href=https://github.com/icyleaf/fastlane-qyer>fastlane-qyer</a></p><div class=highlight><pre class=chroma><code class=language-ruby data-lang=ruby><span class=ln>1</span><span class=c1># é¦–å…ˆå®‰è£…éœ€è¦çš„ rubygem: gem install fastlane-qyer</span>
<span class=ln>2</span><span class=nb>require</span> <span class=s1>&#39;fastlane-qyer&#39;</span>
<span class=ln>3</span>
<span class=ln>4</span><span class=n>lane</span> <span class=ss>:upload</span> <span class=k>do</span>
<span class=ln>5</span>  <span class=n>qyer</span><span class=p>(</span><span class=ss>api_key</span><span class=p>:</span> <span class=s1>&#39;[token]&#39;</span><span class=p>)</span>
<span class=ln>6</span><span class=k>end</span>
</code></pre></div><p>æ³¨æ„ï¼Œä½¿ç”¨ rubygem å¼•å…¥çš„æ— æ³•åœ¨ fastlane actions ä¸­æ˜¾ç¤ºå‡ºæ¥ï¼Œä¹Ÿæ— æ³•ä½¿ç”¨ fastlane action [name] æŸ¥çœ‹ä½¿ç”¨å¸®åŠ©ã€‚æˆ‘çŒœæƒ³ä¸€æ˜¯å®˜æ–¹æ²¡æœ‰è¿™æ ·æä¾›æ€è·¯ï¼ŒäºŒæ˜¯å°±ç®—ä½ å¼•å…¥äº† gem ä¹Ÿä¸æ˜¯ç‰¹åˆ«å¥½åˆ¤æ–­é‡Œé¢çš„æ–‡ä»¶ç»“æ„ã€‚</p><h4 id=3-æ’ä»¶å¼•å…¥>3. æ’ä»¶å¼•å…¥</h4><p>æˆ‘æ³¨æ„åˆ° <a href=https://github.com/fastlane/fastlane/releases/tag/1.93.0>1.93.0</a> å¢åŠ äº†æ’ä»¶æœºåˆ¶ï¼Œå¾ˆå¥½çš„è§£å†³ç¬¬äºŒç§å‡ºç°çš„ä¸€äº›é—®é¢˜ã€‚å¤§æ¦‚çœ‹äº†ä¸€ä¸‹ä¸»è¦æ˜¯é‡‡ç”¨ <code>Gemfile</code> çš„æ–¹å¼ä½¿ç”¨ <code>Pluginfile</code> ç»´æŠ¤äº†å¼•å…¥ç¬¬ä¸‰æ–¹æ’ä»¶åˆ—è¡¨ã€‚å®ç°åŸç†è¿˜æ˜¯å±äºç¬¬äºŒç§æ–¹æ³•ã€‚</p><p>é€šè¿‡ <code>fastlane search_plugins</code> æŸ¥çœ‹å½“å‰æ”¯æŒçš„æ’ä»¶ï¼Œå¹¶ä½¿ç”¨ <code>fastlane add_plugins [name]</code> å¼•å…¥ã€‚</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash><span class=ln> 1</span>$ fastlane search_plugins
<span class=ln> 2</span><span class=o>[</span>16:04:33<span class=o>]</span>: Listing all available fastlane plugins
<span class=ln> 3</span>
<span class=ln> 4</span>+--------------------------+---------------------------------------------------+-----------+
<span class=ln> 5</span><span class=p>|</span>                                Available fastlane plugins                                <span class=p>|</span>
<span class=ln> 6</span>+--------------------------+---------------------------------------------------+-----------+
<span class=ln> 7</span><span class=p>|</span> Name                     <span class=p>|</span> Description                                       <span class=p>|</span> Downloads <span class=p>|</span>
<span class=ln> 8</span>+--------------------------+---------------------------------------------------+-----------+
<span class=ln> 9</span><span class=p>|</span> ruby                     <span class=p>|</span> Useful fastlane actions <span class=k>for</span> Ruby projects         <span class=p>|</span> <span class=m>782</span>       <span class=p>|</span>
<span class=ln>10</span><span class=p>|</span> versioning               <span class=p>|</span> Allows to work set/get app version directly       <span class=p>|</span> <span class=m>758</span>       <span class=p>|</span>
<span class=ln>11</span><span class=p>|</span>                          <span class=p>|</span> to/from Info.plist                                <span class=p>|</span>           <span class=p>|</span>
<span class=ln>12</span><span class=p>|</span> branding                 <span class=p>|</span> Add some branding to your fastlane output         <span class=p>|</span> <span class=m>716</span>       <span class=p>|</span>
<span class=ln>13</span><span class=p>|</span> instrumented_tests       <span class=p>|</span> New action to run instrumented tests <span class=k>for</span> android. <span class=p>|</span> <span class=m>590</span>       <span class=p>|</span>
<span class=ln>14</span><span class=p>|</span>                          <span class=p>|</span> This basically creates and boots an emulator      <span class=p>|</span>           <span class=p>|</span>
<span class=ln>15</span><span class=p>|</span>                          <span class=p>|</span> before running an gradle commands so that you can <span class=p>|</span>           <span class=p>|</span>
<span class=ln>16</span><span class=p>|</span>                          <span class=p>|</span> run instrumented tests against that emulator.     <span class=p>|</span>           <span class=p>|</span>
<span class=ln>17</span><span class=p>|</span>                          <span class=p>|</span> After the gradle <span class=nb>command</span> is executed, the avd     <span class=p>|</span>           <span class=p>|</span>
<span class=ln>18</span><span class=p>|</span>                          <span class=p>|</span> gets shut down and deleted. This is really        <span class=p>|</span>           <span class=p>|</span>
<span class=ln>19</span><span class=p>|</span>                          <span class=p>|</span> helpful on CI services, keeping them clean and    <span class=p>|</span>           <span class=p>|</span>
<span class=ln>20</span><span class=p>|</span>                          <span class=p>|</span> always having a fresh avd <span class=k>for</span> testing.            <span class=p>|</span>           <span class=p>|</span>
<span class=ln>21</span><span class=p>|</span> xamarin_build            <span class=p>|</span> Build xamarin android<span class=se>\i</span>os projects                <span class=p>|</span> <span class=m>582</span>       <span class=p>|</span>
<span class=ln>22</span><span class=p>|</span> appicon                  <span class=p>|</span> Generate required icon sizes and iconset from a   <span class=p>|</span> <span class=m>509</span>       <span class=p>|</span>
<span class=ln>23</span><span class=p>|</span>                          <span class=p>|</span> master application icon.                          <span class=p>|</span>           <span class=p>|</span>
<span class=ln>24</span>...
<span class=ln>25</span><span class=p>|</span> download_file            <span class=p>|</span> This action downloads a file from an HTTP/HTTPS   <span class=p>|</span> <span class=m>171</span>       <span class=p>|</span>
<span class=ln>26</span><span class=p>|</span>                          <span class=p>|</span> url <span class=o>(</span>e.g. ZIP file<span class=o>)</span> and puts it in a destination  <span class=p>|</span>           <span class=p>|</span>
<span class=ln>27</span><span class=p>|</span>                          <span class=p>|</span> path                                              <span class=p>|</span>           <span class=p>|</span>
<span class=ln>28</span>+--------------------------+---------------------------------------------------+-----------+
<span class=ln>29</span>
<span class=ln>30</span><span class=c1># æ·»åŠ  sentry æ’ä»¶</span>
<span class=ln>31</span>$ fastlane add_plugin sentry
<span class=ln>32</span><span class=o>[</span>16:16:23<span class=o>]</span>: Plugin <span class=s1>&#39;fastlane-plugin-sentry&#39;</span> was added to <span class=s1>&#39;./fastlane/Pluginfile&#39;</span>
<span class=ln>33</span><span class=o>[</span>16:16:23<span class=o>]</span>: It looks like fastlane plugins are not yet <span class=nb>set</span> up <span class=k>for</span> this project.
<span class=ln>34</span><span class=o>[</span>16:16:23<span class=o>]</span>: fastlane will create a new Gemfile at path <span class=s1>&#39;Gemfile&#39;</span>
<span class=ln>35</span><span class=o>[</span>16:16:23<span class=o>]</span>: This change is neccessary <span class=k>for</span> fastlane plugins to work
<span class=ln>36</span>Should fastlane modify the Gemfile at path <span class=s1>&#39;Gemfile&#39;</span> <span class=k>for</span> you? <span class=o>(</span>y/n<span class=o>)</span>
<span class=ln>37</span>y
<span class=ln>38</span><span class=o>[</span>16:16:29<span class=o>]</span>: Successfully modified <span class=s1>&#39;Gemfile&#39;</span>
<span class=ln>39</span><span class=o>[</span>16:16:29<span class=o>]</span>: Make sure to commit your Gemfile, Gemfile.lock and Pluginfile to version control
<span class=ln>40</span>Installing plugin dependencies...
<span class=ln>41</span>Successfully installed plugins
<span class=ln>42</span>
<span class=ln>43</span>$ cat fastlane/Pluginfile
<span class=ln>44</span><span class=c1># Autogenerated by fastlane</span>
<span class=ln>45</span><span class=c1>#</span>
<span class=ln>46</span><span class=c1># Ensure this file is checked in to source control!</span>
<span class=ln>47</span>
<span class=ln>48</span>gem <span class=s1>&#39;fastlane-plugin-sentry&#39;</span>
</code></pre></div><p>æ›´è¯¦ç»†çš„ç»§ç»­æœŸå¾…åç»­æŠ¥é“ï¼Œæˆ‘è¦æŒ–å‘æ— æ•°ã€‚</p><h3 id=æ‰©å±•çš„å‘½ä»¤è¡Œè°ƒç”¨>æ‰©å±•çš„å‘½ä»¤è¡Œè°ƒç”¨</h3><p>ç¤¾åŒºçš„åŠ›é‡æœç„¶æ˜¯å¾ˆå¼ºå¤§çš„ï¼Œé™†ç»­æ·»åŠ äº†é‚£ä¹ˆå¤šåŠŸèƒ½ï¼Œæ—©æœŸç”¨æˆ·è¡¨ç¤ºä¸å¼€å¿ƒï¼å—¯ï¼Œç”±äºç¤¾åŒºçš„å‘¼å£°å’Œè´¡çŒ®ç›®å‰å¯ä»¥é€šè¿‡å‘½ä»¤è°ƒç”¨æ‰©å±•ï¼š</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash><span class=ln>1</span><span class=c1># ä½¿ç”¨ notification æ‰©å±•å‘é€ä¸€ä¸ªé€šçŸ¥æ¶ˆæ¯</span>
<span class=ln>2</span>$ fastlane run notification message:<span class=s2>&#34;Hi macOS&#34;</span> title:<span class=s2>&#34;Fastlane Notification&#34;</span>
<span class=ln>3</span><span class=o>[</span>15:58:05<span class=o>]</span>: --------------------------
<span class=ln>4</span><span class=o>[</span>15:58:05<span class=o>]</span>: --- Step: notification ---
<span class=ln>5</span><span class=o>[</span>15:58:05<span class=o>]</span>: --------------------------
<span class=ln>6</span><span class=o>[</span>15:58:05<span class=o>]</span>: Result: <span class=nb>true</span>
</code></pre></div><h2 id=è¾…åŠ©åŠŸèƒ½>è¾…åŠ©åŠŸèƒ½</h2><h3 id=è‡ªåŠ¨æ›´æ–°>è‡ªåŠ¨æ›´æ–°</h3><p>fastlane æä¾›ä¸€ä¸ªæ–¹æ³• <code>update_fastlane</code> ç”¨äºå¯¹äºè‡ªèº«çš„ç‰ˆæœ¬æ£€æŸ¥å’Œæ›´æ–°ï¼Œè¿™ä¸ªç¬¬ä¸€ç¯‡æ–‡ç« æˆ‘ä¹Ÿæœ‰æåˆ°è¿‡ã€‚å®ƒå…¶å®ä¸€ä¸ªæ˜¯ä¸€ä¸ªæ‰©å±•ï¼Œä½¿ç”¨ <code>fastlane action update_fastlane</code> èƒ½å¤Ÿçœ‹åˆ°ä½¿ç”¨å¸®åŠ©ã€‚å®ƒæœ‰ä¸€ä¸ªå‚æ•°æ˜¯å¯ä»¥æŒ‡å®šæ£€æŸ¥ç‰¹å®šçš„ fastlane å·¥å…·å¹¶è¿›è¡Œæ›´æ–°ï¼Œä½†å…¶å®å®ƒæ˜¯ä½¿ç”¨ rubygems è¿›è¡Œå¯¹ gem çš„æ›´æ–°ï¼Œå› æ­¤è¿™å—å…¶å®å¯ä»¥ä¼ å…¥ä»»ä½•éœ€è¦æ£€æŸ¥å¹¶æ›´æ–°çš„ gemï¼š</p><div class=highlight><pre class=chroma><code class=language-ruby data-lang=ruby><span class=ln>1</span><span class=n>update_fastlane</span><span class=p>(</span><span class=ss>tools</span><span class=p>:</span><span class=s1>&#39;fastlane,gym,match,cocoapods,rest-client&#39;</span><span class=p>)</span>
</code></pre></div><h3 id=ç¯å¢ƒå˜é‡>ç¯å¢ƒå˜é‡</h3><p>ä» fastlane çš„è®¾è®¡ä½“ç³»ä¸Šåœ¨å„ä¸ªåœ°æ–¹éƒ½åŠ å…¥äº†ç¯å¢ƒå˜é‡çš„æ”¯æŒï¼Œæ¯ä¸ªæ‰©å±•çš„å‚æ•°ã€ä»¥åŠæ‰©å±•éœ€è¦å…±äº«ç»™å…¶ä»–æ‰©å±•å’Œä»»åŠ¡è¯»å–çš„æ•°æ®éƒ½æ˜¯é€šè¿‡ç¯å¢ƒå˜é‡è·å–ï¼Œå¦‚ä¸‹æ˜¯æˆ‘æ”¶é›†çš„æ¯”è¾ƒå¸¸ç”¨çš„åˆ—è¡¨ï¼š</p><table><thead><tr><th>ç¯å¢ƒå˜é‡</th><th>æ¥æº</th><th>è¯´æ˜</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>FASTLANE_USER</td><td>credentials_manager</td><td>Apple å¼€å‘è€…è´¦æˆ·å</td><td>éªŒè¯é€šè¿‡åä¼šä¿å­˜ Keychain</td></tr><tr><td>FASTLANE_PASSWORD</td><td>credentials_manager</td><td>Apple å¼€å‘è€…è´¦æˆ·å¯†ç </td><td>éªŒè¯é€šè¿‡åä¼šä¿å­˜ Keychain</td></tr><tr><td>FASTLANE_TEAM_IDCERT_TEAM_ID</td><td>producesigh</td><td>Apple å›¢é˜Ÿ ID</td><td></td></tr><tr><td>DELIVER_USER&lt;br >PRODUCE_USERNAME</td><td>deliverproduce</td><td>iTunesConnect è´¦æˆ·å</td><td></td></tr><tr><td>DELIVER_PASSWORD</td><td>deliver</td><td>iTunesConnect è´¦æˆ·å¯†ç </td><td></td></tr><tr><td>MATCH_PASSWORD</td><td>match</td><td>è¯ä¹¦åŠ /è§£å¯†å¯†ç </td><td></td></tr><tr><td>FASTLANE_XCODE_LIST_TIMEOUT</td><td>fastlane_core</td><td>è·å– iOS Scheme çš„è¶…æ—¶æ—¶é—´</td><td>é»˜è®¤ 10s</td></tr></tbody></table></div><div class=post-copyright><p class=copyright-item><span>Author:</span>
<span>icyleaf</span></p><p class=copyright-item><span>Link:</span>
<a href=https://icyleaf.com/2016/07/fastlane-in-action/>https://icyleaf.com/2016/07/fastlane-in-action/</a></p></div><div class=post-tags><section><i class="iconfont icon-tag"></i>Tag(s):
<span class=tag><a href=https://icyleaf.com/tags/ios/>#iOS</a></span>
<span class=tag><a href=https://icyleaf.com/tags/android/>#Android</a></span>
<span class=tag><a href=https://icyleaf.com/tags/ci/>#CI</a></span>
<span class=tag><a href=https://icyleaf.com/tags/cd/>#CD</a></span>
<span class=tag><a href=https://icyleaf.com/tags/ruby/>#Ruby</a></span>
<span class=tag><a href=https://icyleaf.com/tags/fastlane/>#Fastlane</a></span></section><section><a href=javascript:window.history.back();>back</a></span> Â·
<span><a href=https://icyleaf.com/>home</a></span></section></div><div class=post-nav><a href=https://icyleaf.com/2016/07/gitlab-api-wrapper-for-crystal/ class=prev rel=prev title="Gitlab API Wrapper for Crystal"><i class="iconfont icon-left"></i>&nbsp;Gitlab API Wrapper for Crystal</a>
<a href=https://icyleaf.com/2016/08/how-to-install-rancher-on-osx/ class=next rel=next title="å¦‚ä½•åœ¨ OS X ä¸Šå®‰è£… Rancher">å¦‚ä½•åœ¨ OS X ä¸Šå®‰è£… Rancher&nbsp;<i class="iconfont icon-right"></i></a></div><div class=post-social><div class=social-links><style type=text/css>@font-face{font-family:iconfont;src:url(//at.alicdn.com/t/font_1910062_4213q7gpkpy.eot);src:url(//at.alicdn.com/t/font_1910062_4213q7gpkpy.eot?#iefix)format('embedded-opentype'),url(//at.alicdn.com/t/font_1910062_4213q7gpkpy.woff2)format('woff2'),url(//at.alicdn.com/t/font_1910062_4213q7gpkpy.woff)format('woff'),url(//at.alicdn.com/t/font_1910062_4213q7gpkpy.ttf)format('truetype'),url(//at.alicdn.com/t/font_1910062_4213q7gpkpy.svg#iconfont)format('svg')}</style><a class=bloglogo href=https://github.com/icyleaf target=_blank rel="me noopener"><i class="iconfont icon-github" alt=github></i></a>
<a class=bloglogo href=https://twitter.com/icyleaf target=_blank rel="me noopener"><i class="iconfont icon-twitter" alt=twitter></i></a>
<a class=bloglogo href=https://www.facebook.com/icyleaf target=_blank rel="me noopener"><i class="iconfont icon-facebook" alt=facebook></i></a>
<a class=bloglogo href=https://www.linkedin.com/in/icyleaf target=_blank rel="me noopener"><i class="iconfont icon-linkedin" alt=linkedin></i></a>
<a class=bloglogo href=https://www.instagram.com/icyleaf/ target=_blank rel="me noopener"><i class="iconfont icon-instagram" alt=instagram></i></a>
<a class=bloglogo href=https://www.douban.com/people/icyleaf target=_blank rel="me noopener"><i class="iconfont icon-douban" alt=douban></i></a></div></div><div class=post-comment><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return}var b=document,a=b.createElement('script');a.async=!0,a.src='//icyleaf.disqus.com/embed.js',a.setAttribute('data-timestamp',+new Date),(b.head||b.body).appendChild(a)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></article></div></main><footer class=footer><div class=copyright>&copy;
<span itemprop=copyrightYear>2005 - 2021</span>
<span>ğŸº</span>
<span class=author itemprop=copyrightHolder><a href=https://icyleaf.com/>icyleaf</a></span>
| <span>Powered by <a href=https://gohugo.io/ target=_blank rel="external nofollow">Hugo</a> & <a href=https://github.com/icyleaf/hugo-theme-nicesima target=_blank rel="external nofollow">nicesima</a></span></div></footer><script src=https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js crossorigin=anonymous></script><script defer src=https://icyleaf.com/js/vendor_main.min.js></script><script src=https://cdn.jsdelivr.net/npm/pangu@4.0.7/dist/browser/pangu.min.js integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin=anonymous></script><script>pangu.spacingPage()</script><script>(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)})(window,document,'script','//www.google-analytics.com/analytics.js','ga'),ga('create','UA-2570916-5','auto'),ga('send','pageview')</script></div></body></html>