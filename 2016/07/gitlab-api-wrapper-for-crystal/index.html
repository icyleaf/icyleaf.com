<!doctype html><html lang=zh><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="chrome=1"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>Gitlab API Wrapper for Crystal | icyleaf</title><link rel=prev href=https://icyleaf.com/2016/07/intro-fastlane-automation-for-ios-and-android/><link rel=next href=https://icyleaf.com/2016/07/fastlane-in-action/><link rel=canonical href=https://icyleaf.com/2016/07/gitlab-api-wrapper-for-crystal/><link rel=apple-touch-icon sizes=180x180 href=https://icyleaf.com/images/icyleaf-icon.png><link rel=icon type=image/png sizes=32x32 href=https://icyleaf.com/images/icyleaf-icon.png><link rel=icon type=image/png sizes=16x16 href=https://icyleaf.com/images/icyleaf-icon.png><link rel=stylesheet href=https://icyleaf.com/css/main.min.css><link rel=stylesheet href=https://icyleaf.com/font/iconfont.css><link rel=stylesheet href=https://icyleaf.com/font-ali/iconfont.css><link rel=stylesheet href=https://icyleaf.com/photoswipe/photoswipe.css><meta name=title content="Gitlab API Wrapper for Crystal | icyleaf"><meta name=author content="icyleaf"><meta name=description content="æ—¥å¸¸å†™ä»£ç çƒ­çˆ±æˆ·å¤–çš„æ¢¦æƒ³å®¶"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/icyleaf.com\/"},"articleSection":"posts","name":"Gitlab API Wrapper for Crystal","headline":"Gitlab API Wrapper for Crystal","description":"å­¦ä¹ æ–°è¯­éŸ³æœ€å¥½çš„é€”å¾„å°±æ˜¯é€ è½®å­","inLanguage":"zh","author":"icyleaf","creator":"icyleaf","publisher":"icyleaf","accountablePerson":"icyleaf","copyrightHolder":"icyleaf","copyrightYear":"2016","datePublished":"2016-07-11 20:41:26 \u002b0800 \u002b0800","dateModified":"2016-07-11 20:41:26 \u002b0800 \u002b0800","url":"https:\/\/icyleaf.com\/2016\/07\/gitlab-api-wrapper-for-crystal\/","wordCount":"1082","keywords":["Ruby","Crystal","icyleaf"]}</script></head><body><div class=wrapper><nav class=navbar><progress class=content_progress max=0 value=0></progress><div class=container><div class="navbar-header header-logo"><a href=https://icyleaf.com/>icyleaf</a></div><div class=navbar-right><span class=menu><a class=menu-item href=https://icyleaf.com/about title>About</a>
<a class=menu-item href=https://icyleaf.com/projects title>Projects</a>
<a class=menu-item href=https://icyleaf.com/index.xml title>Feed</a>
<span class=divide></span>
<a href=javascript:void(0); class=theme-switch><i class="iconfont icon-dark-mode"></i></a></span></div></div></nav><nav class=navbar-mobile id=nav-mobile style=display:none><progress class=content_progress max=0 value=0></progress><div class=container><div class=navbar><div class="navbar-header header-logo"><a href=https://icyleaf.com/>icyleaf</a></div><div class=navbar-right><div><a href=javascript:void(0); class=theme-switch><i class="iconfont icon-dark-mode"></i></a></div><div class=menu-toggle><span></span><span></span><span></span></div></div></div><div class=menu id=mobile-menu><nav class=mb-md><a class=menu-item href=https://icyleaf.com/about title><h3>About</h3><div class=menu-active></div></a><a class=menu-item href=https://icyleaf.com/projects title><h3>Projects</h3><div class=menu-active></div></a><a class=menu-item href=https://icyleaf.com/index.xml title><h3>Feed</h3><div class=menu-active></div></a></nav></div></div></nav><main class=main><div class=container><article class=post-warp itemscope itemtype=http://schema.org/Article><header class=post-header><h1 class=post-title itemprop=description>Gitlab API Wrapper for Crystal</h1><div class=post-description>å­¦ä¹ æ–°è¯­éŸ³æœ€å¥½çš„é€”å¾„å°±æ˜¯é€ è½®å­</div><div class=post-meta><time datetime=2016-07-11 itemprop=datePublished>July 11, 2016</time>
Â·
<span class=tags>Ruby, Crystal</span>
Â·
<span class=post-word-count>1082 words Â· 4 minutes</span></div></header><div class=post-toc id=post-toc><h2 class=post-toc-title></h2><div class="post-toc-content always-active"><nav id=TableOfContents><ul><li><a href=#gitlabcr>Gitlab.cr</a></li><li><a href=#ä¸ºä»€ä¹ˆå­¦ä¹ -crystal>ä¸ºä»€ä¹ˆå­¦ä¹  Crystalï¼Ÿ</a></li><li><a href=#è¯­è¨€ä¼˜åŠ¿>è¯­è¨€ä¼˜åŠ¿</a></li><li><a href=#è¯­è¨€å‹å¥½>è¯­è¨€å‹å¥½</a></li><li><a href=#è¯­è¨€é™åˆ¶>è¯­è¨€é™åˆ¶</a></li><li><a href=#æœ€åæƒ³è¯´çš„è¯>æœ€åæƒ³è¯´çš„è¯</a></li><li><a href=#ç›¸å…³èµ„æº>ç›¸å…³èµ„æº</a></li></ul></nav></div></div><div class=post-content><div id=post-gallery><h2 id=gitlabcr>Gitlab.cr</h2><p><a href=https://github.com/icyleaf/gitlab.cr>gitlab.cr</a> æ˜¯æˆ‘æœ€è¿‘è¯¾ä¸‹ç»ƒä¹ çš„æ–°è¯­è¨€ <a href=http://crystal-lang.org/>Crystal</a> å†™çš„ gitlab åŒ…ï¼Œæ–¹æ³•å’ŒåŠŸèƒ½å’Œ <a href=https://github.com/NARKOZ/gitlab>gitlab ruby ç‰ˆæœ¬</a>åŸºæœ¬ç±»ä¼¼ã€‚</p><p>ç›®å‰å·²ç»å®Œæˆäº†å¤§éƒ¨åˆ† API çš„å°è£…ï¼Œåœ¨ä¸€è¾¹ç†Ÿæ‚‰ crystal çš„åŒæ—¶ä¸€è¾¹è¡¥å……ï¼Œå…¶ä¸­è‚¯å®šæœ‰ä¸€äº›æ€§èƒ½é—®é¢˜å’Œå‘ï¼Œæ¯•ç«Ÿæ²¡æœ‰ä»»ä½•ä¾èµ–éƒ½æ˜¯è‡ªå·±å®ç°çš„ã€‚æ¯”è¾ƒå‘çˆ¹çš„æ˜¯å®˜æ–¹æ‰‹å†Œå¤ªç®€å•ï¼Œä¹Ÿæ²¡æœ‰å®æ—¶è·Ÿè¿›ï¼Œèƒ½å¤Ÿå¥½å¥½ç¿»é˜…çš„å…¶å®ä¹Ÿå°±æ˜¯å®˜æ–¹çš„ API æ–‡æ¡£å’Œæºç ã€‚ä¸è¿‡ crystal è¿˜ç®—æ¯”è¾ƒäººæ€§åŒ–çš„ä¸€é¢ï¼Œé»˜è®¤é›†æˆäº†ç±»ä¼¼ rspce çš„å•å…ƒæµ‹è¯•ï¼ˆç®€åŒ–ç‰ˆï¼‰å’Œä¾èµ–åº“ç®¡ç† shardsï¼ˆç±»ä¼¼ bundlerï¼‰å’Œç”Ÿæˆæ–‡æ¡£çš„å·¥å…·ã€‚é€šè¿‡ <a href=https://travis-ci.org/%60%60>travis-ci</a> ä¼šè‡ªåŠ¨ç”Ÿæˆæ¯æ¬¡ git push çš„å˜åŒ–ã€‚</p><p>API æ–‡æ¡£ï¼šhttp://icyleaf.github.io/gitlab.cr/</p><h2 id=ä¸ºä»€ä¹ˆå­¦ä¹ -crystal>ä¸ºä»€ä¹ˆå­¦ä¹  Crystalï¼Ÿ</h2><p><img src=https://cloud.githubusercontent.com/assets/209371/13291809/022e2360-daf8-11e5-8be7-d02c1c8b38fb.png alt="crystal logo" loading=lazy></p><p>Ruby çš„ç¼ºç‚¹ä¼—æ‰€å‘¨çŸ¥çš„ä¸€ä¸ªç‚¹å°±æ˜¯æ…¢ï¼Œè™½è¯´ç”¨å®ƒçš„äººéƒ½ä¸åœ¨ä¹ä¸»è¦æ˜¯ç”¨çš„çˆ½ï¼Œso whatï¼è¿™ä¸€è‡´å‘½çš„å‘å…¶å®é»˜é»˜çš„è¢«æ‰¿å—ç€ï¼Œå¾ˆå¤šçš„ Ruby å¼€å‘è€…ä¹Ÿåœ¨ä¸€ç›´å¯»è§…ç€æ–°çš„æ›´é«˜æ€§èƒ½çš„è¯­è¨€ã€‚æ¯”å¦‚ Gitlab çš„ Build Runner ä½¿ç”¨ Go å®ç°äº†ã€‚Rails çš„æ ¸å¿ƒå¼€å‘è€…åŸºäºå¤šå¹´å¯¹ Ruby çš„æ€¨å¿µè€Œå¼€å‘çš„ Elixirï¼Œè¿˜æœ‰ Firefox ä¸»å¯¼çš„ Rust ä¹Ÿå¸å¼•äº†ä¸å°‘ç›®å…‰ã€‚æœ‰é‚£ä¹ˆå¤šé€‰æ‹©ä¸ºä»€ä¹ˆååé€‰äº†è¿™ä¹ˆä¸€ä¸ªæ²¡æœ‰å¬è¯´è¿‡çš„è¯­è¨€ï¼Ÿ</p><h2 id=è¯­è¨€ä¼˜åŠ¿>è¯­è¨€ä¼˜åŠ¿</h2><ul><li>ç±»ä¼¼ Ruby é£æ ¼è¯­æ³•ï¼ˆä½†èˆå¼ƒäº†ä¸€äº›åŠ¨æ€ç‰¹æ€§ï¼‰</li><li>ä¸€åˆ‡éƒ½æ˜¯å¯¹è±¡ï¼ˆå’Œ Ruby ä¸€æ ·ï¼‰</li><li>è‡ªåŠ¨ç±»å‹æ¨èå’Œé™æ€ç±»å‹æ£€æŸ¥</li><li>æ”¯æŒæ–¹æ³•é‡è½½</li><li>æ˜“ç”¨çš„ C è¯­è¨€åº“çš„ç»‘å®šæœºåˆ¶</li><li>åŸºäº LLVMï¼ˆç›®å‰ä¸æ”¯æŒ Windowsï¼‰</li><li>ç¼–è¯‘æ€§è¯­è¨€ï¼Œå¯ä»¥æ‰“åŒ…äºŒè¿›åˆ¶åŒ…</li></ul><p>ä»…ä»…æ˜¯è¿™äº›å¯èƒ½å¤§å®¶è§‰å¾—æ²¡ä»€ä¹ˆï¼Œå…¶å®å¯¹æˆ‘æ¥è¯´ä¹Ÿä¸å¤Ÿå†²å‡»åŠ›ï¼Œæœ€é‡è¦çš„å…³é”®æ˜¯åœ¨æˆ‘ä»è®¢é˜…çš„ Ruby Weekly å‘¨åˆŠçœ‹åˆ° sidekiq çš„ä½œè€…ç”¨ crystal é‡æ–°å®ç°äº†æ ¸å¿ƒéƒ¨åˆ†å‘çš„<a href=http://www.mikeperham.com/2016/05/25/sidekiq-for-crystal/>åšæ–‡åˆ†äº«</a>ï¼Œæåˆ°çš„ä¸€ç‚¹ï¼š<strong>è‡³å°‘æ˜¯æ¯” ruby 2.3 å¤§éƒ¨åˆ†ä»£ç è¦å¿« 3-5 å€ï¼Œå‡å°‘è‡³å°‘ 3 å€çš„å†…å­˜å ç”¨</strong>ã€‚æ€€ç€æ€€ç–‘çš„æ€åº¦æˆ‘å¤§æ¦‚çš„ç ”ç©¶äº†è¿™ä¸ªè¯­è¨€ï¼Œç¡®å®çœ‹åˆ°äº†æ–°å¸Œæœ›ã€‚</p><table><thead><tr><th>åº“</th><th>è¯­è¨€</th><th>å¹¶å‘é‡</th><th>å¹³å‡å“åº”æ—¶é—´</th></tr></thead><tbody><tr><td><a href=https://github.com/sdogruyol/fast-http-server>fast-http-server</a></td><td><code>Crystal</code></td><td>18348.47rpm</td><td>8.67ms</td></tr><tr><td><a href=https://github.com/indexzero/http-server>http-server</a></td><td><code>Node.js</code></td><td>2105.55rpm</td><td>47.92ms</td></tr><tr><td><a href=https://docs.python.org/2/library/simplehttpserver.html>SimpleHTTPServer</a></td><td><code>Python</code></td><td>785.14rpm</td><td>1.91ms</td></tr></tbody></table><p>è¿˜æœ‰ä¸€ä»½ä¸€ç›´å†æ›´æ–°ç»´æŠ¤çš„è¯­è¨€ä¹‹é—´çš„<a href=https://github.com/kostya/benchmarks>è¯„æµ‹</a>ä»…ä¾›å‚è€ƒï¼Œçœ‹ç€é‡Œé¢çš„æ•°æ®è¿˜æ˜¯è›®å¸å¼•äººçš„ã€‚</p><blockquote><p>è¯„æµ‹æ•°æ®æ¥æº: <a href=http://www.akitaonrails.com/2016/05/31/flirting-with-crystal-a-rubyist-perspective>Flirting with Crystal, a Rubyist Perspective</a></p></blockquote><h2 id=è¯­è¨€å‹å¥½>è¯­è¨€å‹å¥½</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-ruby data-lang=ruby><span class=line><span class=ln> 1</span><span class=cl><span class=c1># File: server.cr</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl><span class=nb>require</span> <span class=s2>&#34;http/server&#34;</span>
</span></span><span class=line><span class=ln> 3</span><span class=cl>
</span></span><span class=line><span class=ln> 4</span><span class=cl><span class=n>server</span> <span class=o>=</span> <span class=no>HTTP</span><span class=o>::</span><span class=no>Server</span><span class=o>.</span><span class=n>new</span><span class=p>(</span><span class=mi>8080</span><span class=p>)</span> <span class=k>do</span> <span class=o>|</span><span class=n>context</span><span class=o>|</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>  <span class=n>context</span><span class=o>.</span><span class=n>response</span><span class=o>.</span><span class=n>content_type</span> <span class=o>=</span> <span class=s2>&#34;text/plain&#34;</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>  <span class=n>context</span><span class=o>.</span><span class=n>response</span><span class=o>.</span><span class=n>print</span> <span class=s2>&#34;Hello world! The time is </span><span class=si>#{</span><span class=no>Time</span><span class=o>.</span><span class=n>now</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl><span class=k>end</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>
</span></span><span class=line><span class=ln> 9</span><span class=cl><span class=nb>puts</span> <span class=s2>&#34;Listening on http://0.0.0.0:8080&#34;</span>
</span></span><span class=line><span class=ln>10</span><span class=cl><span class=n>server</span><span class=o>.</span><span class=n>listen</span>
</span></span></code></pre></div><p>çœ‹ç€æ˜¯ä¸æ˜¯æ˜¯ä¸æ˜¯å’Œ Ruby å·®ä¸å¤šã€‚é€šè¿‡å‘½ä»¤ç¼–è¯‘æˆäºŒè¿›åˆ¶åœ¨è¿è¡Œè¯•è¯•ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=ln>1</span><span class=cl>$ crystal build --release server.cr
</span></span><span class=line><span class=ln>2</span><span class=cl>$ ./server
</span></span><span class=line><span class=ln>3</span><span class=cl>Listening on http://0.0.0.0:8080
</span></span></code></pre></div><blockquote><p>macOS ç”¨æˆ·å¯ä»¥é€šè¿‡ brew è¿›è¡Œå®‰è£… <code>brew install crystal-lang</code></p></blockquote><h2 id=è¯­è¨€é™åˆ¶>è¯­è¨€é™åˆ¶</h2><ul><li>æ²¡æœ‰äº†å¼ºå¤§çš„é»‘é­”æ³•ï¼Œå°¤å…¶æ˜¯é’ˆå¯¹ <code>eval</code> å’Œ <code>send</code> ä¸¤ä¸ªçš„ç¼ºå¤±ã€‚æä¾›äº† macro çš„æ–¹å¼å¯ä»¥å®ç°éƒ¨åˆ†åŠ¨æ€å®šä¹‰æ–¹æ³•çš„æœºåˆ¶ã€‚</li><li>require å¼•å…¥å¿…é¡»æ”¾ç½®åœ¨å¤´éƒ¨ï¼ˆcrystal 0.7.7 ä»¥ä¸Šç‰ˆæœ¬çš„é™åˆ¶ï¼‰</li><li>æœ‰å¾…ä¼˜åŒ–çš„ gc æœºåˆ¶ï¼ˆç›®å‰é‡‡ç”¨çš„æ˜¯ <a href=https://zh.wikipedia.org/wiki/%E8%B2%9D%E5%A7%86%E5%9E%83%E5%9C%BE%E6%94%B6%E9%9B%86%E5%99%A8>Hans Boehm GC</a>ï¼‰</li><li>è¿˜åœ¨å¼€å‘ä¸­çš„è¯­è¨€ï¼ŒAPI å˜åŒ–å¾ˆå¿«</li></ul><h2 id=æœ€åæƒ³è¯´çš„è¯>æœ€åæƒ³è¯´çš„è¯</h2><p>æ€»ä½“æ¥è¯´æ˜¯ä¸€ä¸ªè®©äººçœ¼å‰ä¸€äº®çš„è¯­è¨€ï¼Œå¾ˆæ˜¯æœŸå¾…åç»­çš„è¿›åŒ–ã€‚æˆ‘ç›¸ä¿¡ sidekiq ä½œè€…çš„é‚£ç¯‡åšæ–‡ä¹Ÿè®©æ— æ•°å¼€å‘è€…çœ‹åˆ°äº†æ–°å¤§é™†ã€‚ç›®å‰é¡¹ç›®ä¹Ÿåœ¨<a href=https://salt.bountysource.com/teams/crystal-lang>æçŒ®</a>ä¸­ï¼Œå¦‚æœä½ å¯¹å®ƒæ„Ÿå…´è¶£ä¸å¦¨æ…·æ…¨çš„åŠ¨åŠ¨è‡ªå·±çš„é’±åŒ…ï¼ŒRuby çš„åˆ›å§‹äºº matz ç›´æ¥æçŒ®äº† $500ã€‚</p><h2 id=ç›¸å…³èµ„æº>ç›¸å…³èµ„æº</h2><ul><li>ä½œè€… Twitter: <a href=https://twitter.com/asterite>https://twitter.com/asterite</a></li><li>Awesome Crystal: <a href=http://awesome-crystal.com/>http://awesome-crystal.com/</a></li><li>Sidekiq for Crystal: <a href=http://www.mikeperham.com/2016/05/25/sidekiq-for-crystal/>http://www.mikeperham.com/2016/05/25/sidekiq-for-crystal/</a></li><li>Test Driving Sidekiq and Crystal: <a href=http://www.mikeperham.com/2016/06/14/test-driving-sidekiq-and-crystal/>http://www.mikeperham.com/2016/06/14/test-driving-sidekiq-and-crystal/</a></li><li>Flirting with Crystal, a Rubyist Perspective: <a href=http://www.akitaonrails.com/2016/05/31/flirting-with-crystal-a-rubyist-perspective>http://www.akitaonrails.com/2016/05/31/flirting-with-crystal-a-rubyist-perspective</a></li></ul></div></div><div class=post-nav><a href=https://icyleaf.com/2016/07/intro-fastlane-automation-for-ios-and-android/ class=prev rel=prev title=Fastlane><i class="iconfont icon-left"></i>&nbsp;Fastlane</a>
<a href=https://icyleaf.com/2016/07/fastlane-in-action/ class=next rel=next title="æ·±å…¥æµ…å‡º Fastlane ä¸€çœ‹ä½ å°±æ‡‚">æ·±å…¥æµ…å‡º Fastlane ä¸€çœ‹ä½ å°±æ‡‚&nbsp;<i class="iconfont icon-right"></i></a></div><div class=post-comment><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//icyleaf.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></article></div></main><footer class=footer><div class=copyright>&copy;
<span itemprop=copyrightYear>2005 - 2022</span>
<span>ğŸº</span>
<span class=author itemprop=copyrightHolder><a href=https://icyleaf.com/>icyleaf</a></span></div></footer><script src=https://fastly.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js crossorigin=anonymous></script>
<script defer src=https://icyleaf.com/js/vendor_main.min.js></script>
<script src=https://fastly.jsdelivr.net/npm/pangu@4.0.7/dist/browser/pangu.min.js integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin=anonymous></script>
<script>pangu.spacingPage()</script><script type=module>
  
  import PhotoSwipeLightbox from '\/photoswipe\/photoswipe-lightbox.esm.js';

  const lightbox = new PhotoSwipeLightbox({
    gallery: '#post-gallery',
    children: 'a.gallery-item',
    pswpModule: '\/photoswipe\/photoswipe.esm.js',
  });
  lightbox.init();
</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-TKQBZ7R259"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-TKQBZ7R259")</script></div></body></html>