<!DOCTYPE html>
<html lang="en-us">
<head>

    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

  	<meta property="og:title" content=" Fastlane - iOS å’Œ Android çš„è‡ªåŠ¨åŒ–æ„å»ºå·¥å…· &middot;  icyleaf" />
  	<meta property="og:site_name" content="icyleaf" />
  	<meta property="og:url" content="http://icyleaf.com/2016/07/intro-fastlane-automation-for-ios-and-android/" />

    
  	<meta property="og:type" content="article" />

    <meta property="og:article:published_time" content="2016-07-11T12:36:07&#43;08:00" />

    
    <meta property="og:article:tag" content="iOS" />
    
    <meta property="og:article:tag" content="Android" />
    
    <meta property="og:article:tag" content="CI" />
    
    <meta property="og:article:tag" content="CD" />
    
    <meta property="og:article:tag" content="Ruby" />
    
    <meta property="og:article:tag" content="Fastlane" />
    
    

  <title>
     Fastlane - iOS å’Œ Android çš„è‡ªåŠ¨åŒ–æ„å»ºå·¥å…· &middot;  icyleaf
  </title>

    <meta name="description" content="çƒ­çˆ±æˆ·å¤–çš„ç å†œã€ä¸‹å¨åˆå¿ƒè€…" />

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="http://icyleaf.com/images/favicon.ico">
	  <link rel="apple-touch-icon" href="http://icyleaf.com/images/apple-touch-icon.png" />

    <link rel="stylesheet" type="text/css" href="http://icyleaf.com/css/screen.css" />
    <link rel="stylesheet" type="text/css" href="http://icyleaf.com/css/nav.css" />



    
        <link href="feed.xml" rel="alternate" type="application/rss+xml" title="icyleaf" />
    
    <meta name="generator" content="Hugo 0.20-DEV" />

    <link rel="canonical" href="http://icyleaf.com/2016/07/intro-fastlane-automation-for-ios-and-android/" />

    
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-2570916-5', 'auto');
      ga('send', 'pageview');

    </script>
    

    
</head>
<body class="nav-closed">

  <div class="nav">
  <h3 class="nav-title">Menu</h3>
  <a href="#" class="nav-close">
    <span class="hidden">Close</span>
  </a>
  <ul>
    

    
      
      <li class="nav-opened" role="presentation">
      	<a href="http://icyleaf.com/">Home</a>
      </li>
    
      
      <li class="nav-opened" role="presentation">
      	<a href="http://icyleaf.com/categories/technology">Technology</a>
      </li>
    
      
      <li class="nav-opened" role="presentation">
      	<a href="http://icyleaf.com/tags">Tags</a>
      </li>
    
      
      <li class="nav-opened" role="presentation">
      	<a href="http://icyleaf.com/about">About</a>
      </li>
    
  </ul>

  
    <a class="subscribe-button icon-feed" href="http://icyleaf.com/feed.xml">Subscribe</a>
  
</div>
<span class="nav-cover"></span>


 <div class="site-wrapper">


  <header class="main-header post-head no-cover">


  <nav class="main-nav overlay clearfix">
  
    <a class="blog-logo" href="http://icyleaf.com/"><img src="http://icyleaf.com/images/icyleaf-icon.png" alt="Blog Logo" /></a>
  

  
    <a class="menu-button" href="#"><span class="burger">&#9776;</span><span class="word">Menu</span></a>
  
</nav>
  
</header>

<main class="content" role="main">
  <article class="post post">
    <header class="post-header">
      <h1 class="post-title">Fastlane - iOS å’Œ Android çš„è‡ªåŠ¨åŒ–æ„å»ºå·¥å…·</h1>
      <small></small>

      <section class="post-meta">
      
      
        <time class="post-date" datetime="2016-07-11T12:36:07&#43;08:00">
          Jul 11, 2016
        </time>
      
       
        <span class="post-tag small"><a href="http://icyleaf.com/tags/ios/">#iOS</a></span>
       
        <span class="post-tag small"><a href="http://icyleaf.com/tags/android/">#Android</a></span>
       
        <span class="post-tag small"><a href="http://icyleaf.com/tags/ci/">#CI</a></span>
       
        <span class="post-tag small"><a href="http://icyleaf.com/tags/cd/">#CD</a></span>
       
        <span class="post-tag small"><a href="http://icyleaf.com/tags/ruby/">#Ruby</a></span>
       
        <span class="post-tag small"><a href="http://icyleaf.com/tags/fastlane/">#Fastlane</a></span>
       
      </section>
    </header>

    <section class="post-content">
      

<h3 id="ç³»åˆ—ç´¢å¼•">ç³»åˆ—ç´¢å¼•</h3>

<ol>
<li><a href="https://icyleaf.com/2016/07/intro-fastlane-automation-for-ios-and-android/">Fastlane - iOS å’Œ Android çš„è‡ªåŠ¨åŒ–æ„å»ºå·¥å…·</a></li>
<li><a href="https://icyleaf.com/2016/07/fastlane-in-action/">æ·±å…¥æµ…å‡º Fastlane ä¸€çœ‹ä½ å°±æ‡‚</a></li>
<li><a href="https://icyleaf.com/2017/03/match-in-action/">ä½ è™æˆ‘åƒç™¾éï¼Œæˆ‘å¾…ä½ å¦‚åˆæ‹ï¼Œç›´åˆ°æˆ‘é‡åˆ° match</a></li>
</ol>

<h2 id="å‰è¨€">å‰è¨€</h2>

<p>è¿™ç¯‡æ–‡ç« æ•´ç†äº†å¾ˆä¹…ï¼Œå‘ç°åœ¨ä¸€ç¯‡æ–‡ç« é‡Œæ— æ³•ä¸€ä¸€è®²è¿°å’Œå…¨é¢çš„è¦†ç›–ï¼Œåˆæ­¥æ‰“ç®—æ˜¯æŠŠè¿™ä¸ªåšæˆä¸€ä¸ªç³»åˆ—ï¼Œæƒ³åˆ°å“ªé‡Œå°±å†™åˆ°å“ªé‡Œï¼Œå¦‚æœæ°å¥½æœ‰è¯»è€…çˆ±æˆ´å¹¶æœ‰ä¸€äº›å»ºè®®åé¦ˆï¼Œæˆ‘ä¹Ÿä¼šæ ¹æ®å¤§å®¶çš„éœ€è¦è°ƒæ•´å†…å®¹çš„æ–¹å‘å’Œæ·±åº¦ã€‚è®ºç¾å‰§çš„ç¼–å‰§çš„é‡è¦æ€§(ç¬‘)ã€‚</p>

<h2 id="åˆæ¬¡é‚‚é€…">åˆæ¬¡é‚‚é€…</h2>

<p>åˆæ—¶ fastlane çš„æ—¶å€™æ˜¯å»å¹´çš„ 11 æœˆä»½ï¼Œçœ‹åˆ°å¤§å°±æ„Ÿè§‰é‡åˆ°äº†ç¥å™¨ä¸€èˆ¬çš„æƒŠå–œã€‚å®ƒä¸€ä¸ªé’ˆå¯¹äº iOS å’Œ Androidï¼ˆåæ¥æ‰æ”¯æŒçš„ï¼‰å…¨æ–¹ä½è‡ªåŠ¨åŒ–æµç¨‹çš„å·¥å…·ï¼Œè¯·çœ‹ä¸‹å›¾</p>

<p><img src="https://fastlane.tools/assets/img/intro-fastlane-tree.png" alt="fastlane-flow" /></p>

<p>æµç¨‹å›¾ä¸­æ¯ä¸ªç¯èŠ‚éƒ½æ˜¯ç‹¬ç«‹çš„å·¥å…·ï¼Œæ¯ä¸ªå·¥å…·åªå¹²ä¸€ä»¶äº‹æƒ…ï¼Œåˆ†å·¥éå¸¸çš„æ˜ç¡®ã€‚ä»¥ä¸‹æ˜¯æˆ‘åœ¨å›¢é˜Ÿé¡¹ç›®ä¸­ç”¨åˆ°çš„ï¼š</p>

<ul>
<li><a href="https://github.com/fastlane/fastlane/tree/master/scan">scan</a> è‡ªåŠ¨åŒ–æµ‹è¯•å·¥å…·ï¼Œå¾ˆå¥½çš„å°è£…äº† Unit Test</li>
<li><a href="https://github.com/fastlane/fastlane/tree/master/sigh">sigh</a> é’ˆå¯¹äº iOS é¡¹ç›®å¼€å‘è¯ä¹¦å’Œ Provision file çš„ä¸‹è½½å·¥å…·</li>
<li><a href="https://github.com/fastlane/fastlane/tree/master/match">match</a> åŒæ­¥å›¢é˜Ÿæ¯ä¸ªäººçš„è¯ä¹¦å’Œ Provision file çš„è¶…èµå·¥å…·ï¼Œè§„èŒƒ<a href="https://codesigning.guide/">ä»£ç ç­¾å</a>ï¼ˆè™½ç„¶é‡Œé¢æœ‰äº›è®¾å®šæ¯”è¾ƒæŸï¼‰</li>
<li><a href="https://github.com/fastlane/fastlane/tree/master/gym">gym</a> é’ˆå¯¹äº iOS æ‰“åŒ…å’Œç­¾åçš„è‡ªåŠ¨åŒ–å·¥å…·ï¼Œå®Œçˆ† <code>xctool</code>ï¼Œè€Œ <code>shenzhen</code> ä¹Ÿæ”¾å¼ƒç»´æŠ¤</li>
<li><a href="https://github.com/icyleaf/fastlane-qyer">qyer</a> å›¢é˜Ÿå®šåˆ¶çš„å·¥å…·ï¼Œç”¨äºæ£€æµ‹åŒ…å’Œä¸Šä¼ åˆ°è‡ªå·±çš„å†…éƒ¨åˆ†å‘å¹³å°</li>
<li><a href="https://github.com/fastlane/fastlane">fastlane</a> ç®€å•ç†è§£å°±æ˜¯æ§åˆ¶æ•´ä½“æµç¨‹å’Œå®ç°çš„æ¡†æ¶å®¹å™¨</li>
</ul>

<p>åˆ©ç”¨ç›®å‰æ”¯æŒçš„å·¥å…·å¯ä»¥åšæ‰€æœ‰åŒ…å«è‡ªåŠ¨åŒ–å’Œå¯æŒç»­åŒ–æ„å»ºçš„æ¯ä¸ªç¯èŠ‚ï¼Œæ¯”å¦‚å•å…ƒæµ‹è¯•ã€æˆªå›¾ã€åˆ†å‘æ¸ é“ã€ä¸Šä¼ å…ƒæ•°æ®å’Œ ipa åŒ…æäº¤å®¡æ ¸ç­‰ç­‰ã€‚çœ‹åˆ°è¿™è¿™äº›æ˜¯ä¸æ˜¯å¾ˆå…´å¥‹ï¼Ÿ
åæ­£æˆ‘çœ‹åˆ°ä¹‹åå°±åƒé»‘å¤œçœ‹åˆ°äº†å…‰æ˜ï¼Œæœæ–­æŠ›å¼ƒè‡ªå·±ç»´æŠ¤çš„è„šæœ¬ã€‚</p>

<h2 id="åŸºæœ¬æ„æˆ">åŸºæœ¬æ„æˆ</h2>

<p>Fastlane æä¾›çš„æµç¨‹çš„ä¼—å¤šå·¥å…·éƒ½æ˜¯å¯ä»¥ç‹¬ç«‹å­˜åœ¨å’Œä½¿ç”¨ï¼ˆæä¾› cli å‘½ä»¤ï¼‰ï¼Œä¹Ÿå¯ä»¥ç»Ÿä¸€ç”± fastlane æ¥æ§åˆ¶ã€‚å®ƒåœ¨ä½¿ç”¨ä¸­æå‡ºäº†ä¸¤ä¸ªæ¦‚å¿µï¼š</p>

<ul>
<li><code>action</code>: Fastlane çš„æ’ä»¶ï¼Œæˆªè‡³å½“å‰å†…ç½® 165 ä¸ªè‡³å¤šï¼Œä¸è¿‡æ¯ä¸ªåŠ¨ä½œçš„é¢—ç²’åº¦å¤§å°ä¸ä¸€ã€‚<a href="https://github.com/fastlane/fastlane/blob/master/fastlane/docs/Actions.md">æŸ¥çœ‹è¯¦æƒ…</a></li>
<li><code>lane</code>: Fastlane çš„ä»»åŠ¡ï¼ˆæˆ–è€…å¯ä»¥ç†è§£ä¸ºå‘½ä»¤ï¼‰ï¼Œä¸€ä¸ªå¯ä»¥åŒ…å«å¤šä¸ª lanesï¼Œé€šè¿‡ <code>fastlane</code> cli ä¼ å…¥åˆ¶å®šçš„ lane æ¥æ‰§è¡Œã€‚</li>
</ul>

<p>å…‰è¯´ä¸å¹²å‡æŠŠå¼ï¼Œçœ‹æ³•å®ï¼š</p>

<pre><code class="language-ruby">lane :adhoc do
  # build version è‡ªåŠ¨åŠ ä¸€
  increment_build_number
  # æ‰§è¡Œ pod install
  cocoapods
  # è°ƒç”¨ facebook çš„ xctool è¿›è¡Œå•å…ƒæµ‹è¯•
  xctool
  # å¯¹æ¨¡æ‹Ÿå™¨è¿è¡Œçš„ App è¿›è¡Œæˆªå›¾
  snapshot
  # å®‰è£…å›¢é˜Ÿè¯ä¹¦å’Œ profiles
  match
  # ä¸Šä¼  App å…ƒæ•°æ®å’Œç­¾åçš„ ipa åˆ° iTunes Conneects
  deliver
  # æŠŠæˆªå›¾å¥—è¿›ä¸€ä¸ªè®¾å¤‡å¤–å£³
  frameit
  # å…è®¸è‡ªå®šä¹‰çš„è„šæœ¬æ–‡ä»¶
  sh &quot;./customScript.sh&quot;
  # å‘æ¶ˆæ¯åˆ° slack
  slack
end
</code></pre>

<h2 id="å®‰è£…">å®‰è£…</h2>

<p>å·¥å…·çš„èµ·æºæœ¬èº«æ˜¯ä¸“é—¨é’ˆå¯¹ iOS é¡¹ç›®ï¼Œå› æ­¤ç›®å‰ä¾èµ–äº macOS 10.9 ä»¥ä¸Šç³»ç»Ÿï¼ŒRuby æ˜¯ä¸€ä¸ªä¼—æ‰€å‘¨çŸ¥çš„è½®å­å‘æ˜è€…ï¼Œå¾ˆå¤šçŸ¥åçš„å·¥å…·éƒ½æ˜¯å®ƒå¼€å‘çš„ï¼Œfastlane ä¹Ÿä¸ä¾‹å¤–ã€‚ä»¥ä¸‹æ˜¯ä¾èµ–ç¯å¢ƒï¼š</p>

<ul>
<li>macOS 10.9+</li>
<li>Ruby 2.0+ (æ¨è rvm æˆ– rbenv å®‰è£…)</li>
<li>Xcode + command line tools</li>
</ul>

<p>ä»¥ä¸Šä¾èµ–é…ç½®å¥½ä¹‹åå°±å¯ä»¥é€šè¿‡ rubygem è¿›è¡Œå®‰è£…ï¼š</p>

<pre><code class="language-bash">$ [sudo] gem install fastlane
</code></pre>

<p>fastlane é»˜è®¤ä¼šæŠŠæ ¸å¿ƒå·¥å…·éƒ½ä¼šè¿›è¡Œå®‰è£…ï¼Œéœ€è¦å¤§å®¶è€å¿ƒç­‰å¾…ä¸€ä¼š&hellip;</p>

<h2 id="åˆå§‹åŒ–">åˆå§‹åŒ–</h2>

<p>æœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥åˆå§‹åŒ–ï¼Œä¸€ç§æ˜¯é€šè¿‡å‘½ä»¤ï¼Œä¸€ç§æ˜¯è‡ªå·±åˆ›å»ºæŒ‡å®šçš„ï¼ˆè‡³å°‘åŒ…å«ä¸€ä¸ªï¼‰çº¦æŸæ–‡ä»¶ <code>Fastfile</code>ã€‚é¦–å…ˆæˆ‘å…ˆä»‹ç»å¤§å®¶ä½¿ç”¨å‘½ä»¤åˆå§‹åŒ–:</p>

<pre><code class="language-bash"># åˆ‡æ¢åªä½ å¼€å‘çš„ iOS é¡¹ç›®æ ¹ç›®å½•
$ cd to/your/ios/project
$ fastlane init
[11:46:34]: Detected iOS/Mac project in current directory...
[11:46:34]: This setup will help you get up and running in no time.
[11:46:34]: fastlane will check what tools you're already using and set up
[11:46:34]: the tool automatically for you. Have fun!
[11:46:34]: Created new folder './fastlane'.
...
Your Apple ID (e.g. fastlane@krausefx.com): xxx@gmail.com
[11:46:59]: Verifying if app is available on the Apple Developer Portal and iTunes Connect...
[11:46:59]: Starting login with user 'xxx@gmail.com'
Multiple teams found on the Developer Portal, please enter the number of the team you want to use:
1) XXXXXXXXXX &quot;XXXXXXXXXX&quot; (In-House)
2) YYYYYYYYYY &quot;YYYYYYYYYY&quot; (Company/Organization)
+----------------+----------------------------------------------------------------------------+
|                                       Detected Values                                       |
+----------------+----------------------------------------------------------------------------+
| Apple ID       | xxx@gmail.com                                                              |
| App Name       | Hello Fastlane                                                             |
| App Identifier | com.icyleaf.demo.HelloFastlane                                             |
| Workspace      | /Users/icyleaf/Development/iOS/HelloFastlane.xcworkspace                   |
+----------------+----------------------------------------------------------------------------+

[11:48:36]: This app identifier doesn't exist on iTunes Connect yet, it will be created for you
Please confirm the above values (y/n) n
App Identifier (com.krausefx.app): com.icyleaf.demo.HelloFastlane
[11:50:04]: Created new file './fastlane/Appfile'. Edit it to manage your preferred app metadata information.
Optional: The scheme name of your app (If you don't need one, just hit Enter): AppDemo
[11:50:40]: 'snapshot' not enabled.
[11:50:40]: 'cocoapods' enabled.
[11:50:40]: 'carthage' not enabled.
[11:50:40]: Created new file './fastlane/Fastfile'. Edit it to manage your own deployment lanes.
[11:50:40]: fastlane will send the number of errors for each action to
[11:50:40]: https://github.com/fastlane/enhancer to detect integration issues
[11:50:40]: No sensitive/private information will be uploaded
[11:50:40]: Successfully finished setting up fastlane
</code></pre>

<p>è¿™éƒ¨åˆ†ä¼šè¿›è¡Œè”ç½‘ï¼Œå¹¶æç¤ºè¾“å…¥ä½ çš„ Apple ID æ¥éªŒè¯ä½ çš„åº”ç”¨æ˜¯å¦å­˜åœ¨ï¼ˆæ²¡æœ‰ä¹Ÿä¼šå¸®ä½ è‡ªåŠ¨åˆ›å»ºï¼‰å¹¶è·å–ç›¸åº”çš„å…³é”®ä¿¡æ¯ï¼Œé€šè¿‡ä¸€ç³»åˆ—çš„æµç¨‹ä¸‹æ¥æŠŠè·å–çš„ä¿¡æ¯ä¼šåˆ›å»ºä¸€ä¸ª <code>fastlane</code> ç›®å½•
å¹¶å¹¶å†™å…¥ç›¸åº”çš„æ–‡ä»¶ï¼ˆå¦‚æœæŸäº›ä¿¡æ¯æ²¡æœ‰å¡«å†™ä¼šå¿½ç•¥æŸäº›æ–‡ä»¶çš„ç”Ÿæˆï¼‰ï¼š</p>

<ul>
<li><code>Fastfile</code>: æ ¸å¿ƒæ–‡ä»¶ï¼Œä¸»è¦ç”¨äº cli è°ƒç”¨å’Œå¤„ç†å…·ä½“çš„æµç¨‹ï¼Œ<a href="https://github.com/fastlane/fastlane/tree/master/fastlane/docs#fastfile">äº†è§£è¯¦æƒ…</a></li>
<li><code>Appfile</code>: ä» Apple Developer Portal è·å–å’Œé¡¹ç›®ç›¸å…³çš„ä¿¡æ¯ï¼Œ<a href="https://github.com/fastlane/fastlane/blob/master/fastlane/docs/Appfile.md">äº†è§£è¯¦æƒ…</a></li>
<li><code>Deliverfile</code>: ä» iTunes Connect è·å–å’Œé¡¹ç›®ç›¸å…³çš„ä¿¡æ¯ï¼Œ<a href="https://github.com/fastlane/fastlane/blob/master/deliver/Deliverfile.md">äº†è§£è¯¦æƒ…</a></li>
</ul>

<p>æŠ›å¼€å…¶ä»–çš„å‡ ä¸ªæ–‡ä»¶å…ˆä¸è¯´ï¼Œå¤§å®¶å…ˆæŠŠæ³¨æ„åŠ›æ”¾åˆ°åˆšåˆ›å»ºå¥½çš„ <code>Fastfile</code> æ–‡ä»¶ä¸Šé¢ï¼ˆå¯èƒ½æœ‰å˜åŒ–ï¼Œä»…ä½œå‚è€ƒï¼‰ï¼Œå¦‚æœå¤§å®¶å¯¹ Ruby æœ‰äº†è§£çš„è¯ï¼Œå®ƒå®šä¹‰çš„ DSL è¯­è¨€éå¸¸ç±»ä¼¼ <a href="https://github.com/ruby/rake">rake</a>ï¼Œä½†æµç¨‹ä¸Šæœ‰å‚è€ƒçš„ <a href="https://github.com/rspec/rspec">rspec</a>ï¼Œä¸€æ—¦ä¸æ»¡è¶³éœ€æ±‚è¿˜å¯ä»¥ä½¿ç”¨ Ruby ä»£ç æ¥å®ç°ã€‚å•å‡­ DSL è¯­è¨€æ¥è¯´å°±ç®—å¯¹äº Ruby æ²¡æœ‰åŸºç¡€çš„ä¹Ÿèƒ½å¾ˆå¿«æŒæ¡ï¼Œå¤§å¤šéƒ½æ˜¯æ¯”è¾ƒç®€å•æ˜“æ‡‚çš„è¯­æ³•ã€‚</p>

<pre><code class="language-ruby"># Customise this file, documentation can be found here:
# https://github.com/fastlane/fastlane/tree/master/fastlane/docs
# All available actions: https://github.com/fastlane/fastlane/blob/master/fastlane/docs/Actions.md
# can also be listed using the `fastlane actions` command

# Change the syntax highlighting to Ruby
# All lines starting with a # are ignored when running `fastlane`

# If you want to automatically update fastlane if a new version is available:
# update_fastlane

# This is the minimum version number required.
# Update this, if you use features of a newer version
fastlane_version &quot;1.95.0&quot;

default_platform :ios

platform :ios do
  # æ‰§è¡Œæ‰€æœ‰å‘½ä»¤å‰éƒ½ä¼šå…ˆæ‰§è¡Œè¿™é‡Œ
  before_all do
    # ENV[&quot;SLACK_URL&quot;] = &quot;https://hooks.slack.com/services/...&quot;
    cocoapods
  end

  desc &quot;Runs all the tests&quot;
  lane :test do
    scan
  end

  desc &quot;Submit a new Beta Build to Apple TestFlight&quot;
  desc &quot;This will also make sure the profile is up to date&quot;
  lane :beta do
    # match(type: &quot;appstore&quot;) # more information: https://codesigning.guide
    gym(scheme: &quot;AppDemo&quot;) # Build your app - more options available
    pilot

    # sh &quot;your_script.sh&quot;
    # You can also use other beta testing services here (run `fastlane actions`)
  end

  desc &quot;Deploy a new version to the App Store&quot;
  lane :appstore do
    # match(type: &quot;appstore&quot;)
    # snapshot
    gym(scheme: &quot;AppDemo&quot;) # Build your app - more options available
    deliver(force: true)
    # frameit
  end

  # ä½ å¯ä»¥å®šä¹‰å±äºè‡ªå·±çš„ laneï¼ˆä»»åŠ¡ï¼‰
  lane :hello do
    puts &quot;hello world&quot;
  end

  # ä»…å½“ä¸Šè¿°æµç¨‹å…¨éƒ¨æ‰§è¡ŒæˆåŠŸåæ‰ä¼šèµ°è¿™é‡Œã€‚å…¶å®åº”è¯¥å®šä¹‰ä¸º after_success
  after_all do |lane|
    # slack(
    #   message: &quot;Successfully deployed new App Update.&quot;
    # )
  end

  # å¦‚æœæµç¨‹å‘ç”Ÿå¼‚å¸¸ä¼šèµ°è¿™é‡Œå¹¶ç»ˆæ­¢
  error do |lane, exception|
    # slack(
    #   message: exception.message,
    #   success: false
    # )
  end
end
</code></pre>

<p>é€šè¿‡ä¸Šé¢çš„æ³¨è§£ï¼Œæˆ‘æƒ³å¤§å®¶å¯¹å®ƒå·²ç»æœ‰äº†åˆæ­¥çš„äº†è§£ï¼Œé‚£ä¹ˆå®šä¹‰å®Œä¹‹åè¯¥å¦‚ä½•æ‰§è¡Œå‘¢ï¼Ÿå›åˆ°åˆšæ‰çš„ç»ˆç«¯ï¼ˆå…³é—­äº†ï¼Ÿé‚£å†åˆ‡æ¢åˆ°åˆšæ‰çš„ iOS é¡¹ç›®çš„æ ¹ç›®å½•ï¼‰ï¼š</p>

<pre><code class="language-bash">$ fastlane ios hello
[11:56:24]: -------------------------------------------------
[11:56:24]: --- Step: Verifying required fastlane version ---
[11:56:24]: -------------------------------------------------
[11:56:24]: fastlane version valid
[11:56:24]: ------------------------------
[11:56:24]: --- Step: default_platform ---
[11:56:24]: ------------------------------
[11:56:24]: Driving the lane 'ios hello' ğŸš€
[11:56:24]: -----------------------
[11:56:24]: --- Step: cocoapods ---
[11:56:24]: -----------------------
[11:56:24]: $ pod install
...
[11:56:28]: hello world

+------+-------------------------------------+-------------+
|                     fastlane summary                     |
+------+-------------------------------------+-------------+
| Step | Action                              | Time (in s) |
+------+-------------------------------------+-------------+
| 1    | Verifying required fastlane version | 0           |
| 2    | default_platform                    | 0           |
| 3    | cocoapods                           | 4           |
+------+-------------------------------------+-------------+

[11:56:28]: fastlane.tools finished successfully ğŸ‰
</code></pre>

<p>å“’å“’ï¼ä¸€ä¸ªç®€å•çš„ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼</p>

<p>å¦‚æœå¤§å®¶æ³¨æ„è§‚å¯Ÿä¸Šé¢çš„æ–‡ä»¶å¯èƒ½æ³¨æ„åˆ°ä¸€äº›å°ç»†èŠ‚ï¼š</p>

<pre><code class="language-ruby"># è‡ªåŠ¨æ›´æ–° fastlane å·¥å…·ï¼Œéœ€è¦ rubygems &gt;= 2.1.0
update_fastlane

# æœ€ä½å…¼å®¹ç‰ˆæœ¬ï¼Œç”±äº fastlane è¿˜æ˜¯é€æ­¥å¥å£®çš„é˜¶æ®µæ›´æ–°é€Ÿåº¦è¿˜æ˜¯è›®å¿«çš„ï¼Œ
# ä¸ºäº†é˜²æ­¢æ–°ç‰¹æ€§åœ¨æ—§ç‰ˆæœ¬çš„ä¸æ”¯æŒä¼šå¼ºåˆ¶è®¾ç½®ä¸€ä¸ªæœ€ä½å…¼å®¹ç‰ˆæœ¬
# ä¸è¿‡å·¥å…·ç‰¹åˆ«è´´å¿ƒçš„ä¼šåœ¨æ¯æ¬¡æ‰§è¡Œä¹‹åä¼šæ£€æŸ¥æ˜¯å¦æœ‰æ–°ç‰ˆæœ¬ï¼Œå¦‚æœæœ‰ä¼šåœ¨æœ€åæœ«å°¾è¿½åŠ æ–°ç‰ˆæœ¬æé†’
fastlane_version &quot;1.95.0&quot;

# é»˜è®¤ä½¿ç”¨å¹³å°æ˜¯ iosï¼Œä¹Ÿå°±æ˜¯è¯´æ–‡ä»¶å¯ä»¥å®šä¹‰å¤šä¸ªå¹³å°ï¼Œ
# é€šè¿‡ä¸Šè¿°æ‰§è¡Œçš„å‘½ä»¤ä¹Ÿèƒ½çœ‹å‡ºæ¥æ˜¯æ‰§è¡Œçš„ ios å¹³å°ä¸‹é¢çš„ hello ä»»åŠ¡ã€‚
# è¿™ä¸ªçš„ä½œç”¨æ˜¯å¯ä»¥åœ¨æ‰§è¡Œ fastlane çš„æ—¶å€™çœç•¥ iosï¼Œä¸ä¿¡ä½ æ‰§è¡Œ fastlane hello è¯•è¯•ã€‚
default_platform :ios
</code></pre>

<h2 id="android-çš„æ”¯æŒ">Android çš„æ”¯æŒ</h2>

<p>è¿™ä¸ªçš„æ”¯æŒæˆ‘è§‰å¾—å…³é”®æ˜¯ç¤¾åŒºçš„å‘¼å£°å¤ªå¤§ï¼ŒåŠ ä¸Šè´¡çŒ®è€…çš„çƒ­æƒ…ï¼ˆæˆ‘æäº¤è¿‡è®¸å¤š issues å’Œä¸ªåˆ« PLï¼Œå“åº”éå¸¸çš„è¿…é€Ÿï¼‰å¾ˆå¿«å°±åŠ ä¸Šäº†å…¶æ”¯æŒï¼Œ
ä½†å…·ä½“çš„ç‰¹æ€§ä¸æ˜¯ç‰¹åˆ«å¤šï¼Œä¸»è¦æ˜¯å¯¹äº <code>gradle</code> çš„å°è£…ï¼Œæˆ‘å…ˆä¸åšå±•å¼€ä»‹ç»ï¼Œå¤§å®¶å¯ä»¥å…ˆçœ‹çœ‹<a href="https://github.com/fastlane/fastlane/blob/master/fastlane/docs/Android.md">å®˜æ–¹æ–‡æ¡£</a>ï¼Œå¦‚æœåç»­æœ‰ç‰¹åˆ«ä¸æ˜ç™½çš„åœ°æ–¹æˆ‘åœ¨åšå…·ä½“çš„è®²è§£ã€‚</p>

<p>ä»Šå¤©å°±å…ˆå†™åˆ°è¿™é‡Œåç»­æˆ‘ä¼šç»§ç»­æ•´ç†æ›´å¤šçš„ä½¿ç”¨æŒ‡å—å’Œå®æˆ˜èŒƒä¾‹å…±å¤§å®¶å‚è€ƒï¼Œæœ€åç»™å¤§å®¶é™„èµ å®˜æ–¹ç»™å¤§å®¶çš„ä¸€äº›<a href="https://github.com/fastlane/examples">èŒƒä¾‹</a>ã€‚</p>

    </section>

  <footer class="post-footer">
    
    <figure class="author-image">
        <a class="img" href="http://icyleaf.com/" style="background-image: url(http://icyleaf.com/images/icyleaf-icon.png)"><span class="hidden">icyleaf's Picture</span></a>
    </figure>
    

    





<section class="author">
  <h4><a href="http://icyleaf.com/">icyleaf</a></h4>
  
  <p>çƒ­çˆ±æˆ·å¤–çš„ç å†œã€ä¸‹å¨åˆå¿ƒè€…</p>
  
  <div class="author-meta">
    <span class="author-location icon-location">Beijing, China</span>
    <span class="author-link icon-link"><a href="http://icyleaf.com">http://icyleaf.com</a></span>
  </div>
</section>



    
<section class="share">
  <h4>Share this post</h4>
  <a class="icon-twitter" href="https://twitter.com/share?text=Fastlane%20-%20iOS%20%e5%92%8c%20Android%20%e7%9a%84%e8%87%aa%e5%8a%a8%e5%8c%96%e6%9e%84%e5%bb%ba%e5%b7%a5%e5%85%b7&nbsp;-&nbsp;icyleaf&amp;url=http%3a%2f%2ficyleaf.com%2f2016%2f07%2fintro-fastlane-automation-for-ios-and-android%2f"
      onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
      <span class="hidden">Twitter</span>
  </a>
  <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=http%3a%2f%2ficyleaf.com%2f2016%2f07%2fintro-fastlane-automation-for-ios-and-android%2f"
      onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
      <span class="hidden">Facebook</span>
  </a>
  <a class="icon-pocket" href="javascript:(function(){var e=function(t,n,r,i,s){var o=[9021033,9865253,1031839,4100432,6303539,5574555,5592056,4410910,3719660,2534955];var i=i||0,u=0,n=n||[],r=r||0,s=s||0;var a={'a':97,'b':98,'c':99,'d':100,'e':101,'f':102,'g':103,'h':104,'i':105,'j':106,'k':107,'l':108,'m':109,'n':110,'o':111,'p':112,'q':113,'r':114,'s':115,'t':116,'u':117,'v':118,'w':119,'x':120,'y':121,'z':122,'A':65,'B':66,'C':67,'D':68,'E':69,'F':70,'G':71,'H':72,'I':73,'J':74,'K':75,'L':76,'M':77,'N':78,'O':79,'P':80,'Q':81,'R':82,'S':83,'T':84,'U':85,'V':86,'W':87,'X':88,'Y':89,'Z':90,'0':48,'1':49,'2':50,'3':51,'4':52,'5':53,'6':54,'7':55,'8':56,'9':57,'\/':47,':':58,'?':63,'=':61,'-':45,'_':95,'&':38,'$':36,'!':33,'.':46};if(!s||s==0){t=o[0]+t}for(var f=0;f<t.length;f++){var l=function(e,t){return a[e[t]]?a[e[t]]:e.charCodeAt(t)}(t,f);if(!l*1)l=3;var c=l*(o[i]+l*o[u%o.length]);n[r]=(n[r]?n[r]+c:c)+s+u;var p=c%(50*1);if(n[p]){var d=n[r];n[r]=n[p];n[p]=d}u+=c;r=r==50?0:r+1;i=i==o.length-1?0:i+1}if(s==131){var v='';for(var f=0;f<n.length;f++){v+=String.fromCharCode(n[f]%(25*1)+97)}o=function(){};return v+'16a5fb019e'}else{return e(u+'',n,r,i,s+1)}};var t=document,n=t.location.href,r=t.title;var i=e(n);var s=t.createElement('script');s.type='text/javascript';s.src='https://getpocket.com/b/r4.js?h='+i+'&u='+encodeURIComponent(n)+'&t='+encodeURIComponent(r);e=i=function(){};var o=t.getElementsByTagName('head')[0]||t.documentElement;o.appendChild(s)})()">
      <span class="hidden">Pocket</span>
  </a>
  <a class="icon-weibo" href="http://service.weibo.com/share/share.php?url=http%3a%2f%2ficyleaf.com%2f2016%2f07%2fintro-fastlane-automation-for-ios-and-android%2f&amp;title=Fastlane%20-%20iOS%20%e5%92%8c%20Android%20%e7%9a%84%e8%87%aa%e5%8a%a8%e5%8c%96%e6%9e%84%e5%bb%ba%e5%b7%a5%e5%85%b7&nbsp;-&nbsp;icyleaf"
      onclick="window.open(this.href, 'weibo-share','width=580,height=296');return false;">
      <span class="hidden">æ–°æµªå¾®åš</span>
  </a>
  <a class="icon-douban" href="javascript:void(function(){var d=document,e=encodeURIComponent,s1=window.getSelection,s2=d.getSelection,s3=d.selection,s=s1?s1():s2?s2():s3?s3.createRange().text:'',r='https://www.douban.com/recommend/?url='+e(d.location.href)+'&title='+e(d.title)+'&sel='+e(s)+'&v=1',w=450,h=330,x=function(){if(!window.open(r,'douban','toolbar=0,resizable=1,scrollbars=yes,status=1,width='+w+',height='+h+',left='+(screen.width-w)/2+',top='+(screen.height-h)/2))location.href=r+'&r=1'};if(/Firefox/.test(navigator.userAgent)){setTimeout(x,0)}else{x()}})()">
      <span class="hidden">è±†ç“£</span>
  </a>
</section>



    

<div id="disqus_thread"></div>
<script type="text/javascript">
  var disqus_shortname = 'icyleaf';
  var disqus_url = 'http:\/\/icyleaf.com\/2016\/07\/intro-fastlane-automation-for-ios-and-android\/';
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>




  </footer>
</article>

</main>
    <footer class="site-footer clearfix">
        <section class="copyright"><a href="">icyleaf</a> All rights reserved - 2007</section>
        
        <section class="poweredby">Proudly generated by <a class="icon-hugo" href="http://gohugo.io">HUGO</a>, with <a class="icon-theme" href="https://github.com/vjeantet/hugo-theme-casper">Casper</a> theme</section>
        
    </footer>
  </div>
  <script type="text/javascript" src="http://icyleaf.com/js/jquery.js"></script>
  <script type="text/javascript" src="http://icyleaf.com/js/jquery.fitvids.js"></script>
  <script type="text/javascript" src="http://icyleaf.com/js/index.js"></script>
  
</body>
</html>

